{"version":3,"sources":["webpack:///src/app/orders-edit/orders-edit.page.scss","webpack:///src/app/orders-edit/orders-edit.module.ts","webpack:///src/app/orders-edit/orders-edit-routing.module.ts","webpack:///src/app/orders-edit/orders-edit.page.ts","webpack:///src/app/orders-edit/orders-edit.page.html"],"names":["OrdersEditPageModule","imports","declarations","routes","path","component","OrdersEditPageRoutingModule","forChild","exports","OrdersEditPage","storage","http","global","router","loadingController","platform","route","bluetoothSerial","nativePageTransitions","alertController","DatecsPrinter","base64ToGallery","title","elementType","value","storageOrder","showContent","disabledAnimation","content","contentWA","orderOffline","params","subscribe","id","source","ionViewWillEnter","isEnabled","then","response","message","enabled","console","log","ready","getObject","printer","address","offline","checkThisOrderSync","company","outlet","auth","user","data","orderIndex","findIndex","x","order","customer","name","center","phone","order_number","order_type","order_time","order_item","item","product","leftRight","price","qty","currency","subtotalItem","subtotal","discount","service_charge","tax","total","payment_channel","cash_collected","format_receipt1","format_receipt2","printHeader","printItem","printFooter","parseFloat","a","connect","disconnect","text","textString","String","paperWidthChar","countSpace","length","textResult","i","Math","floor","leftText","rightText","leftTextString","rightTextString","countChar","encoder","result","initialize","payment_method","align","newline","line","raw","cut","resultByte","encode","connectToBluetoothPrinter","_","write","disconnectBluetoothPrinter","err","printReceiptHeader","printReceiptItem","setTimeout","printReceiptFooter","create","cssClass","header","inputs","type","placeholder","buttons","role","handler","numberStr","phone_number","charAt","substring","window","open","alert","present","note","loadingPresent","reqHeader","token","options","headers","postData","order_id","item_id","post","base_url","status","setObject","toastPresent","loadingDismiss","error","dataHandler","navigate","direction","duration","slowdownfactor","slidePixels","iosdelay","androiddelay","fixedPixelsTop","fixedPixelsBottom","slide","offlineIndex","y","blah","cancel","level","selector","template"],"mappings":"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","file":"orders-edit-orders-edit-module-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJvcmRlcnMtZWRpdC5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OrdersEditPageRoutingModule } from './orders-edit-routing.module';\r\n\r\nimport { OrdersEditPage } from './orders-edit.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OrdersEditPageRoutingModule\r\n  ],\r\n  declarations: [OrdersEditPage]\r\n})\r\nexport class OrdersEditPageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OrdersEditPage } from './orders-edit.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OrdersEditPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OrdersEditPageRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { StorageService } from '../storage.service';\r\nimport { HttpClient, HttpHeaders, HttpErrorResponse} from \"@angular/common/http\";\r\nimport { GlobalService } from '../global.service';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, Platform , AlertController} from '@ionic/angular';\r\n\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\r\nimport { NativePageTransitions, NativeTransitionOptions } from '@ionic-native/native-page-transitions/ngx';\r\nimport EscPosEncoder from 'esc-pos-encoder-ionic';\r\n\r\nimport { DatecsprinterService } from '../datecsprinter.service';\r\nimport { Base64ToGallery } from '@ionic-native/base64-to-gallery/ngx';\r\n\r\n@Component({\r\n  selector: 'app-orders-edit',\r\n  templateUrl: './orders-edit.page.html',\r\n  styleUrls: ['./orders-edit.page.scss'],\r\n})\r\nexport class OrdersEditPage implements OnInit {\r\n\r\n  title = 'app';\r\n  elementType = 'img';\r\n  value = 'Techiediaries';\r\n\r\n  id: any;\r\n  auth: any;\r\n  source: any;\r\n  order: any;\r\n  storageOrder: any = [];\r\n  showContent: any=false;\r\n  disabledAnimation: any = false;\r\n  content: any = '';\r\n  contentWA: any = '';\r\n  printer: any;\r\n\r\n  company: any;\r\n  outlet: any;\r\n  user : any;\r\n\r\n  printHeader: any;\r\n  printItem: any;\r\n  printTotal: any;\r\n  printFooter: any;\r\n\r\n  orderOffline: any = [];\r\n\r\n  constructor(\r\n    private storage: StorageService,\r\n    private http: HttpClient,\r\n    public global: GlobalService,\r\n    private router:Router,\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private route: ActivatedRoute,\r\n    private bluetoothSerial: BluetoothSerial,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    private alertController: AlertController,\r\n    private DatecsPrinter: DatecsprinterService,\r\n    private base64ToGallery: Base64ToGallery\r\n  ) {\r\n    this.route.params.subscribe((params: any) => {\r\n     if(params['id'])\r\n     {\r\n       this.id = params['id'];\r\n       this.source = params['source'];\r\n     }\r\n\r\n     if(params['action'])\r\n     {\r\n       if(params['action'] == 'refresh')\r\n       {\r\n         this.ionViewWillEnter();\r\n       }\r\n     }\r\n   });\r\n\r\n   this.bluetoothSerial\r\n     .isEnabled()\r\n     .then((response) => {\r\n       const message = response.enabled ? 'enabled' : 'disabled';\r\n       console.log(`Bluetooth is ${message}`);\r\n     })\r\n     .catch(() => {\r\n       console.log('Error checking bluetooth status');\r\n     });\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.showContent = false;\r\n    this.platform.ready().then(() => {\r\n\r\n      this.storage.getObject('printer').then((printer: any) => {\r\n        if(printer!=null)\r\n        {\r\n          this.printer = printer.address;\r\n        }\r\n\r\n      });\r\n\r\n      this.storage.getObject('order_offline').then((offline: any) => {\r\n\r\n        if(offline != null)\r\n        {\r\n          this.orderOffline = offline;\r\n          this.checkThisOrderSync();\r\n        }\r\n      });\r\n\r\n      this.storage.getObject('company').then((company: any) => {\r\n        this.company = company;\r\n      });\r\n\r\n      this.storage.getObject('outlet_active').then((outlet: any) => {\r\n        this.outlet = outlet;\r\n      });\r\n\r\n      this.storage.getObject('auth').then((auth: any) => {\r\n        this.auth = auth;\r\n      });\r\n\r\n      this.storage.getObject('user').then((user: any) => {\r\n        this.user = user;\r\n      });\r\n\r\n      this.storage.getObject('order').then((data: any) => {\r\n        if(data != null)\r\n        {\r\n          this.storageOrder = data;\r\n          var orderIndex = this.storageOrder.findIndex(x => x.id === this.id);\r\n          this.order = this.storageOrder[orderIndex];\r\n          if(this.order.customer == null)\r\n          {\r\n            this.order.customer = {id:'Walk-in',name:'Walk-in'};\r\n          }\r\n          console.log(\"data all\",data);\r\n          console.log(orderIndex);\r\n          this.showContent = true;\r\n\r\n          // content receipt\r\n          var content = \"\\n\"+this.center(this.company.name);\r\n          content += \"\\n\"+this.center(this.outlet.phone)+\" \\n \\n\";\r\n          content += \"================================\\n\";\r\n          content += \"No order  : TRX-\"+this.order.order_number+\"\\n\";\r\n          content += \"Tipe order: \"+this.order.order_type+\"\\n\";\r\n          content += \"Tanggal   : \"+this.order.order_time+\"\\n\";\r\n          content += \"Outlet    : \"+this.outlet.name+\"\\n\";\r\n          content += \"Kasir     : \"+this.user.name+\"\\n\";\r\n          content += \"Pelanggan : \"+this.order.customer.name+\" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n\r\n          for (let item of this.order.order_item)\r\n          {\r\n            content += item.product.name+\" \\n\";\r\n            content += this.leftRight(item.price+\"x\"+item.qty,this.global.currency(this.subtotalItem(item.price,item.qty)))+\" \\n\";\r\n          }\r\n\r\n          content += \"--------------------------------\\n\";\r\n          content += this.leftRight(\"Subtotal\",this.global.currency(this.order.subtotal))+\" \\n\";\r\n          content += this.leftRight(\"Diskon\",\"(\"+this.global.currency(this.order.discount)+\")\")+\" \\n\";\r\n          content += this.leftRight(\"Service Charge\",this.global.currency(this.order.service_charge))+\" \\n\";\r\n          content += this.leftRight(\"Pajak\",this.global.currency(this.order.tax))+\" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n          content += this.leftRight(\"Grand Total\",this.global.currency(this.order.total))+\" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n          content += this.leftRight(\"Pembayaran \"+this.order.payment_channel,this.global.currency(this.order.cash_collected))+\" \\n\";\r\n          if(this.order.payment_channel == 'Cash')\r\n          {\r\n            content += this.leftRight(\"Uang kembali \",this.global.currency(this.order.cash_collected - this.order.total))+\" \\n\";\r\n          }\r\n\r\n          content += \"--------------------------------\\n \\n\";\r\n          content += this.center(this.company.format_receipt1)+\" \\n\";\r\n          content += this.center(this.company.format_receipt2)+\" \\n\";\r\n          content += \"\\n \\n \\n\";\r\n\r\n          this.content = content;\r\n\r\n          // content wa\r\n\r\n          var contentWA = \"*\"+this.company.name+\"* %0a %0a\";\r\n          // contentWA += \"================================%0a\";\r\n          contentWA += \"No order *TRX-\"+this.order.order_number+\"* (\"+this.order.order_time+\")%0a\";\r\n          contentWA += \"Tipe order: \"+this.order.order_type+\"%0a\";\r\n          contentWA += \"Pelanggan : \"+this.order.customer.name+\" %0a\";\r\n          contentWA += \"--------------------------------%0a\";\r\n\r\n          for (let item of this.order.order_item)\r\n          {\r\n            contentWA += item.product.name+\" %0a\";\r\n            contentWA += item.price+\"x\"+item.qty+\"=\"+this.global.currency(this.subtotalItem(item.price,item.qty))+\" %0a\";\r\n          }\r\n\r\n          contentWA += \"--------------------------------%0a\";\r\n          contentWA += \"Subtotal : \"+this.global.currency(this.order.subtotal)+\" %0a\";\r\n          contentWA += \"Diskon : \"+this.global.currency(this.order.discount)+\" %0a\";\r\n          contentWA += \"Service Charge : \"+this.global.currency(this.order.service_charge)+\" %0a\";\r\n          contentWA += \"Pajak : \"+this.global.currency(this.order.tax)+\" %0a %0a\";\r\n          contentWA += \"*Grand Total* : \"+this.global.currency(this.order.total)+\" %0a\";\r\n          contentWA += \"Pembayaran \"+this.order.payment_channel+\" : \"+this.global.currency(this.order.cash_collected)+\" %0a\";\r\n          if(this.order.payment_channel == 'Cash')\r\n          {\r\n            contentWA += \"Uang kembali : \"+this.global.currency(this.order.cash_collected - this.order.total)+\" %0a\";\r\n          }\r\n          contentWA += \"%0a %0a\";\r\n          contentWA += this.company.format_receipt1+\"%0a\";\r\n          contentWA += this.company.format_receipt2+\"%0a\";\r\n          // contentWA += \"\\n \\n \\n\";\r\n\r\n          this.contentWA = contentWA;\r\n\r\n\r\n          // modify content print\r\n          var printHeader = \"\\n\"+this.center(this.company.name);\r\n          printHeader += \"\\n\"+this.center(this.outlet.phone)+\" \\n \\n\";\r\n          printHeader += \"================================\\n\";\r\n          printHeader += \"No order  : TRX-\"+this.order.order_number+\"\\n\";\r\n          printHeader += \"Tipe order: \"+this.order.order_type+\"\\n\";\r\n          printHeader += \"Tanggal   : \"+this.order.order_time+\"\\n\";\r\n          printHeader += \"Outlet    : \"+this.outlet.name+\"\\n\";\r\n          printHeader += \"Kasir     : \"+this.user.name+\"\\n\";\r\n          printHeader += \"Pelanggan : \"+this.order.customer.name+\" \\n\";\r\n          printHeader += \"--------------------------------\\n\";\r\n\r\n          this.printHeader = printHeader;\r\n\r\n          var printItem = '';\r\n          for (let item of this.order.order_item)\r\n          {\r\n            printItem += item.product.name+\" \\n\";\r\n            printItem += this.leftRight(item.price+\"x\"+item.qty+\" \",this.global.currency(this.subtotalItem(item.price,item.qty)))+\" \\n\";\r\n          }\r\n\r\n          this.printItem = printItem;\r\n\r\n          var printFooter = '';\r\n\r\n          printFooter += \"--------------------------------\\n\";\r\n          printFooter += this.leftRight(\"Subtotal\",this.global.currency(this.order.subtotal))+\" \\n\";\r\n          printFooter += this.leftRight(\"Diskon\",\"(\"+this.global.currency(this.order.discount)+\")\")+\" \\n\";\r\n          printFooter += this.leftRight(\"Service Charge\",this.global.currency(this.order.service_charge))+\" \\n\";\r\n          printFooter += this.leftRight(\"Pajak\",this.global.currency(this.order.tax))+\" \\n\";\r\n          printFooter += \"--------------------------------\\n\";\r\n          printFooter += this.leftRight(\"Grand Total\",this.global.currency(this.order.total))+\" \\n\";\r\n          printFooter += \"--------------------------------\\n\";\r\n          printFooter += this.leftRight(\"Pembayaran \"+this.order.payment_channel,this.global.currency(this.order.cash_collected))+\" \\n\";\r\n          if(this.order.payment_channel == 'Cash')\r\n          {\r\n            printFooter += this.leftRight(\"Uang kembali \",this.global.currency(this.order.cash_collected - this.order.total))+\" \\n\";\r\n          }\r\n\r\n          printFooter += \"--------------------------------\\n \\n\";\r\n          printFooter += this.center(this.company.format_receipt1)+\" \\n\";\r\n          printFooter += this.center(this.company.format_receipt2)+\" \\n\";\r\n          printFooter += \"\\n \\n \\n\";\r\n\r\n          this.printFooter = printFooter;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  subtotalItem(price,qty)\r\n  {\r\n    var subtotal = parseFloat(price) * parseFloat(qty);\r\n\r\n    return subtotal;\r\n  }\r\n\r\n  connectToBluetoothPrinter()\r\n  {\r\n  //This will connect to bluetooth printer via the mac address provided\r\n    var a = this.bluetoothSerial.connect(this.printer);\r\n    console.log(a);\r\n     return a;\r\n  }\r\n\r\n  disconnectBluetoothPrinter()\r\n  {\r\n  //This will disconnect the current bluetooth connection\r\n     return this.bluetoothSerial.disconnect();\r\n  }\r\n\r\n  center(text)\r\n  {\r\n    var textString = String(text);\r\n    var paperWidthChar = 31;\r\n    var countSpace = (paperWidthChar - textString.length) / 2;\r\n\r\n    var textResult = '';\r\n    for(var i=1;i<=Math.floor(countSpace);i++)\r\n    {\r\n      textResult +=\" \";\r\n    }\r\n\r\n    textResult += textString;\r\n\r\n    return textResult;\r\n\r\n  }\r\n\r\n  leftRight(leftText,rightText)\r\n  {\r\n    var leftTextString = String(leftText);\r\n    var rightTextString = String(rightText);\r\n\r\n    var paperWidthChar = 31;\r\n    var countChar = leftTextString.length + rightTextString.length;\r\n    var countSpace = paperWidthChar - countChar;\r\n\r\n    console.log('L',leftTextString.length);\r\n    console.log('R',rightTextString.length);\r\n    console.log('countChar',countChar);\r\n    console.log('countSpace', countSpace);\r\n\r\n    var textResult = leftTextString;\r\n\r\n    for(var i=1;i<=countSpace;i++)\r\n    {\r\n      textResult += \" \";\r\n    }\r\n\r\n    textResult += rightTextString;\r\n    return textResult;\r\n  }\r\n\r\n  printReceipt()\r\n  {\r\n\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    if(this.order.payment_method == 'Cash')\r\n    {\r\n      result\r\n        .align('left')\r\n        .newline()\r\n        .line(this.content)\r\n        .newline()\r\n        .newline()\r\n        .raw([0x1b,0x70,0x00])\r\n        .raw([0x1b,0x70,0x01])\r\n        .cut();\r\n    }\r\n    else\r\n    {\r\n      result\r\n        .align('left')\r\n        .newline()\r\n        .line(this.content)\r\n        .newline()\r\n        .newline()\r\n        .cut();\r\n    }\r\n\r\n    const resultByte = result.encode();\r\n    // const resultQr = this.content;\r\n\r\n     this.connectToBluetoothPrinter()\r\n     .subscribe(_=>{\r\n        //2. Connected successfully\r\n        this.bluetoothSerial.write(resultByte)\r\n        .then(_=>{\r\n         //3. Print successful\r\n         //If you want to tell user print is successful,\r\n         //handle it here\r\n         //4. IMPORTANT! Disconnect bluetooth after printing\r\n         console.log(_);\r\n         this.disconnectBluetoothPrinter()\r\n         },err=>{\r\n           //If there is an error printing to bluetooth printer\r\n           //handle it here\r\n           console.log(err);\r\n         })\r\n     },err=>{\r\n\r\n       //If there is an error connecting to bluetooth printer\r\n       //handle it here\r\n     })\r\n  }\r\n\r\n  printReceipt2()\r\n  {\r\n    this.printReceiptHeader();\r\n  }\r\n\r\n  printReceiptHeader()\r\n  {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    result\r\n      .align('left')\r\n      .newline()\r\n      .line(this.printHeader);\r\n\r\n    const resultByte = result.encode();\r\n     this.connectToBluetoothPrinter()\r\n     .subscribe(_=>{\r\n        this.bluetoothSerial.write(resultByte)\r\n        .then(_=>{\r\n         console.log(_);\r\n         this.printReceiptItem();\r\n         },err=>{\r\n           console.log(err);\r\n         })\r\n     },err=>{\r\n     })\r\n  }\r\n\r\n  printReceiptItem()\r\n  {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    result\r\n      .align('left')\r\n      .line(this.printItem);\r\n\r\n    const resultByte = result.encode();\r\n    this.bluetoothSerial.write(resultByte)\r\n    .then(_=>{\r\n     console.log(_);\r\n     setTimeout(() => {\r\n       this.printReceiptFooter();\r\n     }, 1000);\r\n     },err=>{\r\n       console.log(err);\r\n     });\r\n  }\r\n\r\n  printReceiptFooter()\r\n  {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    if(this.order.payment_method == 'Cash')\r\n    {\r\n      result\r\n        .align('left')\r\n        .line(this.printFooter)\r\n        .newline()\r\n        .raw([0x1b,0x70,0x00])\r\n        .raw([0x1b,0x70,0x01])\r\n        .cut();\r\n    }\r\n    else\r\n    {\r\n      result\r\n        .align('left')\r\n        .line(this.printFooter)\r\n        .newline()\r\n        .cut();\r\n    }\r\n\r\n    const resultByte = result.encode();\r\n    this.bluetoothSerial.write(resultByte)\r\n    .then(_=>{\r\n     console.log(_);\r\n     this.disconnectBluetoothPrinter()\r\n     },err=>{\r\n       console.log(err);\r\n     });\r\n  }\r\n\r\n  async sendWAPrompt() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Kirim nota ke Whatsapp',\r\n      inputs: [\r\n        {\r\n          name: 'phone_number',\r\n          type: 'tel',\r\n          placeholder: 'Nomor WA tujuan'\r\n        }\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: 'Batal',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: () => {\r\n\r\n            console.log('Confirm Cancel');\r\n          }\r\n        }, {\r\n          text: 'Kirim',\r\n          handler: (data: any) => {\r\n\r\n            var numberStr = String(data.phone_number);\r\n            if(numberStr.charAt(0) == '0')\r\n            {\r\n              var numberStr = numberStr.substring(0);\r\n              var numberStr = '62'+numberStr;\r\n            }\r\n\r\n            window.open(\"https://wa.me/\"+numberStr+\"?text=\"+this.contentWA);\r\n            console.log('Confirm Ok');\r\n\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async editDetail(item,i) {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: this.order.order_item[i].product.name,\r\n      inputs: [\r\n        {\r\n          name: 'qty',\r\n          type: 'number',\r\n          id: 'qty',\r\n          value: this.order.order_item[i].qty,\r\n          placeholder: 'Qty'\r\n        },\r\n        {\r\n          name: 'note',\r\n          id: 'note',\r\n          value: this.order.order_item[i].note,\r\n          type: 'textarea',\r\n          placeholder: 'Catatan'\r\n        },\r\n      ],\r\n      // message: '<ion-button (click)=\"deleteItem('+item.id+')\"><ion-text color=\"danger\">Hapus produk ini dari pesanan</ion-text></ion-button>',\r\n      buttons: [\r\n        {\r\n          text: 'Batal',\r\n          role: 'cancel',\r\n          cssClass: 'danger',\r\n          handler: () => {\r\n            console.log('Confirm Cancel');\r\n          }\r\n        },\r\n        {\r\n          text: 'Simpan',\r\n          handler: (data) => {\r\n            this.global.loadingPresent('mengubah item...');\r\n            this.order.order_item[i].qty = data.qty;\r\n            this.order.order_item[i].note = data.note;\r\n\r\n            var reqHeader = new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer '+this.auth.token\r\n             });\r\n\r\n            let options = {headers: reqHeader};\r\n\r\n            let postData = {\r\n                        order_id: this.id,\r\n                        item_id: item.id,\r\n                        qty: data.qty,\r\n                        note: data.note\r\n                      };\r\n\r\n            this.http.post(this.global.base_url+'auth/order/edit_item', postData, options)\r\n               .subscribe((data: any) => {\r\n                 console.log(data);\r\n\r\n                 if(data.status == 0)\r\n                 {\r\n                   this.storage.getObject('order').then((storageOrder: any) => {\r\n                     if(storageOrder != null)\r\n                     {\r\n                       var orderIndex = storageOrder.findIndex(x => x.id === this.id);\r\n                       storageOrder[orderIndex] = data.order;\r\n\r\n                       this.storage.setObject('order',storageOrder);\r\n\r\n                       this.global.toastPresent('Item pesanan berhasil disimpan!');\r\n                       this.ionViewWillEnter();\r\n                     }\r\n                   });\r\n                 }\r\n                 else\r\n                 {\r\n                   console.log(data);\r\n                 }\r\n                 this.global.loadingDismiss();\r\n                }, error => {\r\n                 console.log(error);\r\n                this.global.loadingDismiss();\r\n            });\r\n\r\n            console.log('Confirm Ok');\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async deleteItem(item,i) {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Hapus item pesanan',\r\n      message: 'Yakin menghapus '+item.product.name+' dari pesanan ini?',\r\n      buttons: [\r\n        {\r\n          text: 'Batal',\r\n          role: 'cancel',\r\n          cssClass: 'danger',\r\n          handler: () => {\r\n            console.log('Confirm Cancel');\r\n          }\r\n        },\r\n        {\r\n          text: 'Hapus',\r\n          handler: (dataHandler) => {\r\n\r\n            this.global.loadingPresent('menghapus item...');\r\n\r\n            var reqHeader = new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer '+this.auth.token\r\n            });\r\n\r\n            let options = {headers: reqHeader};\r\n\r\n            let postData = {\r\n                        item_id: item.id,\r\n                      };\r\n\r\n            this.http.post(this.global.base_url+'auth/order/delete_item', postData, options)\r\n               .subscribe((data: any) => {\r\n                 console.log(data);\r\n\r\n                 if(data.status == 0)\r\n                 {\r\n                   this.storage.getObject('order').then((storageOrder: any) => {\r\n                     if(storageOrder != null)\r\n                     {\r\n                       var orderIndex = storageOrder.findIndex(x => x.id === this.id);\r\n                       storageOrder[orderIndex] = data.order;\r\n\r\n                       this.storage.setObject('order',storageOrder);\r\n                       this.global.toastPresent('Item pesanan berhasil dihapus!');\r\n                       this.ionViewWillEnter();\r\n                     }\r\n                   });\r\n                 }\r\n                 else\r\n                 {\r\n                   console.log(data);\r\n                 }\r\n                 this.global.loadingDismiss();\r\n                }, error => {\r\n                 console.log(error);\r\n                this.global.loadingDismiss();\r\n            });\r\n\r\n            console.log('Confirm Ok');\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n\r\n  gotoPOS()\r\n  {\r\n    this.disabledAnimation = true;\r\n    this.router.navigate(['/tabs/blank']).then(() => {\r\n      this.router.navigate(['/tabs/tab-pos']);\r\n    });\r\n  }\r\n\r\n  ionViewWillLeave()\r\n  {\r\n    let options: NativeTransitionOptions = {\r\n       direction: 'right',\r\n       duration: 300,\r\n       slowdownfactor: 3,\r\n       slidePixels: 0,\r\n       iosdelay: 0,\r\n       androiddelay: 0,\r\n       fixedPixelsTop: 0,\r\n       fixedPixelsBottom: 0\r\n      }\r\n\r\n    if(this.disabledAnimation == false)\r\n    {\r\n      this.nativePageTransitions.slide(options);\r\n    }\r\n  }\r\n\r\n  checkThisOrderSync()\r\n  {\r\n    var offlineIndex = this.orderOffline.findIndex(y => y === this.id);\r\n    if(offlineIndex > -1)\r\n    {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  async infoOffline() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Info',\r\n      message: 'Transaksi ini belum tersinkronisasi!',\r\n      buttons: ['OK']\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async cancelConfirm() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Konfirmasi pembatalan!',\r\n      message: 'Anda yakin membatalkan order ini?',\r\n      buttons: [\r\n        {\r\n          text: 'Tidak',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: (blah) => {\r\n            console.log('Confirm Cancel: blah');\r\n          }\r\n        }, {\r\n          text: 'Ya',\r\n          handler: () => {\r\n            this.cancel();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  cancel()\r\n  {\r\n    if(this.user.level == 'Cashier')\r\n    {\r\n      this.global.toastPresent('Anda tidak dapat membatalkan order, silahkan gunakan akses level Admin untuk membatalkan!');\r\n      return false;\r\n    }\r\n    this.global.loadingPresent('membatalkan order...');\r\n\r\n    this.storage.getObject('order').then((data: any) => {\r\n      if(data != null)\r\n      {\r\n        var orderIndex = data.findIndex(x => x.id === this.id);\r\n        data[orderIndex].status = 'Canceled';\r\n\r\n        this.storage.setObject('order',data);\r\n\r\n        var reqHeader = new HttpHeaders({\r\n            'Content-Type': 'application/json',\r\n            'Authorization': 'Bearer '+this.auth.token\r\n         });\r\n\r\n        let options = {headers: reqHeader};\r\n        let postData = {\r\n                    id: this.id\r\n                  };\r\n\r\n        this.http.post(this.global.base_url+'auth/order/cancel', postData, options)\r\n           .subscribe((data: any) => {\r\n             console.log(data);\r\n\r\n             if(data.status == 0)\r\n             {\r\n               this.global.toastPresent(data.message);\r\n               this.router.navigate(['/tabs/blank']).then(() => {\r\n                 this.router.navigate(['/tabs/tab-order']);\r\n               });\r\n               // this.ionViewWillEnter();\r\n             }\r\n             else\r\n             {\r\n               console.log(data);\r\n             }\r\n             this.global.loadingDismiss();\r\n            }, error => {\r\n             console.log(error);\r\n            this.global.loadingDismiss();\r\n        });\r\n      }\r\n    });\r\n\r\n  }\r\n}\r\n","export default \"<ion-header mode=\\\"ios\\\" *ngIf=\\\"showContent\\\">\\r\\n\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button fill=\\\"link\\\" [routerLink]=\\\"['/orders-detail/'+id+'/list']\\\"><ion-icon name=\\\"arrow-back-outline\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title *ngIf=\\\"showContent\\\">Ubah TRX-{{order.order_number}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"infoOffline()\\\" fill=\\\"link\\\" *ngIf=\\\"checkThisOrderSync()\\\">\\r\\n        <ion-icon name=\\\"alert-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n      <ion-button (click)=\\\"cancelConfirm()\\\" fill=\\\"link\\\" *ngIf=\\\"order.status == 'Completed' || order.status == 'Pending'\\\">\\r\\n        <ion-icon name=\\\"close-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content mode=\\\"ios\\\" class=\\\"ion-padding\\\" *ngIf=\\\"showContent\\\">\\r\\n\\r\\n  <ion-card>\\r\\n    <ion-card-content class=\\\"ion-no-padding\\\">\\r\\n      <ion-list>\\r\\n        <ion-item lines=\\\"full\\\"><ion-label>Status</ion-label>\\r\\n          <ion-badge *ngIf=\\\"order.status == 'Pending'\\\" slot=\\\"end\\\" color=\\\"warning\\\"><strong>Belum lunas</strong></ion-badge>\\r\\n           <ion-badge *ngIf=\\\"order.status == 'Completed'\\\" slot=\\\"end\\\" color=\\\"success\\\"><strong>Lunas</strong></ion-badge>\\r\\n           <ion-badge *ngIf=\\\"order.status == 'Canceled'\\\" slot=\\\"end\\\" color=\\\"danger\\\"><strong>Dibatalkan</strong></ion-badge>\\r\\n\\r\\n        </ion-item>\\r\\n        <ion-item lines=\\\"full\\\"><ion-label class=\\\"ion-text-wrap\\\">No order <br/><small>{{order.order_time}}</small></ion-label><ion-note slot=\\\"end\\\" color=\\\"primary\\\">TRX-{{order.order_number}}</ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\"><small>Tipe pesanan</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{order.order_type}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"none\\\" [routerLink]=\\\"['/select-customer/orders-edit/'+id]\\\"><small>Pelanggan</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{order.customer.name}}</small></ion-note></ion-item>\\r\\n        </ion-list>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-card>\\r\\n    <ion-card-content class=\\\"ion-no-padding\\\">\\r\\n      <ion-list>\\r\\n        <ion-item  button lines=\\\"full\\\" *ngFor=\\\"let item of order.order_item; let i = index;\\\">\\r\\n          <ion-button slot=\\\"start\\\" color=\\\"danger\\\" fill=\\\"link\\\" (click)=\\\"deleteItem(item,i)\\\"><ion-icon color=\\\"danger\\\" name=\\\"trash-outline\\\"></ion-icon></ion-button>\\r\\n          <ion-label (click)=\\\"editDetail(item,i)\\\" class=\\\"ion-text-wrap\\\">{{item.product.name}}<small><br/>{{global.currency(item.price)}} x {{item.qty}} <br/><span style=\\\"color:#666\\\">{{item.note}}</span></small></ion-label>\\r\\n          <ion-note (click)=\\\"editDetail(item,i)\\\" slot=\\\"end\\\"><small>{{global.currency(subtotalItem(item.price,item.qty))}}</small></ion-note>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n\\r\\n      <ion-button lines=\\\"none\\\" expand=\\\"block\\\" fill=\\\"link\\\" color=\\\"primary\\\" [routerLink]=\\\"['/select-product/orders-edit/'+id+'/'+order.order_type]\\\"><ion-icon name=\\\"add-outline\\\" slot=\\\"start\\\"></ion-icon> <ion-text color=\\\"primary\\\">Tambah item</ion-text></ion-button>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-card>\\r\\n    <ion-card-content class=\\\"ion-no-padding\\\">\\r\\n      <ion-list>\\r\\n\\r\\n        <ion-item lines=\\\"full\\\" class=\\\"item-small\\\"><small><strong>Subtotal</strong></small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{global.currency(order.subtotal)}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\" class=\\\"item-small\\\" [routerLink]=\\\"['/select-discount/orders-edit/'+id]\\\"><small>Diskon </small><ion-note slot=\\\"end\\\"><small>{{global.currency(order.discount)}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\" class=\\\"item-small\\\" *ngIf=\\\"order.service_charge > 0\\\"><small>Service charge ({{company.service_charge}}%)</small><ion-note slot=\\\"end\\\"><small>{{global.currency(order.service_charge)}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\" *ngIf=\\\"order.tax > 0\\\"><small>Pajak ({{company.tax}}%)</small><ion-note slot=\\\"end\\\"><small>{{global.currency(order.tax)}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"none\\\" color=\\\"light\\\">Total<ion-note slot=\\\"end\\\" color=\\\"dark\\\">{{global.currency(order.total)}}</ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\" *ngIf=\\\"order.status == 'Completed'\\\"><small>Pembayaran ({{order.payment_channel}})</small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{global.currency(order.cash_collected)}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\" *ngIf=\\\"order.status == 'Completed' && order.payment_method == 'Cash'\\\"><small>Uang kembali</small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{global.currency(order.cash_collected - order.total)}}</small></ion-note></ion-item>\\r\\n      </ion-list>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding\\\" mode=\\\"ios\\\" *ngIf=\\\"showContent\\\">\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col *ngIf=\\\"order.payment_channel == 'QRIS Online' && order.status == 'Pending'\\\"><ion-button expand=\\\"block\\\" fill=\\\"outline\\\" [routerLink]=\\\"['/orders-payment-qris/'+id]\\\">\\r\\n        <ion-icon name=\\\"qr-code-outline\\\" slot=\\\"start\\\" ></ion-icon>\\r\\n         Bayar QRIS\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col *ngIf=\\\"order.status == 'Completed'\\\"><ion-button expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"sendWAPrompt()\\\">\\r\\n        <ion-icon name=\\\"arrow-redo-outline\\\" slot=\\\"start\\\" ></ion-icon>\\r\\n        Kirim Whatsapp\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col *ngIf=\\\"order.status == 'Completed'\\\"><ion-button expand=\\\"block\\\" (click)=\\\"printReceipt2()\\\">\\r\\n        <ion-icon name=\\\"print-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Cetak nota\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n\\r\\n\\r\\n      <ion-col><ion-button expand=\\\"block\\\" color=\\\"primary\\\" [routerLink]=\\\"['/orders-detail/'+order.id+'/edit']\\\">\\r\\n        <ion-icon name=\\\"checkmark-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Selesai\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-footer>\\r\\n\";"]}