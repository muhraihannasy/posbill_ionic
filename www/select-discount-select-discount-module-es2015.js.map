{"version":3,"sources":["./src/app/select-discount/select-discount.page.scss","./src/app/select-discount/select-discount.page.html","./src/app/select-discount/select-discount-routing.module.ts","./src/app/select-discount/select-discount.page.ts","./src/app/select-discount/select-discount.module.ts"],"names":[],"mappings":"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","file":"select-discount-select-discount-module-es2015.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzZWxlY3QtZGlzY291bnQucGFnZS5zY3NzIn0= */\";","export default \"<ion-header mode=\\\"ios\\\">\\r\\n\\r\\n    <ion-searchbar (ionInput)=\\\"filterList($event)\\\" placeholder=\\\"Cari diskon\\\"></ion-searchbar>\\r\\n    <div>\\r\\n    <ion-button fill=\\\"link\\\" color=\\\"primary\\\" expand=\\\"block\\\" (click)=\\\"choose({id:'',amount:0,type:'Fixed'})\\\"><ion-text color=\\\"primary\\\">Tanpa diskon</ion-text></ion-button>\\r\\n    </div>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content mode=\\\"ios\\\">\\r\\n\\r\\n  <ion-list>\\r\\n    <ion-item button *ngFor=\\\"let item of discountSearch\\\" (click)=\\\"choose(item)\\\">\\r\\n      <ion-label>{{item.name}}</ion-label>\\r\\n      <ion-note slot=\\\"end\\\"><small>{{item.amount}}</small></ion-note>\\r\\n    </ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SelectDiscountPage } from './select-discount.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SelectDiscountPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SelectDiscountPageRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { StorageService } from '../storage.service';\r\nimport { HttpClient, HttpHeaders, HttpErrorResponse} from \"@angular/common/http\";\r\nimport { GlobalService } from '../global.service';\r\nimport { LoadingController, Platform, MenuController } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { NativePageTransitions, NativeTransitionOptions } from '@ionic-native/native-page-transitions/ngx';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-select-discount',\r\n  templateUrl: './select-discount.page.html',\r\n  styleUrls: ['./select-discount.page.scss'],\r\n})\r\nexport class SelectDiscountPage implements OnInit {\r\n\r\n  id: any;\r\n  auth: any;\r\n  discount: any;\r\n  discountSearch: any;\r\n  source: any;\r\n\r\n\r\n  constructor(\r\n    private storage: StorageService,\r\n    private http: HttpClient,\r\n    public global: GlobalService,\r\n    private router:Router,\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    private route: ActivatedRoute\r\n  ) {\r\n\r\n    this.route.params.subscribe((params: any) => {\r\n      if(params['source'])\r\n      {\r\n        if(params['source'] != '')\r\n        {\r\n            this.source = params['source'];\r\n        }\r\n      }\r\n      if(params['id'])\r\n      {\r\n        if(params['id'] != '')\r\n        {\r\n            this.id = params['id'];\r\n        }\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter()\r\n  {\r\n    this.storage.getObject('auth').then((auth) => {\r\n      this.auth = auth;\r\n      this.getData();\r\n    });\r\n\r\n  }\r\n\r\n  getData()\r\n  {\r\n    this.global.loadingPresent('mengambil data...');\r\n    this.storage.getObject('auth').then((auth) => {\r\n\r\n      var reqHeader = new HttpHeaders({\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer '+this.auth.token\r\n       });\r\n\r\n      let options = {headers: reqHeader};\r\n\r\n      this.http.post(this.global.base_url+'auth/discount/list', null, options)\r\n         .subscribe((data: any) => {\r\n           console.log(data);\r\n\r\n           if(data.status == 0)\r\n           {\r\n             this.discount = data.discount;\r\n             this.discountSearch = this.discount;\r\n             console.log(data);\r\n           }\r\n           else\r\n           {\r\n             console.log(data);\r\n           }\r\n           this.global.loadingDismiss();\r\n          }, error => {\r\n           console.log(error);\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  async filterList(evt) {\r\n     this.discountSearch = this.discount;\r\n\r\n    const searchTerm = evt.srcElement.value;\r\n\r\n    if (!searchTerm) {\r\n      return;\r\n    }\r\n\r\n    this.discountSearch = this.discountSearch.filter(currentCustomer => {\r\n      if (currentCustomer.name && searchTerm) {\r\n        return (currentCustomer.name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\r\n      }\r\n    });\r\n\r\n    console.log(this.discountSearch);\r\n  }\r\n\r\n  choose(discount)\r\n  {\r\n    this.storage.setObject('pos_discount',{id:discount.id,name:discount.name,amount:discount.amount,type:discount.type});\r\n\r\n    if(this.source == 'payment-options')\r\n    {\r\n      this.router.navigate(['/'+this.source]);\r\n    }\r\n    else if(this.source == 'orders-edit')\r\n    {\r\n      this.global.loadingPresent('menyimpan diskon..');\r\n      var reqHeader = new HttpHeaders({\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer '+this.auth.token\r\n       });\r\n\r\n      let options = {headers: reqHeader};\r\n\r\n      let postData = {\r\n                  order_id: this.id,\r\n                  discount_id: discount.id\r\n                };\r\n\r\n      this.http.post(this.global.base_url+'auth/order/edit_discount', postData, options)\r\n         .subscribe((data: any) => {\r\n           console.log(data);\r\n\r\n           if(data.status == 0)\r\n           {\r\n             this.storage.getObject('order').then((storageOrder: any) => {\r\n               if(storageOrder != null)\r\n               {\r\n                 var orderIndex = storageOrder.findIndex(x => x.id === this.id);\r\n                 storageOrder[orderIndex] = data.order;\r\n\r\n                 this.storage.setObject('order',storageOrder);\r\n\r\n                 this.global.toastPresent(data.message);\r\n                 this.router.navigate(['/'+this.source+'/'+this.id+'/refresh']);\r\n               }\r\n             });\r\n           }\r\n           else\r\n           {\r\n             console.log(data);\r\n           }\r\n           this.global.loadingDismiss();\r\n          }, error => {\r\n           console.log(error);\r\n          this.global.loadingDismiss();\r\n      });\r\n\r\n    }\r\n    else\r\n    {\r\n      this.router.navigate(['/'+this.source+'/'+this.id]);\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SelectDiscountPageRoutingModule } from './select-discount-routing.module';\r\n\r\nimport { SelectDiscountPage } from './select-discount.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SelectDiscountPageRoutingModule\r\n  ],\r\n  declarations: [SelectDiscountPage]\r\n})\r\nexport class SelectDiscountPageModule {}\r\n"],"sourceRoot":"webpack:///"}