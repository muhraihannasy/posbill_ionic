{"version":3,"sources":["webpack:///src/app/booking-edit/booking-edit.page.scss","webpack:///src/app/booking-edit/booking-edit.page.ts","webpack:///src/app/booking-edit/booking-edit-routing.module.ts","webpack:///src/app/booking-edit/booking-edit.module.ts","webpack:///src/app/booking-edit/booking-edit.page.html"],"names":["BookingEditPage","storage","http","global","router","loadingController","platform","route","bluetoothSerial","nativePageTransitions","alertController","storageBooking","showContent","disabledAnimation","content","contentWA","bookingOffline","params","subscribe","id","source","ionViewWillEnter","isEnabled","then","response","message","enabled","console","log","ready","getObject","printer","address","offline","checkThisOrderSync","company","outlet","user","auth","data","orderIndex","findIndex","x","booking","customer","name","center","phone","book_number","book_time","booking_item","item","product","leftRight","price","qty","currency","subtotalItem","book_ref","format_receipt1","format_receipt2","subtotal","parseFloat","a","connect","disconnect","text","textString","String","paperWidthChar","countSpace","length","textResult","i","Math","floor","leftText","rightText","leftTextString","rightTextString","countChar","connectToBluetoothPrinter","_","write","disconnectBluetoothPrinter","err","create","cssClass","header","inputs","type","placeholder","buttons","role","handler","numberStr","phone_number","charAt","substring","window","open","alert","present","value","note","loadingPresent","reqHeader","token","options","headers","postData","booking_id","item_id","post","base_url","status","bookingIndex","setObject","toastPresent","loadingDismiss","error","dataHandler","cart","totalQty","push","cost","pos_subtotal","amount","pos_order_type","order_type","pos_customer","customer_id","direction","duration","slowdownfactor","slidePixels","iosdelay","androiddelay","fixedPixelsTop","fixedPixelsBottom","slide","navigate","offlineIndex","y","blah","cancel","splice","selector","template","routes","path","component","BookingEditPageRoutingModule","imports","forChild","exports","BookingEditPageModule","declarations"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCgBFA,eAAe;AAmB1B,iCACUC,OADV,EAEUC,IAFV,EAGSC,MAHT,EAIUC,MAJV,EAKUC,iBALV,EAMUC,QANV,EAOUC,KAPV,EAQUC,eARV,EASUC,qBATV,EAUUC,eAVV,EAU0C;AAAA;;AAAA;;AAThC,eAAAT,OAAA,GAAAA,OAAA;AACA,eAAAC,IAAA,GAAAA,IAAA;AACD,eAAAC,MAAA,GAAAA,MAAA;AACC,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,iBAAA,GAAAA,iBAAA;AACA,eAAAC,QAAA,GAAAA,QAAA;AACA,eAAAC,KAAA,GAAAA,KAAA;AACA,eAAAC,eAAA,GAAAA,eAAA;AACA,eAAAC,qBAAA,GAAAA,qBAAA;AACA,eAAAC,eAAA,GAAAA,eAAA;AAvBV,eAAAC,cAAA,GAAsB,EAAtB;AACA,eAAAC,WAAA,GAAiB,KAAjB;AACA,eAAAC,iBAAA,GAAyB,KAAzB;AACA,eAAAC,OAAA,GAAe,EAAf;AACA,eAAAC,SAAA,GAAiB,EAAjB;AAOA,eAAAC,cAAA,GAAsB,EAAtB;AAcE,eAAKT,KAAL,CAAWU,MAAX,CAAkBC,SAAlB,CAA4B,UAACD,MAAD,EAAiB;AAC5C,gBAAGA,MAAM,CAAC,IAAD,CAAT,EACA;AACE,mBAAI,CAACE,EAAL,GAAUF,MAAM,CAAC,IAAD,CAAhB;AACA,mBAAI,CAACG,MAAL,GAAcH,MAAM,CAAC,QAAD,CAApB;AACD;;AACD,gBAAGA,MAAM,CAAC,QAAD,CAAT,EACA;AACE,kBAAGA,MAAM,CAAC,QAAD,CAAN,IAAoB,SAAvB,EACA;AACE,qBAAI,CAACI,gBAAL;AACD;AACF;AACF,WAbA;AAeD,eAAKb,eAAL,CACGc,SADH,GAEGC,IAFH,CAEQ,UAACC,QAAD,EAAc;AAClB,gBAAMC,OAAO,GAAGD,QAAQ,CAACE,OAAT,GAAmB,SAAnB,GAA+B,UAA/C;AACAC,mBAAO,CAACC,GAAR,wBAA4BH,OAA5B;AACD,WALH,WAMS,YAAM;AACXE,mBAAO,CAACC,GAAR,CAAY,iCAAZ;AACD,WARH;AASC;;AAvDwB;AAAA;AAAA,iBAyDzB,oBAAW,CACV;AA1DwB;AAAA;AAAA,iBA4DzB,4BAAmB;AAAA;;AACjB,iBAAKhB,WAAL,GAAmB,KAAnB;AACA,iBAAKN,QAAL,CAAcuB,KAAd,GAAsBN,IAAtB,CAA2B,YAAM;AAE/B,oBAAI,CAACtB,OAAL,CAAa6B,SAAb,CAAuB,SAAvB,EAAkCP,IAAlC,CAAuC,UAACQ,OAAD,EAAkB;AACvD,oBAAGA,OAAO,IAAE,IAAZ,EACA;AACE,wBAAI,CAACA,OAAL,GAAeA,OAAO,CAACC,OAAvB;AACD;AAEF,eAND;;AAQA,oBAAI,CAAC/B,OAAL,CAAa6B,SAAb,CAAuB,iBAAvB,EAA0CP,IAA1C,CAA+C,UAACU,OAAD,EAAkB;AAE/D,oBAAGA,OAAO,IAAI,IAAd,EACA;AACE,wBAAI,CAACjB,cAAL,GAAsBiB,OAAtB;;AACA,wBAAI,CAACC,kBAAL;AACD;AACF,eAPD;;AASA,oBAAI,CAACjC,OAAL,CAAa6B,SAAb,CAAuB,SAAvB,EAAkCP,IAAlC,CAAuC,UAACY,OAAD,EAAkB;AACvD,sBAAI,CAACA,OAAL,GAAeA,OAAf;AACD,eAFD;;AAIA,oBAAI,CAAClC,OAAL,CAAa6B,SAAb,CAAuB,eAAvB,EAAwCP,IAAxC,CAA6C,UAACa,MAAD,EAAiB;AAC5D,sBAAI,CAACA,MAAL,GAAcA,MAAd;AACD,eAFD;;AAIA,oBAAI,CAACnC,OAAL,CAAa6B,SAAb,CAAuB,MAAvB,EAA+BP,IAA/B,CAAoC,UAACc,IAAD,EAAe;AACjD,sBAAI,CAACA,IAAL,GAAYA,IAAZ;AACD,eAFD;;AAIA,oBAAI,CAACpC,OAAL,CAAa6B,SAAb,CAAuB,MAAvB,EAA+BP,IAA/B,CAAoC,UAACe,IAAD,EAAe;AAC/C,sBAAI,CAACA,IAAL,GAAYA,IAAZ;AACH,eAFD;;AAIA,oBAAI,CAACrC,OAAL,CAAa6B,SAAb,CAAuB,SAAvB,EAAkCP,IAAlC,CAAuC,UAACgB,IAAD,EAAe;AACpD,oBAAGA,IAAI,IAAI,IAAX,EACA;AACE,wBAAI,CAAC5B,cAAL,GAAsB4B,IAAtB;AACAZ,yBAAO,CAACC,GAAR,CAAY,MAAI,CAACjB,cAAjB;;AACA,sBAAI6B,UAAU,GAAG,MAAI,CAAC7B,cAAL,CAAoB8B,SAApB,CAA8B,UAAAC,CAAC;AAAA,2BAAIA,CAAC,CAACvB,EAAF,KAAS,MAAI,CAACA,EAAlB;AAAA,mBAA/B,CAAjB;;AACA,wBAAI,CAACwB,OAAL,GAAe,MAAI,CAAChC,cAAL,CAAoB6B,UAApB,CAAf;AACAb,yBAAO,CAACC,GAAR,CAAY,MAAI,CAACe,OAAjB;;AACA,sBAAG,MAAI,CAACA,OAAL,CAAaC,QAAb,IAAyB,IAA5B,EACA;AACE,0BAAI,CAACD,OAAL,CAAaC,QAAb,GAAwB;AAACzB,wBAAE,EAAC,SAAJ;AAAc0B,0BAAI,EAAC;AAAnB,qBAAxB;AACD;;AACDlB,yBAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBW,IAAvB;AACAZ,yBAAO,CAACC,GAAR,CAAYY,UAAZ;AACA,wBAAI,CAAC5B,WAAL,GAAmB,IAAnB;;AAEA,sBAAIE,OAAO,GAAG,OAAK,MAAI,CAACgC,MAAL,CAAY,MAAI,CAACX,OAAL,CAAaU,IAAzB,CAAnB;;AACA/B,yBAAO,IAAI,OAAK,MAAI,CAACgC,MAAL,CAAY,MAAI,CAACV,MAAL,CAAYW,KAAxB,CAAL,GAAoC,QAA/C;AACAjC,yBAAO,IAAI,oCAAX;AACAA,yBAAO,IAAI,sBAAoB,MAAI,CAAC6B,OAAL,CAAaK,WAAjC,GAA6C,IAAxD;AACAlC,yBAAO,IAAI,iBAAe,MAAI,CAAC6B,OAAL,CAAaM,SAA5B,GAAsC,IAAjD;AACAnC,yBAAO,IAAI,iBAAe,MAAI,CAACsB,MAAL,CAAYS,IAA3B,GAAgC,IAA3C;AACA/B,yBAAO,IAAI,iBAAe,MAAI,CAACuB,IAAL,CAAUQ,IAAzB,GAA8B,IAAzC;AACA/B,yBAAO,IAAI,iBAAe,MAAI,CAAC6B,OAAL,CAAaC,QAAb,CAAsBC,IAArC,GAA0C,KAArD;AACA/B,yBAAO,IAAI,oCAAX;;AAtBF,6DAwBmB,MAAI,CAAC6B,OAAL,CAAaO,YAxBhC;AAAA;;AAAA;AAwBE,wEACA;AAAA,0BADSC,IACT;AACErC,6BAAO,IAAIqC,IAAI,CAACC,OAAL,CAAaP,IAAb,GAAkB,KAA7B;AACA/B,6BAAO,IAAI,MAAI,CAACuC,SAAL,CAAeF,IAAI,CAACG,KAAL,GAAW,GAAX,GAAeH,IAAI,CAACI,GAAnC,EAAuC,MAAI,CAACpD,MAAL,CAAYqD,QAAZ,CAAqB,MAAI,CAACC,YAAL,CAAkBN,IAAI,CAACG,KAAvB,EAA6BH,IAAI,CAACI,GAAlC,CAArB,CAAvC,IAAqG,KAAhH;AACD;AA5BH;AAAA;AAAA;AAAA;AAAA;;AA8BEzC,yBAAO,IAAI,oCAAX;AACAA,yBAAO,IAAI,MAAI,CAACgC,MAAL,CAAY,uBAAZ,IAAqC,KAAhD;AACAhC,yBAAO,IAAI,MAAI,CAACgC,MAAL,CAAY,MAAI,CAACH,OAAL,CAAae,QAAzB,IAAmC,KAA9C;AACA5C,yBAAO,IAAI,uCAAX;AACAA,yBAAO,IAAI,MAAI,CAACgC,MAAL,CAAY,MAAI,CAACX,OAAL,CAAawB,eAAzB,IAA0C,KAArD;AACA7C,yBAAO,IAAI,MAAI,CAACgC,MAAL,CAAY,MAAI,CAACX,OAAL,CAAayB,eAAzB,IAA0C,KAArD;AACA9C,yBAAO,IAAI,UAAX;AAEA,wBAAI,CAACA,OAAL,GAAeA,OAAf;AAEA,sBAAIC,SAAS,GAAG,MAAI,MAAI,CAACoB,OAAL,CAAaU,IAAjB,GAAsB,WAAtC,CAxCF,CAyCE;;AACA9B,2BAAS,IAAI,oBAAkB,MAAI,CAAC4B,OAAL,CAAaK,WAA/B,GAA2C,KAA3C,GAAiD,MAAI,CAACL,OAAL,CAAaM,SAA9D,GAAwE,MAArF;AACAlC,2BAAS,IAAI,iBAAe,MAAI,CAAC4B,OAAL,CAAaC,QAAb,CAAsBC,IAArC,GAA0C,MAAvD;AACA9B,2BAAS,IAAI,qCAAb;;AA5CF,8DA8CmB,MAAI,CAAC4B,OAAL,CAAaO,YA9ChC;AAAA;;AAAA;AA8CE,2EACA;AAAA,0BADSC,KACT;AACEpC,+BAAS,IAAIoC,KAAI,CAACC,OAAL,CAAaP,IAAb,GAAkB,MAA/B;AACA9B,+BAAS,IAAIoC,KAAI,CAACG,KAAL,GAAW,GAAX,GAAeH,KAAI,CAACI,GAApB,GAAwB,GAAxB,GAA4B,MAAI,CAACpD,MAAL,CAAYqD,QAAZ,CAAqB,MAAI,CAACC,YAAL,CAAkBN,KAAI,CAACG,KAAvB,EAA6BH,KAAI,CAACI,GAAlC,CAArB,CAA5B,GAAyF,MAAtG;AACD;AAlDH;AAAA;AAAA;AAAA;AAAA;;AAoDExC,2BAAS,IAAI,qCAAb;AACAA,2BAAS,IAAI,2BAAb;AACAA,2BAAS,IAAI,MAAI,CAAC4B,OAAL,CAAae,QAAb,GAAsB,MAAnC;AACA3C,2BAAS,IAAI,qCAAb;AACAA,2BAAS,IAAI,MAAI,CAACoB,OAAL,CAAawB,eAAb,GAA6B,KAA1C;AACA5C,2BAAS,IAAI,MAAI,CAACoB,OAAL,CAAayB,eAAb,GAA6B,KAA1C,CAzDF,CA0DE;;AAEA,wBAAI,CAAC7C,SAAL,GAAiBA,SAAjB;AACD;AACF,eAhED;AAiED,aApGD;AAqGD;AAnKwB;AAAA;AAAA,iBAqKzB,sBAAauC,KAAb,EAAmBC,GAAnB,EAAsB;AAEpB,gBAAIM,QAAQ,GAAGC,UAAU,CAACR,KAAD,CAAV,GAAoBQ,UAAU,CAACP,GAAD,CAA7C;AAEA,mBAAOM,QAAP;AACD;AA1KwB;AAAA;AAAA,iBA4KzB,qCAAyB;AAEzB;AACE,gBAAIE,CAAC,GAAG,KAAKvD,eAAL,CAAqBwD,OAArB,CAA6B,KAAKjC,OAAlC,CAAR;AACAJ,mBAAO,CAACC,GAAR,CAAYmC,CAAZ;AACC,mBAAOA,CAAP;AACF;AAlLwB;AAAA;AAAA,iBAoLzB,sCAA0B;AAE1B;AACG,mBAAO,KAAKvD,eAAL,CAAqByD,UAArB,EAAP;AACF;AAxLwB;AAAA;AAAA,iBA0LzB,gBAAOC,IAAP,EAAW;AAET,gBAAIC,UAAU,GAAGC,MAAM,CAACF,IAAD,CAAvB;AACA,gBAAIG,cAAc,GAAG,EAArB;AACA,gBAAIC,UAAU,GAAG,CAACD,cAAc,GAAGF,UAAU,CAACI,MAA7B,IAAuC,CAAxD;AAEA,gBAAIC,UAAU,GAAG,EAAjB;;AACA,iBAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,IAAEC,IAAI,CAACC,KAAL,CAAWL,UAAX,CAAf,EAAsCG,CAAC,EAAvC,EACA;AACED,wBAAU,IAAG,GAAb;AACD;;AAEDA,sBAAU,IAAIL,UAAd;AAEA,mBAAOK,UAAP;AAED;AA1MwB;AAAA;AAAA,iBA4MzB,mBAAUI,QAAV,EAAmBC,SAAnB,EAA4B;AAE1B,gBAAIC,cAAc,GAAGV,MAAM,CAACQ,QAAD,CAA3B;AACA,gBAAIG,eAAe,GAAGX,MAAM,CAACS,SAAD,CAA5B;AAEA,gBAAIR,cAAc,GAAG,EAArB;AACA,gBAAIW,SAAS,GAAGF,cAAc,CAACP,MAAf,GAAwBQ,eAAe,CAACR,MAAxD;AACA,gBAAID,UAAU,GAAGD,cAAc,GAAGW,SAAlC;AAEArD,mBAAO,CAACC,GAAR,CAAY,GAAZ,EAAgBkD,cAAc,CAACP,MAA/B;AACA5C,mBAAO,CAACC,GAAR,CAAY,GAAZ,EAAgBmD,eAAe,CAACR,MAAhC;AACA5C,mBAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBoD,SAAxB;AACArD,mBAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B0C,UAA1B;AAEA,gBAAIE,UAAU,GAAGM,cAAjB;;AAEA,iBAAI,IAAIL,CAAC,GAAC,CAAV,EAAYA,CAAC,IAAEH,UAAf,EAA0BG,CAAC,EAA3B,EACA;AACED,wBAAU,IAAI,GAAd;AACD;;AAEDA,sBAAU,IAAIO,eAAd;AACA,mBAAOP,UAAP;AACD;AAnOwB;AAAA;AAAA,iBAqOzB,wBAAY;AAAA;;AAGT,iBAAKS,yBAAL,GACC/D,SADD,CACW,UAAAgE,CAAC,EAAE;AACX;AACA,oBAAI,CAAC1E,eAAL,CAAqB2E,KAArB,CAA2B,MAAI,CAACrE,OAAhC,EACCS,IADD,CACM,UAAA2D,CAAC,EAAE;AACR;AACA;AACA;AACA;AACAvD,uBAAO,CAACC,GAAR,CAAYsD,CAAZ;;AACA,sBAAI,CAACE,0BAAL;AACC,eARF,EAQG,UAAAC,GAAG,EAAE;AACL;AACA;AACA1D,uBAAO,CAACC,GAAR,CAAYyD,GAAZ;AACD,eAZF;AAaF,aAhBD,EAgBE,UAAAA,GAAG,EAAE,CAEL;AACA;AACD,aApBD;AAqBF;AA7PwB;AAAA;AAAA,iBA+PnB,wBAAe;;;;;;;;;AACL,2BAAM,KAAK3E,eAAL,CAAqB4E,MAArB,CAA4B;AAC9CC,8BAAQ,EAAE,iBADoC;AAE9CC,4BAAM,EAAE,wBAFsC;AAG9CC,4BAAM,EAAE,CACN;AACE5C,4BAAI,EAAE,cADR;AAEE6C,4BAAI,EAAE,KAFR;AAGEC,mCAAW,EAAE;AAHf,uBADM,CAHsC;AAU9CC,6BAAO,EAAE,CACP;AACE1B,4BAAI,EAAE,OADR;AAEE2B,4BAAI,EAAE,QAFR;AAGEN,gCAAQ,EAAE,WAHZ;AAIEO,+BAAO,EAAE,mBAAM;AAEbnE,iCAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AAPH,uBADO,EASJ;AACDsC,4BAAI,EAAE,OADL;AAED4B,+BAAO,EAAE,iBAACvD,IAAD,EAAe;AAEtB,8BAAIwD,SAAS,GAAG3B,MAAM,CAAC7B,IAAI,CAACyD,YAAN,CAAtB;;AACA,8BAAGD,SAAS,CAACE,MAAV,CAAiB,CAAjB,KAAuB,GAA1B,EACA;AACE,gCAAIF,SAAS,GAAGA,SAAS,CAACG,SAAV,CAAoB,CAApB,CAAhB;AACA,gCAAIH,SAAS,GAAG,OAAKA,SAArB;AACD;;AAEDI,gCAAM,CAACC,IAAP,CAAY,mBAAiBL,SAAjB,GAA2B,QAA3B,GAAoC,MAAI,CAAChF,SAArD;AACAY,iCAAO,CAACC,GAAR,CAAY,YAAZ;AAED;AAdA,uBATI;AAVqC,qBAA5B,CAAN;;;AAARyE,yB;;AAsCN,2BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;AACD;AAvSwB;AAAA;AAAA,iBAySnB,oBAAWnD,IAAX,EAAgBsB,CAAhB,EAAmB;;;;;;;;;AACT,2BAAM,KAAK/D,eAAL,CAAqB4E,MAArB,CAA4B;AAC9CC,8BAAQ,EAAE,iBADoC;AAE9CC,4BAAM,EAAE,KAAK7C,OAAL,CAAaO,YAAb,CAA0BuB,CAA1B,EAA6BrB,OAA7B,CAAqCP,IAFC;AAG9C4C,4BAAM,EAAE,CACN;AACE5C,4BAAI,EAAE,KADR;AAEE6C,4BAAI,EAAE,QAFR;AAGEvE,0BAAE,EAAE,KAHN;AAIEoF,6BAAK,EAAE,KAAK5D,OAAL,CAAaO,YAAb,CAA0BuB,CAA1B,EAA6BlB,GAJtC;AAKEoC,mCAAW,EAAE;AALf,uBADM,EAQN;AACE9C,4BAAI,EAAE,MADR;AAEE1B,0BAAE,EAAE,MAFN;AAGEoF,6BAAK,EAAE,KAAK5D,OAAL,CAAaO,YAAb,CAA0BuB,CAA1B,EAA6B+B,IAHtC;AAIEd,4BAAI,EAAE,UAJR;AAKEC,mCAAW,EAAE;AALf,uBARM,CAHsC;AAmB9C;AACAC,6BAAO,EAAE,CACP;AACE1B,4BAAI,EAAE,OADR;AAEE2B,4BAAI,EAAE,QAFR;AAGEN,gCAAQ,EAAE,QAHZ;AAIEO,+BAAO,EAAE,mBAAM;AACbnE,iCAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AANH,uBADO,EASP;AACEsC,4BAAI,EAAE,QADR;AAEE4B,+BAAO,EAAE,iBAACvD,IAAD,EAAU;AACjB,gCAAI,CAACpC,MAAL,CAAYsG,cAAZ,CAA2B,kBAA3B;;AACA,gCAAI,CAAC9D,OAAL,CAAaO,YAAb,CAA0BuB,CAA1B,EAA6BlB,GAA7B,GAAmChB,IAAI,CAACgB,GAAxC;AACA,gCAAI,CAACZ,OAAL,CAAaO,YAAb,CAA0BuB,CAA1B,EAA6B+B,IAA7B,GAAoCjE,IAAI,CAACiE,IAAzC;AAEA,8BAAIE,SAAS,GAAG,IAAI,gEAAJ,CAAgB;AAC5B,4CAAgB,kBADY;AAE5B,6CAAiB,YAAU,MAAI,CAACpE,IAAL,CAAUqE;AAFT,2BAAhB,CAAhB;AAKA,8BAAIC,OAAO,GAAG;AAACC,mCAAO,EAAEH;AAAV,2BAAd;AAEA,8BAAII,QAAQ,GAAG;AACHC,sCAAU,EAAE,MAAI,CAAC5F,EADd;AAEH6F,mCAAO,EAAE7D,IAAI,CAAChC,EAFX;AAGHoC,+BAAG,EAAEhB,IAAI,CAACgB,GAHP;AAIHiD,gCAAI,EAAEjE,IAAI,CAACiE;AAJR,2BAAf;;AAOA,gCAAI,CAACtG,IAAL,CAAU+G,IAAV,CAAe,MAAI,CAAC9G,MAAL,CAAY+G,QAAZ,GAAqB,wBAApC,EAA8DJ,QAA9D,EAAwEF,OAAxE,EACI1F,SADJ,CACc,UAACqB,IAAD,EAAe;AACxBZ,mCAAO,CAACC,GAAR,CAAYW,IAAZ;;AAEA,gCAAGA,IAAI,CAAC4E,MAAL,IAAe,CAAlB,EACA;AACE,oCAAI,CAAClH,OAAL,CAAa6B,SAAb,CAAuB,SAAvB,EAAkCP,IAAlC,CAAuC,UAACZ,cAAD,EAAyB;AAC9D,oCAAGA,cAAc,IAAI,IAArB,EACA;AACE,sCAAIyG,YAAY,GAAGzG,cAAc,CAAC8B,SAAf,CAAyB,UAAAC,CAAC;AAAA,2CAAIA,CAAC,CAACvB,EAAF,KAAS,MAAI,CAACA,EAAlB;AAAA,mCAA1B,CAAnB;AACAR,gDAAc,CAACyG,YAAD,CAAd,GAA+B7E,IAAI,CAACI,OAApC;;AAEA,wCAAI,CAAC1C,OAAL,CAAaoH,SAAb,CAAuB,SAAvB,EAAiC1G,cAAjC;;AAEA,wCAAI,CAACR,MAAL,CAAYmH,YAAZ,CAAyB,iCAAzB;;AACA,wCAAI,CAACjG,gBAAL;AACD;AACF,+BAXD;AAYD,6BAdD,MAgBA;AACEM,qCAAO,CAACC,GAAR,CAAYW,IAAZ;AACD;;AACD,kCAAI,CAACpC,MAAL,CAAYoH,cAAZ;AACA,2BAxBL,EAwBO,UAAAC,KAAK,EAAI;AACX7F,mCAAO,CAACC,GAAR,CAAY4F,KAAZ;;AACD,kCAAI,CAACrH,MAAL,CAAYoH,cAAZ;AACH,2BA3BD;;AA6BA5F,iCAAO,CAACC,GAAR,CAAY,YAAZ;AACD;AAnDH,uBATO;AApBqC,qBAA5B,CAAN;;;AAARyE,yB;;AAqFN,2BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;AACD;AAhYwB;AAAA;AAAA,iBAkYnB,oBAAWnD,IAAX,EAAgBsB,CAAhB,EAAmB;;;;;;;;;AACT,2BAAM,KAAK/D,eAAL,CAAqB4E,MAArB,CAA4B;AAC9CC,8BAAQ,EAAE,iBADoC;AAE9CC,4BAAM,EAAE,oBAFsC;AAG9C/D,6BAAO,EAAE,qBAAmB0B,IAAI,CAACC,OAAL,CAAaP,IAAhC,GAAqC,oBAHA;AAI9C+C,6BAAO,EAAE,CACP;AACE1B,4BAAI,EAAE,OADR;AAEE2B,4BAAI,EAAE,QAFR;AAGEN,gCAAQ,EAAE,QAHZ;AAIEO,+BAAO,EAAE,mBAAM;AACbnE,iCAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AANH,uBADO,EASP;AACEsC,4BAAI,EAAE,OADR;AAEE4B,+BAAO,EAAE,iBAAC2B,WAAD,EAAiB;AAExB,gCAAI,CAACtH,MAAL,CAAYsG,cAAZ,CAA2B,mBAA3B;;AAEA,8BAAIC,SAAS,GAAG,IAAI,gEAAJ,CAAgB;AAC5B,4CAAgB,kBADY;AAE5B,6CAAiB,YAAU,MAAI,CAACpE,IAAL,CAAUqE;AAFT,2BAAhB,CAAhB;AAKA,8BAAIC,OAAO,GAAG;AAACC,mCAAO,EAAEH;AAAV,2BAAd;AAEA,8BAAII,QAAQ,GAAG;AACHE,mCAAO,EAAE7D,IAAI,CAAChC;AADX,2BAAf;;AAIA,gCAAI,CAACjB,IAAL,CAAU+G,IAAV,CAAe,MAAI,CAAC9G,MAAL,CAAY+G,QAAZ,GAAqB,0BAApC,EAAgEJ,QAAhE,EAA0EF,OAA1E,EACI1F,SADJ,CACc,UAACqB,IAAD,EAAe;AACxBZ,mCAAO,CAACC,GAAR,CAAYW,IAAZ;;AAEA,gCAAGA,IAAI,CAAC4E,MAAL,IAAe,CAAlB,EACA;AACE,oCAAI,CAAClH,OAAL,CAAa6B,SAAb,CAAuB,SAAvB,EAAkCP,IAAlC,CAAuC,UAACZ,cAAD,EAAyB;AAC9D,oCAAGA,cAAc,IAAI,IAArB,EACA;AACE,sCAAI6B,UAAU,GAAG7B,cAAc,CAAC8B,SAAf,CAAyB,UAAAC,CAAC;AAAA,2CAAIA,CAAC,CAACvB,EAAF,KAAS,MAAI,CAACA,EAAlB;AAAA,mCAA1B,CAAjB;AACAR,gDAAc,CAAC6B,UAAD,CAAd,GAA6BD,IAAI,CAACI,OAAlC;;AAEA,wCAAI,CAAC1C,OAAL,CAAaoH,SAAb,CAAuB,SAAvB,EAAiC1G,cAAjC;;AACA,wCAAI,CAACR,MAAL,CAAYmH,YAAZ,CAAyB,gCAAzB;;AACA,wCAAI,CAACjG,gBAAL;AACD;AACF,+BAVD;AAWD,6BAbD,MAeA;AACEM,qCAAO,CAACC,GAAR,CAAYW,IAAZ;AACD;;AACD,kCAAI,CAACpC,MAAL,CAAYoH,cAAZ;AACA,2BAvBL,EAuBO,UAAAC,KAAK,EAAI;AACX7F,mCAAO,CAACC,GAAR,CAAY4F,KAAZ;;AACD,kCAAI,CAACrH,MAAL,CAAYoH,cAAZ;AACH,2BA1BD;;AA4BA5F,iCAAO,CAACC,GAAR,CAAY,YAAZ;AACD;AA9CH,uBATO;AAJqC,qBAA5B,CAAN;;;AAARyE,yB;;AAgEN,2BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;AACD;AApcwB;AAAA;AAAA,iBAsczB,mBAAO;AAEL,gBAAIoB,IAAI,GAAG,EAAX;AACA,gBAAI7D,QAAQ,GAAG,CAAf;AACA,gBAAI8D,QAAQ,GAAG,CAAf;;AAJK,wDAKW,KAAKhF,OAAL,CAAaO,YALxB;AAAA;;AAAA;AAKL,qEACA;AAAA,oBADQC,IACR;AACEuE,oBAAI,CAACE,IAAL,CAAU;AAACzG,oBAAE,EAACgC,IAAI,CAACC,OAAL,CAAajC,EAAjB;AAAoB0B,sBAAI,EAACM,IAAI,CAACC,OAAL,CAAaP,IAAtC;AAA2CgF,sBAAI,EAAC1E,IAAI,CAAC0E,IAArD;AAA0DvE,uBAAK,EAACH,IAAI,CAACG,KAArE;AAA2EC,qBAAG,EAACJ,IAAI,CAACI,GAApF;AAAwFiD,sBAAI,EAAErD,IAAI,CAACqD;AAAnG,iBAAV;AAEA3C,wBAAQ,IAAKV,IAAI,CAACG,KAAL,GAAaH,IAAI,CAACI,GAA/B;AACAoE,wBAAQ,IAAIxE,IAAI,CAACI,GAAjB;AACD;AAXI;AAAA;AAAA;AAAA;AAAA;;AAaL,iBAAKtD,OAAL,CAAaoH,SAAb,CAAuB,UAAvB,EAAkCK,IAAlC;AAEA,gBAAII,YAAY,GAAG;AAACC,oBAAM,EAAElE,QAAT;AAAmBN,iBAAG,EAAEoE;AAAxB,aAAnB;AACA,gBAAIK,cAAc,GAAG;AAACC,wBAAU,EAAE,KAAKtF,OAAL,CAAasF;AAA1B,aAArB;AAEA,gBAAIC,YAAY,GAAO;AAAC/G,gBAAE,EAAC,SAAJ;AAAc0B,kBAAI,EAAC;AAAnB,aAAvB;;AAEA,gBAAG,KAAKF,OAAL,CAAawF,WAAb,IAA4B,IAA/B,EACA;AACE,kBAAID,aAAY,GAAO;AAAC/G,kBAAE,EAAC,KAAKwB,OAAL,CAAawF,WAAjB;AAA6BtF,oBAAI,EAAC,KAAKF,OAAL,CAAaC,QAAb,CAAsBC;AAAxD,eAAvB;AACD;;AAED,iBAAK5C,OAAL,CAAaoH,SAAb,CAAuB,aAAvB,EAAqC;AAACN,wBAAU,EAAC,KAAK5F,EAAjB;AAAoB6B,yBAAW,EAAE,KAAKL,OAAL,CAAaK,WAA9C;AAA0DU,sBAAQ,EAAE,KAAKf,OAAL,CAAae;AAAjF,aAArC;AACA,iBAAKzD,OAAL,CAAaoH,SAAb,CAAuB,cAAvB,EAAsCS,YAAtC;AACA,iBAAK7H,OAAL,CAAaoH,SAAb,CAAuB,gBAAvB,EAAwCW,cAAxC;AACA,iBAAK/H,OAAL,CAAaoH,SAAb,CAAuB,cAAvB,EAAsCa,YAAtC;AAEA,gBAAItB,OAAO,GAA4B;AACpCwB,uBAAS,EAAE,MADyB;AAEpCC,sBAAQ,EAAE,GAF0B;AAGpCC,4BAAc,EAAE,CAHoB;AAIpCC,yBAAW,EAAE,CAJuB;AAKpCC,sBAAQ,EAAE,CAL0B;AAMpCC,0BAAY,EAAE,CANsB;AAOpCC,4BAAc,EAAE,CAPoB;AAQpCC,+BAAiB,EAAE;AARiB,aAAvC;AAWA,iBAAKlI,qBAAL,CAA2BmI,KAA3B,CAAiChC,OAAjC;AAEA,iBAAKxG,MAAL,CAAYyI,QAAZ,CAAqB,CAAC,kBAAD,CAArB;AAED;AAnfwB;AAAA;AAAA,iBAsfzB,mBAAO;AAAA;;AAEL,iBAAKhI,iBAAL,GAAyB,IAAzB;AACA,iBAAKT,MAAL,CAAYyI,QAAZ,CAAqB,CAAC,aAAD,CAArB,EAAsCtH,IAAtC,CAA2C,YAAM;AAC/C,oBAAI,CAACnB,MAAL,CAAYyI,QAAZ,CAAqB,CAAC,eAAD,CAArB;AACD,aAFD;AAGD;AA5fwB;AAAA;AAAA,iBA8fzB,4BAAgB;AAEd,gBAAIjC,OAAO,GAA4B;AACpCwB,uBAAS,EAAE,OADyB;AAEpCC,sBAAQ,EAAE,GAF0B;AAGpCC,4BAAc,EAAE,CAHoB;AAIpCC,yBAAW,EAAE,CAJuB;AAKpCC,sBAAQ,EAAE,CAL0B;AAMpCC,0BAAY,EAAE,CANsB;AAOpCC,4BAAc,EAAE,CAPoB;AAQpCC,+BAAiB,EAAE;AARiB,aAAvC;;AAWA,gBAAG,KAAK9H,iBAAL,IAA0B,KAA7B,EACA;AACE,mBAAKJ,qBAAL,CAA2BmI,KAA3B,CAAiChC,OAAjC;AACD;AACF;AA/gBwB;AAAA;AAAA,iBAihBzB,8BAAkB;AAAA;;AAEhB,gBAAIkC,YAAY,GAAG,KAAK9H,cAAL,CAAoByB,SAApB,CAA8B,UAAAsG,CAAC;AAAA,qBAAIA,CAAC,KAAK,MAAI,CAAC5H,EAAf;AAAA,aAA/B,CAAnB;;AACA,gBAAG2H,YAAY,GAAG,CAAC,CAAnB,EACA;AACE,qBAAO,IAAP;AACD;AACF;AAxhBwB;AAAA;AAAA,iBA0hBnB,uBAAc;;;;;;;AACJ,2BAAM,KAAKpI,eAAL,CAAqB4E,MAArB,CAA4B;AAC9CC,8BAAQ,EAAE,iBADoC;AAE9CC,4BAAM,EAAE,MAFsC;AAG9C/D,6BAAO,EAAE,sCAHqC;AAI9CmE,6BAAO,EAAE,CAAC,IAAD;AAJqC,qBAA5B,CAAN;;;AAARS,yB;;AAON,2BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;AACD;AAniBwB;AAAA;AAAA,iBAqiBnB,yBAAgB;;;;;;;;;AACN,2BAAM,KAAK5F,eAAL,CAAqB4E,MAArB,CAA4B;AAC9CC,8BAAQ,EAAE,iBADoC;AAE9CC,4BAAM,EAAE,mBAFsC;AAG9C/D,6BAAO,EAAE,mCAHqC;AAI9CmE,6BAAO,EAAE,CACP;AACE1B,4BAAI,EAAE,OADR;AAEE2B,4BAAI,EAAE,QAFR;AAGEN,gCAAQ,EAAE,WAHZ;AAIEO,+BAAO,EAAE,iBAACkD,IAAD,EAAU;AACjBrH,iCAAO,CAACC,GAAR,CAAY,sBAAZ;AACD;AANH,uBADO,EAQJ;AACDsC,4BAAI,EAAE,IADL;AAED4B,+BAAO,EAAE,mBAAM;AACb,gCAAI,CAACmD,MAAL;AACD;AAJA,uBARI;AAJqC,qBAA5B,CAAN;;;AAAR5C,yB;;AAqBN,2BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;AACD;AA5jBwB;AAAA;AAAA,iBA8jBzB,kBAAM;AAAA;;AAEJ,iBAAKnG,MAAL,CAAYsG,cAAZ,CAA2B,sBAA3B;AAEA,iBAAKxG,OAAL,CAAa6B,SAAb,CAAuB,SAAvB,EAAkCP,IAAlC,CAAuC,UAACgB,IAAD,EAAe;AACpD,kBAAGA,IAAI,IAAI,IAAX,EACA;AACE,oBAAI6E,YAAY,GAAG7E,IAAI,CAACE,SAAL,CAAe,UAAAC,CAAC;AAAA,yBAAIA,CAAC,CAACvB,EAAF,KAAS,OAAI,CAACA,EAAlB;AAAA,iBAAhB,CAAnB;AACAoB,oBAAI,CAAC2G,MAAL,CAAY9B,YAAZ,EAAyB,CAAzB;;AAEA,uBAAI,CAACnH,OAAL,CAAaoH,SAAb,CAAuB,SAAvB,EAAiC9E,IAAjC;;AAEA,oBAAImE,SAAS,GAAG,IAAI,gEAAJ,CAAgB;AAC5B,kCAAgB,kBADY;AAE5B,mCAAiB,YAAU,OAAI,CAACpE,IAAL,CAAUqE;AAFT,iBAAhB,CAAhB;AAKA,oBAAIC,OAAO,GAAG;AAACC,yBAAO,EAAEH;AAAV,iBAAd;AACA,oBAAII,QAAQ,GAAG;AACH3F,oBAAE,EAAE,OAAI,CAACA;AADN,iBAAf;;AAIA,uBAAI,CAACjB,IAAL,CAAU+G,IAAV,CAAe,OAAI,CAAC9G,MAAL,CAAY+G,QAAZ,GAAqB,qBAApC,EAA2DJ,QAA3D,EAAqEF,OAArE,EACI1F,SADJ,CACc,UAACqB,IAAD,EAAe;AACxBZ,yBAAO,CAACC,GAAR,CAAYW,IAAZ;;AAEA,sBAAGA,IAAI,CAAC4E,MAAL,IAAe,CAAlB,EACA;AACE,2BAAI,CAAChH,MAAL,CAAYmH,YAAZ,CAAyB/E,IAAI,CAACd,OAA9B;;AACA,2BAAI,CAACrB,MAAL,CAAYyI,QAAZ,CAAqB,CAAC,aAAD,CAArB,EAAsCtH,IAAtC,CAA2C,YAAM;AAC/C,6BAAI,CAACnB,MAAL,CAAYyI,QAAZ,CAAqB,CAAC,UAAD,CAArB;AACD,qBAFD,EAFF,CAKE;;AACD,mBAPD,MASA;AACElH,2BAAO,CAACC,GAAR,CAAYW,IAAZ;AACD;;AACD,yBAAI,CAACpC,MAAL,CAAYoH,cAAZ;AACA,iBAjBL,EAiBO,UAAAC,KAAK,EAAI;AACX7F,yBAAO,CAACC,GAAR,CAAY4F,KAAZ;;AACD,yBAAI,CAACrH,MAAL,CAAYoH,cAAZ;AACH,iBApBD;AAqBD;AACF,aAxCD;AA0CD;AA5mBwB;;AAAA;AAAA,S;;;;gBAfnB;;gBACA;;gBACA;;gBACA;;gBACA;;gBAAmB;;gBAEnB;;gBACA;;gBACA;;gBAJ8B;;;;AAW1BvH,qBAAe,6DAL3B,gEAAU;AACTmJ,gBAAQ,EAAE,kBADD;AAETC,gBAAQ,EAAR,0EAFS;;AAAA,OAAV,CAK2B,GAAfpJ,eAAe,CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXb,UAAMqJ,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,4BAA4B;AAAA;AAAA,Q;;AAA5BA,kCAA4B,6DAJxC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIwC,GAA5BH,4BAA4B,CAA5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCGAI,qBAAqB;AAAA;AAAA,Q;;AAArBA,2BAAqB,6DATjC,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,yFAJO,CADD;AAORI,oBAAY,EAAE,CAAC,kEAAD;AAPN,OAAT,CASiC,GAArBD,qBAAqB,CAArB;;;;;;;;;;;;;;;;ACnBb;AAAe;;;AAAA","file":"booking-edit-booking-edit-module-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJib29raW5nLWVkaXQucGFnZS5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { StorageService } from '../storage.service';\r\nimport { HttpClient, HttpHeaders, HttpErrorResponse} from \"@angular/common/http\";\r\nimport { GlobalService } from '../global.service';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, Platform , AlertController} from '@ionic/angular';\r\n\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\r\nimport { NativePageTransitions, NativeTransitionOptions } from '@ionic-native/native-page-transitions/ngx';\r\n\r\n@Component({\r\n  selector: 'app-booking-edit',\r\n  templateUrl: './booking-edit.page.html',\r\n  styleUrls: ['./booking-edit.page.scss'],\r\n})\r\nexport class BookingEditPage implements OnInit {\r\n\r\n  auth: any;\r\n  id: any;\r\n  source: any;\r\n  booking: any;\r\n  storageBooking: any = [];\r\n  showContent: any=false;\r\n  disabledAnimation: any = false;\r\n  content: any = '';\r\n  contentWA: any = '';\r\n  printer: any;\r\n\r\n  company: any;\r\n  outlet: any;\r\n  user : any;\r\n\r\n  bookingOffline: any = [];\r\n\r\n  constructor(\r\n    private storage: StorageService,\r\n    private http: HttpClient,\r\n    public global: GlobalService,\r\n    private router:Router,\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private route: ActivatedRoute,\r\n    private bluetoothSerial: BluetoothSerial,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    private alertController: AlertController\r\n  ) {\r\n    this.route.params.subscribe((params: any) => {\r\n     if(params['id'])\r\n     {\r\n       this.id = params['id'];\r\n       this.source = params['source'];\r\n     }\r\n     if(params['action'])\r\n     {\r\n       if(params['action'] == 'refresh')\r\n       {\r\n         this.ionViewWillEnter();\r\n       }\r\n     }\r\n   });\r\n\r\n   this.bluetoothSerial\r\n     .isEnabled()\r\n     .then((response) => {\r\n       const message = response.enabled ? 'enabled' : 'disabled';\r\n       console.log(`Bluetooth is ${message}`);\r\n     })\r\n     .catch(() => {\r\n       console.log('Error checking bluetooth status');\r\n     });\r\n   }\r\n\r\n   ngOnInit() {\r\n   }\r\n\r\n   ionViewWillEnter() {\r\n     this.showContent = false;\r\n     this.platform.ready().then(() => {\r\n\r\n       this.storage.getObject('printer').then((printer: any) => {\r\n         if(printer!=null)\r\n         {\r\n           this.printer = printer.address;\r\n         }\r\n\r\n       });\r\n\r\n       this.storage.getObject('booking_offline').then((offline: any) => {\r\n\r\n         if(offline != null)\r\n         {\r\n           this.bookingOffline = offline;\r\n           this.checkThisOrderSync();\r\n         }\r\n       });\r\n\r\n       this.storage.getObject('company').then((company: any) => {\r\n         this.company = company;\r\n       });\r\n\r\n       this.storage.getObject('outlet_active').then((outlet: any) => {\r\n         this.outlet = outlet;\r\n       });\r\n\r\n       this.storage.getObject('user').then((user: any) => {\r\n         this.user = user;\r\n       });\r\n\r\n       this.storage.getObject('auth').then((auth: any) => {\r\n           this.auth = auth;\r\n       });\r\n\r\n       this.storage.getObject('booking').then((data: any) => {\r\n         if(data != null)\r\n         {\r\n           this.storageBooking = data;\r\n           console.log(this.storageBooking);\r\n           var orderIndex = this.storageBooking.findIndex(x => x.id === this.id);\r\n           this.booking = this.storageBooking[orderIndex];\r\n           console.log(this.booking);\r\n           if(this.booking.customer == null)\r\n           {\r\n             this.booking.customer = {id:'Walk-in',name:'Walk-in'};\r\n           }\r\n           console.log(\"data all\",data);\r\n           console.log(orderIndex);\r\n           this.showContent = true;\r\n\r\n           var content = \"\\n\"+this.center(this.company.name);\r\n           content += \"\\n\"+this.center(this.outlet.phone)+\" \\n \\n\";\r\n           content += \"================================\\n\";\r\n           content += \"No book   : BOOK-\"+this.booking.book_number+\"\\n\";\r\n           content += \"Tanggal   : \"+this.booking.book_time+\"\\n\";\r\n           content += \"Outlet    : \"+this.outlet.name+\"\\n\";\r\n           content += \"Kasir     : \"+this.user.name+\"\\n\";\r\n           content += \"Pelanggan : \"+this.booking.customer.name+\" \\n\";\r\n           content += \"--------------------------------\\n\";\r\n\r\n           for (let item of this.booking.booking_item)\r\n           {\r\n             content += item.product.name+\" \\n\";\r\n             content += this.leftRight(item.price+\"x\"+item.qty,this.global.currency(this.subtotalItem(item.price,item.qty)))+\" \\n\";\r\n           }\r\n\r\n           content += \"--------------------------------\\n\";\r\n           content += this.center('No meja / referensi :')+' \\n';\r\n           content += this.center(this.booking.book_ref)+' \\n';\r\n           content += \"--------------------------------\\n \\n\";\r\n           content += this.center(this.company.format_receipt1)+\" \\n\";\r\n           content += this.center(this.company.format_receipt2)+\" \\n\";\r\n           content += \"\\n \\n \\n\";\r\n\r\n           this.content = content;\r\n\r\n           var contentWA = \"*\"+this.company.name+\"* %0a %0a\";\r\n           // contentWA += \"================================%0a\";\r\n           contentWA += \"No order *BOOK-\"+this.booking.book_number+\"* (\"+this.booking.book_time+\")%0a\";\r\n           contentWA += \"Pelanggan : \"+this.booking.customer.name+\" %0a\";\r\n           contentWA += \"--------------------------------%0a\";\r\n\r\n           for (let item of this.booking.booking_item)\r\n           {\r\n             contentWA += item.product.name+\" %0a\";\r\n             contentWA += item.price+\"x\"+item.qty+\"=\"+this.global.currency(this.subtotalItem(item.price,item.qty))+\" %0a\";\r\n           }\r\n\r\n           contentWA += \"--------------------------------%0a\";\r\n           contentWA += \"No meja / referensi : %0a\";\r\n           contentWA += this.booking.book_ref+' %0a';\r\n           contentWA += \"--------------------------------%0a\";\r\n           contentWA += this.company.format_receipt1+\"%0a\";\r\n           contentWA += this.company.format_receipt2+\"%0a\";\r\n           // contentWA += \"\\n \\n \\n\";\r\n\r\n           this.contentWA = contentWA;\r\n         }\r\n       });\r\n     });\r\n   }\r\n\r\n   subtotalItem(price,qty)\r\n   {\r\n     var subtotal = parseFloat(price) * parseFloat(qty);\r\n\r\n     return subtotal;\r\n   }\r\n\r\n   connectToBluetoothPrinter()\r\n   {\r\n   //This will connect to bluetooth printer via the mac address provided\r\n     var a = this.bluetoothSerial.connect(this.printer);\r\n     console.log(a);\r\n      return a;\r\n   }\r\n\r\n   disconnectBluetoothPrinter()\r\n   {\r\n   //This will disconnect the current bluetooth connection\r\n      return this.bluetoothSerial.disconnect();\r\n   }\r\n\r\n   center(text)\r\n   {\r\n     var textString = String(text);\r\n     var paperWidthChar = 31;\r\n     var countSpace = (paperWidthChar - textString.length) / 2;\r\n\r\n     var textResult = '';\r\n     for(var i=1;i<=Math.floor(countSpace);i++)\r\n     {\r\n       textResult +=\" \";\r\n     }\r\n\r\n     textResult += textString;\r\n\r\n     return textResult;\r\n\r\n   }\r\n\r\n   leftRight(leftText,rightText)\r\n   {\r\n     var leftTextString = String(leftText);\r\n     var rightTextString = String(rightText);\r\n\r\n     var paperWidthChar = 31;\r\n     var countChar = leftTextString.length + rightTextString.length;\r\n     var countSpace = paperWidthChar - countChar;\r\n\r\n     console.log('L',leftTextString.length);\r\n     console.log('R',rightTextString.length);\r\n     console.log('countChar',countChar);\r\n     console.log('countSpace', countSpace);\r\n\r\n     var textResult = leftTextString;\r\n\r\n     for(var i=1;i<=countSpace;i++)\r\n     {\r\n       textResult += \" \";\r\n     }\r\n\r\n     textResult += rightTextString;\r\n     return textResult;\r\n   }\r\n\r\n   printReceipt()\r\n   {\r\n\r\n      this.connectToBluetoothPrinter()\r\n      .subscribe(_=>{\r\n         //2. Connected successfully\r\n         this.bluetoothSerial.write(this.content)\r\n         .then(_=>{\r\n          //3. Print successful\r\n          //If you want to tell user print is successful,\r\n          //handle it here\r\n          //4. IMPORTANT! Disconnect bluetooth after printing\r\n          console.log(_);\r\n          this.disconnectBluetoothPrinter()\r\n          },err=>{\r\n            //If there is an error printing to bluetooth printer\r\n            //handle it here\r\n            console.log(err);\r\n          })\r\n      },err=>{\r\n\r\n        //If there is an error connecting to bluetooth printer\r\n        //handle it here\r\n      })\r\n   }\r\n\r\n   async sendWAPrompt() {\r\n     const alert = await this.alertController.create({\r\n       cssClass: 'my-custom-class',\r\n       header: 'Kirim nota ke Whatsapp',\r\n       inputs: [\r\n         {\r\n           name: 'phone_number',\r\n           type: 'tel',\r\n           placeholder: 'Nomor WA tujuan'\r\n         }\r\n       ],\r\n       buttons: [\r\n         {\r\n           text: 'Batal',\r\n           role: 'cancel',\r\n           cssClass: 'secondary',\r\n           handler: () => {\r\n\r\n             console.log('Confirm Cancel');\r\n           }\r\n         }, {\r\n           text: 'Kirim',\r\n           handler: (data: any) => {\r\n\r\n             var numberStr = String(data.phone_number);\r\n             if(numberStr.charAt(0) == '0')\r\n             {\r\n               var numberStr = numberStr.substring(0);\r\n               var numberStr = '62'+numberStr;\r\n             }\r\n\r\n             window.open(\"https://wa.me/\"+numberStr+\"?text=\"+this.contentWA);\r\n             console.log('Confirm Ok');\r\n\r\n           }\r\n         }\r\n       ]\r\n     });\r\n\r\n     await alert.present();\r\n   }\r\n\r\n   async editDetail(item,i) {\r\n     const alert = await this.alertController.create({\r\n       cssClass: 'my-custom-class',\r\n       header: this.booking.booking_item[i].product.name,\r\n       inputs: [\r\n         {\r\n           name: 'qty',\r\n           type: 'number',\r\n           id: 'qty',\r\n           value: this.booking.booking_item[i].qty,\r\n           placeholder: 'Qty'\r\n         },\r\n         {\r\n           name: 'note',\r\n           id: 'note',\r\n           value: this.booking.booking_item[i].note,\r\n           type: 'textarea',\r\n           placeholder: 'Catatan'\r\n         },\r\n       ],\r\n       // message: '<ion-button (click)=\"deleteItem('+item.id+')\"><ion-text color=\"danger\">Hapus produk ini dari pesanan</ion-text></ion-button>',\r\n       buttons: [\r\n         {\r\n           text: 'Batal',\r\n           role: 'cancel',\r\n           cssClass: 'danger',\r\n           handler: () => {\r\n             console.log('Confirm Cancel');\r\n           }\r\n         },\r\n         {\r\n           text: 'Simpan',\r\n           handler: (data) => {\r\n             this.global.loadingPresent('mengubah item...');\r\n             this.booking.booking_item[i].qty = data.qty;\r\n             this.booking.booking_item[i].note = data.note;\r\n\r\n             var reqHeader = new HttpHeaders({\r\n                 'Content-Type': 'application/json',\r\n                 'Authorization': 'Bearer '+this.auth.token\r\n              });\r\n\r\n             let options = {headers: reqHeader};\r\n\r\n             let postData = {\r\n                         booking_id: this.id,\r\n                         item_id: item.id,\r\n                         qty: data.qty,\r\n                         note: data.note\r\n                       };\r\n\r\n             this.http.post(this.global.base_url+'auth/booking/edit_item', postData, options)\r\n                .subscribe((data: any) => {\r\n                  console.log(data);\r\n\r\n                  if(data.status == 0)\r\n                  {\r\n                    this.storage.getObject('booking').then((storageBooking: any) => {\r\n                      if(storageBooking != null)\r\n                      {\r\n                        var bookingIndex = storageBooking.findIndex(x => x.id === this.id);\r\n                        storageBooking[bookingIndex] = data.booking;\r\n\r\n                        this.storage.setObject('booking',storageBooking);\r\n\r\n                        this.global.toastPresent('Item booking berhasil disimpan!');\r\n                        this.ionViewWillEnter();\r\n                      }\r\n                    });\r\n                  }\r\n                  else\r\n                  {\r\n                    console.log(data);\r\n                  }\r\n                  this.global.loadingDismiss();\r\n                 }, error => {\r\n                  console.log(error);\r\n                 this.global.loadingDismiss();\r\n             });\r\n\r\n             console.log('Confirm Ok');\r\n           }\r\n         }\r\n       ]\r\n     });\r\n\r\n     await alert.present();\r\n   }\r\n\r\n   async deleteItem(item,i) {\r\n     const alert = await this.alertController.create({\r\n       cssClass: 'my-custom-class',\r\n       header: 'Hapus item pesanan',\r\n       message: 'Yakin menghapus '+item.product.name+' dari pesanan ini?',\r\n       buttons: [\r\n         {\r\n           text: 'Batal',\r\n           role: 'cancel',\r\n           cssClass: 'danger',\r\n           handler: () => {\r\n             console.log('Confirm Cancel');\r\n           }\r\n         },\r\n         {\r\n           text: 'Hapus',\r\n           handler: (dataHandler) => {\r\n\r\n             this.global.loadingPresent('menghapus item...');\r\n\r\n             var reqHeader = new HttpHeaders({\r\n                 'Content-Type': 'application/json',\r\n                 'Authorization': 'Bearer '+this.auth.token\r\n             });\r\n\r\n             let options = {headers: reqHeader};\r\n\r\n             let postData = {\r\n                         item_id: item.id,\r\n                       };\r\n\r\n             this.http.post(this.global.base_url+'auth/booking/delete_item', postData, options)\r\n                .subscribe((data: any) => {\r\n                  console.log(data);\r\n\r\n                  if(data.status == 0)\r\n                  {\r\n                    this.storage.getObject('booking').then((storageBooking: any) => {\r\n                      if(storageBooking != null)\r\n                      {\r\n                        var orderIndex = storageBooking.findIndex(x => x.id === this.id);\r\n                        storageBooking[orderIndex] = data.booking;\r\n\r\n                        this.storage.setObject('booking',storageBooking);\r\n                        this.global.toastPresent('Item pesanan berhasil dihapus!');\r\n                        this.ionViewWillEnter();\r\n                      }\r\n                    });\r\n                  }\r\n                  else\r\n                  {\r\n                    console.log(data);\r\n                  }\r\n                  this.global.loadingDismiss();\r\n                 }, error => {\r\n                  console.log(error);\r\n                 this.global.loadingDismiss();\r\n             });\r\n\r\n             console.log('Confirm Ok');\r\n           }\r\n         }\r\n       ]\r\n     });\r\n\r\n     await alert.present();\r\n   }\r\n\r\n   process()\r\n   {\r\n     let cart = [];\r\n     let subtotal = 0;\r\n     let totalQty = 0;\r\n     for(let item of this.booking.booking_item)\r\n     {\r\n       cart.push({id:item.product.id,name:item.product.name,cost:item.cost,price:item.price,qty:item.qty,note: item.note});\r\n\r\n       subtotal += (item.price * item.qty);\r\n       totalQty += item.qty;\r\n     }\r\n\r\n     this.storage.setObject('pos_cart',cart);\r\n\r\n     var pos_subtotal = {amount: subtotal, qty: totalQty};\r\n     var pos_order_type = {order_type: this.booking.order_type};\r\n\r\n     let pos_customer:any = {id:'Walk-in',name:'Walk-in'};\r\n\r\n     if(this.booking.customer_id != null)\r\n     {\r\n       let pos_customer:any = {id:this.booking.customer_id,name:this.booking.customer.name};\r\n     }\r\n\r\n     this.storage.setObject('pos_booking',{booking_id:this.id,book_number: this.booking.book_number,book_ref: this.booking.book_ref});\r\n     this.storage.setObject('pos_subtotal',pos_subtotal);\r\n     this.storage.setObject('pos_order_type',pos_order_type);\r\n     this.storage.setObject('pos_customer',pos_customer);\r\n\r\n     let options: NativeTransitionOptions = {\r\n        direction: 'left',\r\n        duration: 300,\r\n        slowdownfactor: 0,\r\n        slidePixels: 0,\r\n        iosdelay: 0,\r\n        androiddelay: 0,\r\n        fixedPixelsTop: 0,\r\n        fixedPixelsBottom: 0\r\n       }\r\n\r\n     this.nativePageTransitions.slide(options);\r\n\r\n     this.router.navigate(['/payment-options']);\r\n\r\n   }\r\n\r\n\r\n   gotoPOS()\r\n   {\r\n     this.disabledAnimation = true;\r\n     this.router.navigate(['/tabs/blank']).then(() => {\r\n       this.router.navigate(['/tabs/tab-pos']);\r\n     });\r\n   }\r\n\r\n   ionViewWillLeave()\r\n   {\r\n     let options: NativeTransitionOptions = {\r\n        direction: 'right',\r\n        duration: 300,\r\n        slowdownfactor: 3,\r\n        slidePixels: 0,\r\n        iosdelay: 0,\r\n        androiddelay: 0,\r\n        fixedPixelsTop: 0,\r\n        fixedPixelsBottom: 0\r\n       }\r\n\r\n     if(this.disabledAnimation == false)\r\n     {\r\n       this.nativePageTransitions.slide(options);\r\n     }\r\n   }\r\n\r\n   checkThisOrderSync()\r\n   {\r\n     var offlineIndex = this.bookingOffline.findIndex(y => y === this.id);\r\n     if(offlineIndex > -1)\r\n     {\r\n       return true;\r\n     }\r\n   }\r\n\r\n   async infoOffline() {\r\n     const alert = await this.alertController.create({\r\n       cssClass: 'my-custom-class',\r\n       header: 'Info',\r\n       message: 'Transaksi ini belum tersinkronisasi!',\r\n       buttons: ['OK']\r\n     });\r\n\r\n     await alert.present();\r\n   }\r\n\r\n   async cancelConfirm() {\r\n     const alert = await this.alertController.create({\r\n       cssClass: 'my-custom-class',\r\n       header: 'Konfirmasi hapus!',\r\n       message: 'Anda yakin menghapus booking ini?',\r\n       buttons: [\r\n         {\r\n           text: 'Tidak',\r\n           role: 'cancel',\r\n           cssClass: 'secondary',\r\n           handler: (blah) => {\r\n             console.log('Confirm Cancel: blah');\r\n           }\r\n         }, {\r\n           text: 'Ya',\r\n           handler: () => {\r\n             this.cancel();\r\n           }\r\n         }\r\n       ]\r\n     });\r\n\r\n     await alert.present();\r\n   }\r\n\r\n   cancel()\r\n   {\r\n     this.global.loadingPresent('menghapus booking...');\r\n\r\n     this.storage.getObject('booking').then((data: any) => {\r\n       if(data != null)\r\n       {\r\n         var bookingIndex = data.findIndex(x => x.id === this.id);\r\n         data.splice(bookingIndex,1);\r\n\r\n         this.storage.setObject('booking',data);\r\n\r\n         var reqHeader = new HttpHeaders({\r\n             'Content-Type': 'application/json',\r\n             'Authorization': 'Bearer '+this.auth.token\r\n          });\r\n\r\n         let options = {headers: reqHeader};\r\n         let postData = {\r\n                     id: this.id\r\n                   };\r\n\r\n         this.http.post(this.global.base_url+'auth/booking/delete', postData, options)\r\n            .subscribe((data: any) => {\r\n              console.log(data);\r\n\r\n              if(data.status == 0)\r\n              {\r\n                this.global.toastPresent(data.message);\r\n                this.router.navigate(['/tabs/blank']).then(() => {\r\n                  this.router.navigate(['/booking']);\r\n                });\r\n                // this.ionViewWillEnter();\r\n              }\r\n              else\r\n              {\r\n                console.log(data);\r\n              }\r\n              this.global.loadingDismiss();\r\n             }, error => {\r\n              console.log(error);\r\n             this.global.loadingDismiss();\r\n         });\r\n       }\r\n     });\r\n\r\n   }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { BookingEditPage } from './booking-edit.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: BookingEditPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class BookingEditPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { BookingEditPageRoutingModule } from './booking-edit-routing.module';\r\n\r\nimport { BookingEditPage } from './booking-edit.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    BookingEditPageRoutingModule\r\n  ],\r\n  declarations: [BookingEditPage]\r\n})\r\nexport class BookingEditPageModule {}\r\n","export default \"<ion-header mode=\\\"ios\\\" *ngIf=\\\"showContent\\\">\\r\\n\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button fill=\\\"link\\\" [routerLink]=\\\"['/booking-detail/'+id+'/list']\\\"><ion-icon name=\\\"arrow-back-outline\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title *ngIf=\\\"showContent\\\">Ubah BOOK-{{booking.book_number}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"infoOffline()\\\" fill=\\\"link\\\" *ngIf=\\\"checkThisOrderSync()\\\">\\r\\n        <ion-icon name=\\\"alert-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n      <ion-button (click)=\\\"cancelConfirm()\\\" fill=\\\"link\\\" *ngIf=\\\"booking.status == 'Completed' || booking.status == 'Pending'\\\">\\r\\n        <ion-icon name=\\\"close-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content mode=\\\"ios\\\" class=\\\"ion-padding\\\" *ngIf=\\\"showContent\\\">\\r\\n\\r\\n  <ion-card>\\r\\n    <ion-card-content class=\\\"ion-no-padding\\\">\\r\\n      <ion-list>\\r\\n        <ion-item lines=\\\"full\\\"><ion-label class=\\\"ion-text-wrap\\\">No booking <br/><small>{{booking.book_time}}</small></ion-label><ion-note slot=\\\"end\\\" color=\\\"primary\\\">BOOK-{{booking.book_number}}</ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\"><small>No meja /referensi</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{booking.book_ref}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"full\\\"><small>Tipe pesanan</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{booking.order_type}}</small></ion-note></ion-item>\\r\\n        <ion-item lines=\\\"none\\\" [routerLink]=\\\"['/select-customer/booking-edit/'+id]\\\"><small>Pelanggan</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{booking.customer.name}}</small></ion-note></ion-item>\\r\\n        </ion-list>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-card>\\r\\n    <ion-card-content class=\\\"ion-no-padding\\\">\\r\\n      <ion-list>\\r\\n        <ion-item  button lines=\\\"full\\\" *ngFor=\\\"let item of booking.booking_item; let i = index;\\\">\\r\\n          <ion-button slot=\\\"start\\\" color=\\\"danger\\\" fill=\\\"link\\\" (click)=\\\"deleteItem(item,i)\\\"><ion-icon color=\\\"danger\\\" name=\\\"trash-outline\\\"></ion-icon></ion-button>\\r\\n          <ion-label (click)=\\\"editDetail(item,i)\\\" class=\\\"ion-text-wrap\\\">{{item.product.name}}<small><br/>{{global.currency(item.price)}} x {{item.qty}} <br/><span style=\\\"color:#666\\\">{{item.note}}</span></small></ion-label>\\r\\n          <ion-note (click)=\\\"editDetail(item,i)\\\" slot=\\\"end\\\"><small>{{global.currency(subtotalItem(item.price,item.qty))}}</small></ion-note>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n\\r\\n      <ion-button lines=\\\"none\\\" expand=\\\"block\\\" fill=\\\"link\\\" color=\\\"primary\\\" [routerLink]=\\\"['/select-product/booking-edit/'+id+'/'+booking.order_type]\\\"><ion-icon name=\\\"add-outline\\\" slot=\\\"start\\\"></ion-icon> <ion-text color=\\\"primary\\\">Tambah item</ion-text></ion-button>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n  <ion-card>\\r\\n    <ion-card-content class=\\\"ion-no-padding\\\">\\r\\n      <ion-list>\\r\\n\\r\\n        <ion-item lines=\\\"none\\\" class=\\\"item-small\\\"><small><strong>Subtotal</strong></small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{global.currency(booking.subtotal)}}</small></ion-note></ion-item>\\r\\n\\r\\n      </ion-list>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding\\\" mode=\\\"ios\\\" *ngIf=\\\"showContent\\\">\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col *ngIf=\\\"booking.payment_channel == 'QRIS Online' && booking.status == 'Pending'\\\"><ion-button expand=\\\"block\\\" fill=\\\"outline\\\" [routerLink]=\\\"['/orders-payment-qris/'+id]\\\">\\r\\n        <ion-icon name=\\\"qr-code-outline\\\" slot=\\\"start\\\" ></ion-icon>\\r\\n         Bayar QRIS\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col *ngIf=\\\"booking.status == 'Completed'\\\"><ion-button expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"sendWAPrompt()\\\">\\r\\n        <ion-icon name=\\\"arrow-redo-outline\\\" slot=\\\"start\\\" ></ion-icon>\\r\\n        Kirim Whatsapp\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n\\r\\n\\r\\n\\r\\n      <ion-col><ion-button expand=\\\"block\\\" color=\\\"primary\\\" [routerLink]=\\\"['/booking-detail/'+booking.id+'/edit']\\\">\\r\\n        <ion-icon name=\\\"checkmark-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Selesai\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-footer>\\r\\n\";"]}