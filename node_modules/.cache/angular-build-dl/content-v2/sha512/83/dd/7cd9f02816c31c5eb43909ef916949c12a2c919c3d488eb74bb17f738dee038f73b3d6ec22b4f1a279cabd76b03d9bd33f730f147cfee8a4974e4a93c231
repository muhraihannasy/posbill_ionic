{"version":3,"sources":["webpack:///src/app/orders-detail/orders-detail.page.ts","webpack:///src/app/orders-detail/orders-detail-routing.module.ts","webpack:///src/app/orders-detail/orders-detail.page.scss","webpack:///src/app/orders-detail/orders-detail.module.ts","webpack:///src/app/orders-detail/orders-detail.page.html"],"names":["OrdersDetailPage","storage","http","global","router","loadingController","platform","route","bluetoothSerial","nativePageTransitions","alertController","DatecsPrinter","base64ToGallery","title","elementType","value","storageOrder","showContent","disabledAnimation","content","contentWA","customerPhone","orderOffline","params","subscribe","id","source","isEnabled","then","response","message","enabled","console","log","ready","getObject","printer","address","printer2","offline","checkThisOrderSync","company","outlet","auth","user","data","orderIndex","findIndex","x","order","center","name","phone","order_number","order_type","order_time","customer_name","order_item","item","product","leftRight","price","qty","currency","subtotalItem","subtotal","discount","service_charge","tax","total","payment_channel","cash_collected","format_receipt1","format_receipt2","printHeader","printItem","printItemOrder","note","printFooter","parseFloat","number","a","connect","disconnect","text","textString","String","paperWidthChar","countSpace","length","textResult","i","Math","floor","leftText","rightText","leftTextString","rightTextString","countChar","encoder","result","initialize","payment_method","align","newline","line","raw","cut","resultByte","encode","connectToBluetoothPrinter","_","write","disconnectBluetoothPrinter","err","loadingPresent","printReceiptHeader","setTimeout","printReceiptItem","printReceiptFooter","loadingDismiss","toastPresent","printOrderHeader","printOrderItem","printOrderFooter","create","cssClass","header","inputs","type","placeholder","buttons","role","handler","numberStr","window","open","alert","present","navigate","options","direction","duration","slowdownfactor","slidePixels","iosdelay","androiddelay","fixedPixelsTop","fixedPixelsBottom","slide","offlineIndex","y","blah","cancel","level","status","setObject","reqHeader","Authorization","token","headers","postData","post","base_url","error","selector","template","routes","path","component","OrdersDetailPageRoutingModule","imports","forChild","exports","OrdersDetailPageModule","declarations"],"mappings":"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","file":"orders-detail-orders-detail-module-es5.js","sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport { StorageService } from \"../storage.service\";\r\nimport {\r\n  HttpClient,\r\n  HttpHeaders,\r\n  HttpErrorResponse,\r\n} from \"@angular/common/http\";\r\nimport { GlobalService } from \"../global.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { LoadingController, Platform, AlertController } from \"@ionic/angular\";\r\n\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { BluetoothSerial } from \"@ionic-native/bluetooth-serial/ngx\";\r\nimport {\r\n  NativePageTransitions,\r\n  NativeTransitionOptions,\r\n} from \"@ionic-native/native-page-transitions/ngx\";\r\nimport EscPosEncoder from \"esc-pos-encoder-ionic\";\r\n\r\nimport { DatecsprinterService } from \"../datecsprinter.service\";\r\nimport { Base64ToGallery } from \"@ionic-native/base64-to-gallery/ngx\";\r\n\r\n@Component({\r\n  selector: \"app-orders-detail\",\r\n  templateUrl: \"./orders-detail.page.html\",\r\n  styleUrls: [\"./orders-detail.page.scss\"],\r\n})\r\nexport class OrdersDetailPage implements OnInit {\r\n  title = \"app\";\r\n  elementType = \"img\";\r\n  value = \"Techiediaries\";\r\n\r\n  id: any;\r\n  auth: any;\r\n  source: any;\r\n  order: any;\r\n  storageOrder: any = [];\r\n  showContent: any = false;\r\n  disabledAnimation: any = false;\r\n  content: any = \"\";\r\n  contentWA: any = \"\";\r\n  printer: any;\r\n  printer2: any;\r\n\r\n  company: any;\r\n  outlet: any;\r\n  user: any;\r\n  customerPhone: any = \"\";\r\n\r\n  printHeader: any;\r\n  printItem: any;\r\n  printItemOrder: any;\r\n  printTotal: any;\r\n  printFooter: any;\r\n\r\n  orderOffline: any = [];\r\n\r\n  constructor(\r\n    private storage: StorageService,\r\n    private http: HttpClient,\r\n    public global: GlobalService,\r\n    private router: Router,\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private route: ActivatedRoute,\r\n    private bluetoothSerial: BluetoothSerial,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    private alertController: AlertController,\r\n    private DatecsPrinter: DatecsprinterService,\r\n    private base64ToGallery: Base64ToGallery\r\n  ) {\r\n    this.route.params.subscribe((params: any) => {\r\n      if (params[\"id\"]) {\r\n        this.id = params[\"id\"];\r\n        this.source = params[\"source\"];\r\n      }\r\n    });\r\n\r\n    this.bluetoothSerial\r\n      .isEnabled()\r\n      .then((response) => {\r\n        const message = response.enabled ? \"enabled\" : \"disabled\";\r\n        console.log(`Bluetooth is ${message}`);\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Error checking bluetooth status\");\r\n      });\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewWillEnter() {\r\n    this.showContent = false;\r\n\r\n    this.platform.ready().then(() => {\r\n      this.storage.getObject(\"printer\").then((printer: any) => {\r\n        if (printer != null) {\r\n          this.printer = printer.address;\r\n        }\r\n      });\r\n\r\n      this.storage.getObject(\"printer2\").then((printer: any) => {\r\n        if (printer != null) {\r\n          this.printer2 = printer.address;\r\n        }\r\n      });\r\n\r\n      this.storage.getObject(\"order_offline\").then((offline: any) => {\r\n        if (offline != null) {\r\n          this.orderOffline = offline;\r\n          this.checkThisOrderSync();\r\n        }\r\n      });\r\n\r\n      this.storage.getObject(\"company\").then((company: any) => {\r\n        this.company = company;\r\n      });\r\n\r\n      this.storage.getObject(\"outlet_active\").then((outlet: any) => {\r\n        this.outlet = outlet;\r\n      });\r\n\r\n      this.storage.getObject(\"auth\").then((auth: any) => {\r\n        this.auth = auth;\r\n      });\r\n\r\n      this.storage.getObject(\"user\").then((user: any) => {\r\n        this.user = user;\r\n      });\r\n\r\n      // this.storage.getObject(\"pos_customer\").then((customer: any) => {\r\n      //   this.customerPhone = customer.phone;\r\n      //   console.log(customer);\r\n      // });\r\n\r\n      this.storage.getObject(\"order\").then((data: any) => {\r\n        if (data != null) {\r\n          this.storageOrder = data;\r\n          var orderIndex = this.storageOrder.findIndex((x) => x.id === this.id);\r\n          this.order = this.storageOrder[orderIndex];\r\n          // if (this.order?.customer == null) {\r\n          //   this.order['customer'] = { id: \"Walk-in\", name: \"Walk-in\" };\r\n          // }\r\n          this.showContent = true;\r\n\r\n          // content receipt\r\n          var content = \"\\n\" + this.center(this.company.name);\r\n          content += \"\\n\" + this.center(this.outlet.phone) + \" \\n \\n\";\r\n          content += \"================================\\n\";\r\n          content += \"No order  : TRX-\" + this.order.order_number + \"\\n\";\r\n          content += \"Tipe order: \" + this.order.order_type + \"\\n\";\r\n          content += \"Tanggal   : \" + this.order.order_time + \"\\n\";\r\n          content += \"Outlet    : \" + this.outlet.name + \"\\n\";\r\n          content += \"Kasir     : \" + this.user.name + \"\\n\";\r\n          content += \"Pelanggan : \" + this.order.customer_name + \" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n\r\n          for (let item of this.order.order_item) {\r\n            content += item.product.name + \" \\n\";\r\n            content +=\r\n              this.leftRight(\r\n                item.price + \"x\" + item.qty,\r\n                this.global.currency(this.subtotalItem(item.price, item.qty))\r\n              ) + \" \\n\";\r\n          }\r\n\r\n          content += \"--------------------------------\\n\";\r\n          content +=\r\n            this.leftRight(\r\n              \"Subtotal\",\r\n              this.global.currency(this.order.subtotal)\r\n            ) + \" \\n\";\r\n          content +=\r\n            this.leftRight(\r\n              \"Diskon\",\r\n              \"(\" + this.global.currency(this.order.discount) + \")\"\r\n            ) + \" \\n\";\r\n          content +=\r\n            this.leftRight(\r\n              \"Service Charge\",\r\n              this.global.currency(this.order.service_charge)\r\n            ) + \" \\n\";\r\n          content +=\r\n            this.leftRight(\"Pajak\", this.global.currency(this.order.tax)) +\r\n            \" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n          content +=\r\n            this.leftRight(\r\n              \"Grand Total\",\r\n              this.global.currency(this.order.total)\r\n            ) + \" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n          content +=\r\n            this.leftRight(\r\n              \"Pembayaran \" + this.order.payment_channel,\r\n              this.global.currency(this.order.cash_collected)\r\n            ) + \" \\n\";\r\n          if (this.order.payment_channel == \"Cash\") {\r\n            content +=\r\n              this.leftRight(\r\n                \"Uang kembali \",\r\n                this.global.currency(\r\n                  this.order.cash_collected - this.order.total\r\n                )\r\n              ) + \" \\n\";\r\n          }\r\n\r\n          content += \"--------------------------------\\n \\n\";\r\n          content += this.center(this.company.format_receipt1) + \" \\n\";\r\n          content += this.center(this.company.format_receipt2) + \" \\n\";\r\n          content += \"\\n \\n \\n\";\r\n\r\n          this.content = content;\r\n\r\n          // content wa\r\n\r\n          var contentWA = \"*\" + this.company.name + \"* %0a %0a\";\r\n          // contentWA += \"================================%0a\";\r\n          contentWA +=\r\n            \"No order *TRX-\" +\r\n            this.order.order_number +\r\n            \"* (\" +\r\n            this.order.order_time +\r\n            \")%0a\";\r\n          contentWA += \"Tipe order: \" + this.order.order_type + \"%0a\";\r\n          contentWA += \"Pelanggan : \" + this.order.customer_name + \" %0a\";\r\n          contentWA += \"--------------------------------%0a\";\r\n\r\n          for (let item of this.order.order_item) {\r\n            contentWA += item.product.name + \" %0a\";\r\n            contentWA +=\r\n              item.price +\r\n              \"x\" +\r\n              item.qty +\r\n              \"=\" +\r\n              this.global.currency(this.subtotalItem(item.price, item.qty)) +\r\n              \" %0a\";\r\n          }\r\n\r\n          contentWA += \"--------------------------------%0a\";\r\n          contentWA +=\r\n            \"Subtotal : \" + this.global.currency(this.order.subtotal) + \" %0a\";\r\n          contentWA +=\r\n            \"Diskon : \" + this.global.currency(this.order.discount) + \" %0a\";\r\n          contentWA +=\r\n            \"Service Charge : \" +\r\n            this.global.currency(this.order.service_charge) +\r\n            \" %0a\";\r\n          contentWA +=\r\n            \"Pajak : \" + this.global.currency(this.order.tax) + \" %0a %0a\";\r\n          contentWA +=\r\n            \"*Grand Total* : \" +\r\n            this.global.currency(this.order.total) +\r\n            \" %0a\";\r\n          contentWA +=\r\n            \"Pembayaran \" +\r\n            this.order.payment_channel +\r\n            \" : \" +\r\n            this.global.currency(this.order.cash_collected) +\r\n            \" %0a\";\r\n          if (this.order.payment_channel == \"Cash\") {\r\n            contentWA +=\r\n              \"Uang kembali : \" +\r\n              this.global.currency(\r\n                this.order.cash_collected - this.order.total\r\n              ) +\r\n              \" %0a\";\r\n          }\r\n          contentWA += \"%0a %0a\";\r\n          contentWA += this.company.format_receipt1 + \"%0a\";\r\n          contentWA += this.company.format_receipt2 + \"%0a\";\r\n          // contentWA += \"\\n \\n \\n\";\r\n\r\n          this.contentWA = contentWA;\r\n\r\n          // modify content print\r\n          var printHeader = \"\\n\" + this.center(this.company.name);\r\n          printHeader += \"\\n\" + this.center(this.outlet.phone) + \" \\n \\n\";\r\n          printHeader += \"================================\\n\";\r\n          printHeader += \"No order  : TRX-\" + this.order.order_number + \"\\n\";\r\n          printHeader += \"Tipe order: \" + this.order.order_type + \"\\n\";\r\n          printHeader += \"Tanggal   : \" + this.order.order_time + \"\\n\";\r\n          printHeader += \"Outlet    : \" + this.outlet.name + \"\\n\";\r\n          printHeader += \"Kasir     : \" + this.user.name + \"\\n\";\r\n          printHeader += \"Pelanggan : \" + this.order.customer_name + \" \\n\";\r\n          printHeader += \"--------------------------------\\n\";\r\n\r\n          this.printHeader = printHeader;\r\n\r\n          var printItem = \"\";\r\n          for (let item of this.order.order_item) {\r\n            printItem += item.product.name + \" \\n\";\r\n            printItem +=\r\n              this.leftRight(\r\n                item.price + \"x\" + item.qty + \" \",\r\n                this.global.currency(this.subtotalItem(item.price, item.qty))\r\n              ) + \" \\n\";\r\n          }\r\n\r\n          this.printItem = printItem;\r\n\r\n          var printItemOrder = \"\";\r\n          for (let item of this.order.order_item) {\r\n            printItemOrder +=\r\n              this.leftRight(item.product.name + \" \", item.qty) + \" \\n\";\r\n\r\n            if (item.note != null) {\r\n              printItemOrder += item.note + \"\\n\";\r\n            }\r\n            printItemOrder += \" \\n\";\r\n          }\r\n\r\n          this.printItemOrder = printItemOrder;\r\n\r\n          var printFooter = \"\";\r\n\r\n          printFooter += \"--------------------------------\\n\";\r\n          printFooter +=\r\n            this.leftRight(\r\n              \"Subtotal\",\r\n              this.global.currency(this.order.subtotal)\r\n            ) + \" \\n\";\r\n          printFooter +=\r\n            this.leftRight(\r\n              \"Diskon\",\r\n              \"(\" + this.global.currency(this.order.discount) + \")\"\r\n            ) + \" \\n\";\r\n          printFooter +=\r\n            this.leftRight(\r\n              \"Service Charge\",\r\n              this.global.currency(this.order.service_charge)\r\n            ) + \" \\n\";\r\n          printFooter +=\r\n            this.leftRight(\"Pajak\", this.global.currency(this.order.tax)) +\r\n            \" \\n\";\r\n          printFooter += \"--------------------------------\\n\";\r\n          printFooter +=\r\n            this.leftRight(\r\n              \"Grand Total\",\r\n              this.global.currency(this.order.total)\r\n            ) + \" \\n\";\r\n          printFooter += \"--------------------------------\\n\";\r\n          printFooter +=\r\n            this.leftRight(\r\n              \"Pembayaran \" + this.order.payment_channel,\r\n              this.global.currency(this.order.cash_collected)\r\n            ) + \" \\n\";\r\n          if (this.order.payment_channel == \"Cash\") {\r\n            printFooter +=\r\n              this.leftRight(\r\n                \"Uang kembali \",\r\n                this.global.currency(\r\n                  this.order.cash_collected - this.order.total\r\n                )\r\n              ) + \" \\n\";\r\n          }\r\n\r\n          printFooter += \"--------------------------------\\n \\n\";\r\n          printFooter += this.center(this.company.format_receipt1) + \" \\n\";\r\n          printFooter += this.center(this.company.format_receipt2) + \" \\n\";\r\n          printFooter += \"\\n \\n \\n\";\r\n\r\n          this.printFooter = printFooter;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  subtotalItem(price, qty) {\r\n    var subtotal = parseFloat(price) * parseFloat(qty);\r\n\r\n    return subtotal;\r\n  }\r\n\r\n  connectToBluetoothPrinter(number) {\r\n    //This will connect to bluetooth printer via the mac address provided\r\n    if (number == 1) {\r\n      var a = this.bluetoothSerial.connect(this.printer);\r\n    } else {\r\n      var a = this.bluetoothSerial.connect(this.printer2);\r\n    }\r\n\r\n    console.log(a);\r\n    return a;\r\n  }\r\n\r\n  disconnectBluetoothPrinter() {\r\n    //This will disconnect the current bluetooth connection\r\n    return this.bluetoothSerial.disconnect();\r\n  }\r\n\r\n  center(text) {\r\n    var textString = String(text);\r\n    var paperWidthChar = 31;\r\n    var countSpace = (paperWidthChar - textString.length) / 2;\r\n\r\n    var textResult = \"\";\r\n    for (var i = 1; i <= Math.floor(countSpace); i++) {\r\n      textResult += \" \";\r\n    }\r\n\r\n    textResult += textString;\r\n\r\n    return textResult;\r\n  }\r\n\r\n  leftRight(leftText, rightText) {\r\n    var leftTextString = String(leftText);\r\n    var rightTextString = String(rightText);\r\n\r\n    var paperWidthChar = 31;\r\n    var countChar = leftTextString.length + rightTextString.length;\r\n    var countSpace = paperWidthChar - countChar;\r\n\r\n    // console.log(\"L\", leftTextString.length);\r\n    // console.log(\"R\", rightTextString.length);\r\n    // console.log(\"countChar\", countChar);\r\n    // console.log(\"countSpace\", countSpace);\r\n\r\n    var textResult = leftTextString;\r\n\r\n    for (var i = 1; i <= countSpace; i++) {\r\n      textResult += \" \";\r\n    }\r\n\r\n    textResult += rightTextString;\r\n    return textResult;\r\n  }\r\n\r\n  printReceipt() {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    if (this.order.payment_method == \"Cash\") {\r\n      result\r\n        .align(\"left\")\r\n        .newline()\r\n        .line(this.content)\r\n        .newline()\r\n        .newline()\r\n        .raw([0x1b, 0x70, 0x00])\r\n        .raw([0x1b, 0x70, 0x01])\r\n        .cut();\r\n    } else {\r\n      result\r\n        .align(\"left\")\r\n        .newline()\r\n        .line(this.content)\r\n        .newline()\r\n        .newline()\r\n        .cut();\r\n    }\r\n\r\n    const resultByte = result.encode();\r\n    // const resultQr = this.content;\r\n\r\n    this.connectToBluetoothPrinter(1).subscribe(\r\n      (_) => {\r\n        //2. Connected successfully\r\n        this.bluetoothSerial.write(resultByte).then(\r\n          (_) => {\r\n            //3. Print successful\r\n            //If you want to tell user print is successful,\r\n            //handle it here\r\n            //4. IMPORTANT! Disconnect bluetooth after printing\r\n            // console.log(_);\r\n            this.disconnectBluetoothPrinter();\r\n          },\r\n          (err) => {\r\n            //If there is an error printing to bluetooth printer\r\n            //handle it here\r\n            console.log(err);\r\n          }\r\n        );\r\n      },\r\n      (err) => {\r\n        //If there is an error connecting to bluetooth printer\r\n        //handle it here\r\n      }\r\n    );\r\n  }\r\n\r\n  printReceipt2() {\r\n    this.global.loadingPresent(\"mencetak...\");\r\n    this.printReceiptHeader();\r\n  }\r\n\r\n  printReceiptHeader() {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    result.align(\"left\").newline().line(this.printHeader);\r\n\r\n    const resultByte = result.encode();\r\n    this.connectToBluetoothPrinter(1).subscribe(\r\n      (_) => {\r\n        this.bluetoothSerial.write(resultByte).then(\r\n          (_) => {\r\n            // console.log(_);\r\n            setTimeout(() => {\r\n              this.printReceiptItem();\r\n            }, 1000);\r\n          },\r\n          (err) => {\r\n            console.log(err);\r\n          }\r\n        );\r\n      },\r\n      (err) => {}\r\n    );\r\n  }\r\n\r\n  printReceiptItem() {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    result.align(\"left\").line(this.printItem);\r\n\r\n    const resultByte = result.encode();\r\n    this.bluetoothSerial.write(resultByte).then(\r\n      (_) => {\r\n        console.log(_);\r\n        setTimeout(() => {\r\n          this.printReceiptFooter();\r\n        }, 500);\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n      }\r\n    );\r\n  }\r\n\r\n  printReceiptFooter() {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    if (this.order.payment_method == \"Cash\") {\r\n      result\r\n        .align(\"left\")\r\n        .line(this.printFooter)\r\n        .newline()\r\n        .raw([0x1b, 0x70, 0x00])\r\n        .raw([0x1b, 0x70, 0x01])\r\n        .cut();\r\n    } else {\r\n      result.align(\"left\").line(this.printFooter).newline().cut();\r\n    }\r\n\r\n    const resultByte = result.encode();\r\n    this.bluetoothSerial.write(resultByte).then(\r\n      (_) => {\r\n        console.log(_);\r\n        this.global.loadingDismiss();\r\n        this.disconnectBluetoothPrinter();\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n      }\r\n    );\r\n  }\r\n\r\n  printOrder() {\r\n    if (this.company.package == \"Lite\") {\r\n      this.global.toastPresent(\r\n        \"Fitur cetak nota order hanya tersedia dalam versi Premium\"\r\n      );\r\n      return false;\r\n    }\r\n    this.global.loadingPresent(\"mencetak...\");\r\n    this.printOrderHeader();\r\n  }\r\n\r\n  printOrderHeader() {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    result.align(\"left\").newline().line(this.printHeader);\r\n\r\n    const resultByte = result.encode();\r\n    this.connectToBluetoothPrinter(2).subscribe(\r\n      (_) => {\r\n        this.bluetoothSerial.write(resultByte).then(\r\n          (_) => {\r\n            console.log(_);\r\n            setTimeout(() => {\r\n              this.printOrderItem();\r\n            }, 1000);\r\n          },\r\n          (err) => {\r\n            console.log(err);\r\n          }\r\n        );\r\n      },\r\n      (err) => {}\r\n    );\r\n  }\r\n\r\n  printOrderItem() {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    result.align(\"left\").line(this.printItemOrder);\r\n\r\n    const resultByte = result.encode();\r\n    this.bluetoothSerial.write(resultByte).then(\r\n      (_) => {\r\n        console.log(_);\r\n        setTimeout(() => {\r\n          this.printOrderFooter();\r\n        }, 500);\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n      }\r\n    );\r\n  }\r\n\r\n  printOrderFooter() {\r\n    const encoder = new EscPosEncoder();\r\n    const result = encoder.initialize();\r\n\r\n    result.line(\"--------------------------------\\n\").newline().cut();\r\n\r\n    const resultByte = result.encode();\r\n    this.bluetoothSerial.write(resultByte).then(\r\n      (_) => {\r\n        console.log(_);\r\n        this.global.loadingDismiss();\r\n        this.disconnectBluetoothPrinter();\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n      }\r\n    );\r\n  }\r\n\r\n  async sendWAPrompt() {\r\n    if (this.company.package == \"Lite\") {\r\n      this.global.toastPresent(\r\n        \"Fitur kirim nota Whatsapp hanya tersedia dalam versi Premium\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    const alert = await this.alertController.create({\r\n      cssClass: \"my-custom-class\",\r\n      header: \"Kirim nota ke Whatsapp\",\r\n      inputs: [\r\n        {\r\n          name: \"phone_number\",\r\n          type: \"tel\",\r\n          placeholder: \"Nomor WA tujuan\",\r\n          value: this.customerPhone,\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: \"Batal\",\r\n          role: \"cancel\",\r\n          cssClass: \"secondary\",\r\n          handler: () => {\r\n            console.log(\"Confirm Cancel\");\r\n          },\r\n        },\r\n        {\r\n          text: \"Kirim\",\r\n          handler: (data: any) => {\r\n            // var numberStr = String(data.phone_number);\r\n            // if (numberStr.charAt(0) == \"0\") {\r\n            //   var numberStr = numberStr.substring(0);\r\n            //   var numberStr = \"62\" + numberStr;\r\n            // }\r\n            console.log(this.customerPhone);\r\n\r\n            const numberStr = this.customerPhone;\r\n\r\n            window.open(\r\n              \"https://wa.me/\" + numberStr + \"?text=\" + this.contentWA\r\n            );\r\n            console.log(\"Confirm Ok\");\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  gotoPOS() {\r\n    this.disabledAnimation = true;\r\n    this.router.navigate([\"/tabs/blank\"]).then(() => {\r\n      this.router.navigate([\"/tabs/tab-pos\"]);\r\n    });\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    let options: NativeTransitionOptions = {\r\n      direction: \"right\",\r\n      duration: 300,\r\n      slowdownfactor: 3,\r\n      slidePixels: 0,\r\n      iosdelay: 0,\r\n      androiddelay: 0,\r\n      fixedPixelsTop: 0,\r\n      fixedPixelsBottom: 0,\r\n    };\r\n\r\n    if (this.disabledAnimation == false) {\r\n      this.nativePageTransitions.slide(options);\r\n    }\r\n  }\r\n\r\n  checkThisOrderSync() {\r\n    var offlineIndex = this.orderOffline.findIndex((y) => y === this.id);\r\n    if (offlineIndex > -1) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  async infoOffline() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: \"my-custom-class\",\r\n      header: \"Info\",\r\n      message: \"Transaksi ini belum tersinkronisasi!\",\r\n      buttons: [\"OK\"],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async cancelConfirm() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: \"my-custom-class\",\r\n      header: \"Konfirmasi pembatalan!\",\r\n      message: \"Anda yakin membatalkan order ini?\",\r\n      buttons: [\r\n        {\r\n          text: \"Tidak\",\r\n          role: \"cancel\",\r\n          cssClass: \"secondary\",\r\n          handler: (blah) => {\r\n            console.log(\"Confirm Cancel: blah\");\r\n          },\r\n        },\r\n        {\r\n          text: \"Ya\",\r\n          handler: () => {\r\n            this.cancel();\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  cancel() {\r\n    if (this.user.level == \"Cashier\") {\r\n      this.global.toastPresent(\r\n        \"Anda tidak dapat membatalkan order, silahkan gunakan akses level Admin untuk membatalkan!\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    this.global.loadingPresent(\"membatalkan order...\");\r\n\r\n    this.storage.getObject(\"order\").then((data: any) => {\r\n      if (data != null) {\r\n        var orderIndex = data.findIndex((x) => x.id === this.id);\r\n        data[orderIndex].status = \"Canceled\";\r\n\r\n        this.storage.setObject(\"order\", data);\r\n\r\n        var reqHeader = new HttpHeaders({\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + this.auth.token,\r\n        });\r\n\r\n        let options = { headers: reqHeader };\r\n        let postData = {\r\n          id: this.id,\r\n        };\r\n\r\n        this.http\r\n          .post(this.global.base_url + \"auth/order/cancel\", postData, options)\r\n          .subscribe(\r\n            (data: any) => {\r\n              console.log(data);\r\n\r\n              if (data.status == 0) {\r\n                this.global.toastPresent(data.message);\r\n                this.router.navigate([\"/tabs/blank\"]).then(() => {\r\n                  this.router.navigate([\"/tabs/tab-order\"]);\r\n                });\r\n                // this.ionViewWillEnter();\r\n              } else {\r\n                console.log(data);\r\n              }\r\n              this.global.loadingDismiss();\r\n            },\r\n            (error) => {\r\n              console.log(error);\r\n              this.global.loadingDismiss();\r\n            }\r\n          );\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OrdersDetailPage } from './orders-detail.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OrdersDetailPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OrdersDetailPageRoutingModule {}\r\n","export default \".item-small {\\n  padding-top: 0px;\\n  padding-bottom: 0px;\\n  margin-top: 0px;\\n  margin-bottom: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXG9yZGVycy1kZXRhaWwucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtBQUNGIiwiZmlsZSI6Im9yZGVycy1kZXRhaWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLml0ZW0tc21hbGwge1xyXG4gIHBhZGRpbmctdG9wOiAwcHg7XHJcbiAgcGFkZGluZy1ib3R0b206IDBweDtcclxuICBtYXJnaW4tdG9wOiAwcHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMHB4O1xyXG59XHJcbiJdfQ== */\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { NgxQRCodeModule } from '@techiediaries/ngx-qrcode';\r\nimport { OrdersDetailPageRoutingModule } from './orders-detail-routing.module';\r\n\r\nimport { OrdersDetailPage } from './orders-detail.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OrdersDetailPageRoutingModule,\r\n    NgxQRCodeModule\r\n  ],\r\n  declarations: [OrdersDetailPage]\r\n})\r\nexport class OrdersDetailPageModule {}\r\n","export default \"<ion-item lines=\\\"none\\\" color=\\\"success\\\" *ngIf=\\\"source=='pos'\\\">\\r\\n  <ion-icon name=\\\"checkmark-circle-outline\\\" slot=\\\"end\\\"></ion-icon>\\r\\n  Transaksi berhasil ditambahkan\\r\\n</ion-item>\\r\\n\\r\\n<ion-item lines=\\\"none\\\" color=\\\"success\\\" *ngIf=\\\"source=='payment'\\\">\\r\\n  <ion-icon name=\\\"checkmark-circle-outline\\\" slot=\\\"end\\\"></ion-icon>\\r\\n  Pembayaran berhasil\\r\\n</ion-item>\\r\\n<ion-header mode=\\\"ios\\\" *ngIf=\\\"showContent\\\">\\r\\n\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button fill=\\\"link\\\" [routerLink]=\\\"['/tabs/tab-order']\\\"><ion-icon name=\\\"arrow-back-outline\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title *ngIf=\\\"showContent\\\" style=\\\"font-size:14px;line-height:14px;\\\">TRX-{{order.order_number}} <br/><span style=\\\"font-size:11px; font-weight:normal;\\\">{{order.source}}</span></ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"infoOffline()\\\" fill=\\\"link\\\" *ngIf=\\\"checkThisOrderSync()\\\">\\r\\n        <ion-icon name=\\\"alert-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n\\r\\n      <ion-button (click)=\\\"cancelConfirm()\\\" fill=\\\"link\\\" *ngIf=\\\"order.status == 'Completed' || order.status == 'Pending'\\\">\\r\\n        <ion-icon name=\\\"close-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content mode=\\\"ios\\\" class=\\\"ion-padding\\\" *ngIf=\\\"showContent\\\">\\r\\n  <ion-list>\\r\\n    <ion-item lines=\\\"full\\\"><ion-label>Status</ion-label>\\r\\n      <ion-badge *ngIf=\\\"order.status == 'Pending'\\\" slot=\\\"end\\\" color=\\\"warning\\\"><strong>Belum lunas</strong></ion-badge>\\r\\n       <ion-badge *ngIf=\\\"order.status == 'Completed'\\\" slot=\\\"end\\\" color=\\\"success\\\"><strong>Lunas</strong></ion-badge>\\r\\n       <ion-badge *ngIf=\\\"order.status == 'Canceled'\\\" slot=\\\"end\\\" color=\\\"danger\\\"><strong>Dibatalkan</strong></ion-badge>\\r\\n\\r\\n    </ion-item>\\r\\n    <ion-item lines=\\\"none\\\"><ion-label class=\\\"ion-text-wrap\\\">No order <br/><small>{{order.order_time}}</small></ion-label><ion-note slot=\\\"end\\\" color=\\\"primary\\\">TRX-{{order.order_number}}</ion-note></ion-item>\\r\\n    <ion-item lines=\\\"none\\\"><small>Tipe pesanan</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{order.order_type_label}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"full\\\"><ion-label><small>Pelanggan <br/>Telepon</small></ion-label> <ion-text slot=\\\"end\\\" color=\\\"primary\\\" style=\\\"text-align:right;\\\"><small>{{order.customer_name}} <br/><strong><a href=\\\"https://wa.me/{{order.customer_phone}}\\\">{{order.customer_phone}}</a></strong></small></ion-text></ion-item>\\r\\n    <!-- <ion-item lines=\\\"full\\\"><small></small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>Whatsapp</small></ion-note></ion-item> -->\\r\\n\\r\\n    <ion-item  *ngFor=\\\"let item of order.order_item\\\" lines=\\\"none\\\"><ion-label class=\\\"ion-text-wrap\\\">{{item.product.name}}<small><br/>{{global.currency(item.price)}} x {{item.qty}} <br/><span style=\\\"color:#666\\\">{{item.note}}</span></small></ion-label><ion-note slot=\\\"end\\\"><small>{{global.currency(subtotalItem(item.price,item.qty))}}</small></ion-note></ion-item>\\r\\n\\r\\n    <ion-item lines=\\\"none\\\" class=\\\"item-small\\\"><small><strong>Subtotal</strong></small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{global.currency(order.subtotal)}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"none\\\" class=\\\"item-small\\\" *ngIf=\\\"order.discount > 0\\\"><small>Diskon </small><ion-note slot=\\\"end\\\"><small>{{global.currency(order.discount)}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"none\\\" class=\\\"item-small\\\" *ngIf=\\\"order.service_charge > 0\\\"><small>Service charge ({{company.service_charge}}%)</small><ion-note slot=\\\"end\\\"><small>{{global.currency(order.service_charge)}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"full\\\" *ngIf=\\\"order.tax > 0\\\"><small>Pajak ({{company.tax}}%)</small><ion-note slot=\\\"end\\\"><small>{{global.currency(order.tax)}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"none\\\">Total<ion-note slot=\\\"end\\\" color=\\\"dark\\\">{{global.currency(order.total)}}</ion-note></ion-item>\\r\\n    <ion-item lines=\\\"full\\\" *ngIf=\\\"order.status == 'Completed'\\\"><small>Pembayaran ({{order.payment_channel}})</small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{global.currency(order.cash_collected)}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"full\\\" *ngIf=\\\"order.status == 'Completed'\\\"><small>Ref pembayaran </small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{order.payment_note}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"full\\\" *ngIf=\\\"order.status == 'Completed' && order.payment_method == 'Cash'\\\"><small>Uang kembali</small><ion-note slot=\\\"end\\\" color=\\\"dark\\\"><small>{{global.currency(order.cash_collected - order.total)}}</small></ion-note></ion-item>\\r\\n\\r\\n\\r\\n    <ion-item lines=\\\"none\\\"><ion-label class=\\\"ion-text-wrap\\\">Catatan order</ion-label><ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{order.note}}</small></ion-note></ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding\\\" mode=\\\"ios\\\" *ngIf=\\\"showContent\\\">\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col *ngIf=\\\"order.payment_channel == 'QRIS Online' && order.status == 'Pending'\\\"><ion-button expand=\\\"block\\\" fill=\\\"outline\\\" [routerLink]=\\\"['/orders-payment-qris/'+id]\\\">\\r\\n        <ion-icon name=\\\"qr-code-outline\\\" slot=\\\"start\\\" ></ion-icon>\\r\\n         Bayar QRIS\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col *ngIf=\\\"order.status == 'Completed'\\\"><ion-button expand=\\\"block\\\" (click)=\\\"printReceipt2()\\\">\\r\\n        <ion-icon name=\\\"print-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Cetak nota\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col *ngIf=\\\"order.status == 'Completed'\\\"><ion-button expand=\\\"block\\\" (click)=\\\"printOrder()\\\">\\r\\n        <ion-icon name=\\\"print-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Cetak order\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col *ngIf=\\\"order.status == 'Completed'\\\"><ion-button expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"sendWAPrompt()\\\">\\r\\n        <ion-icon name=\\\"arrow-redo-outline\\\" slot=\\\"start\\\" ></ion-icon>\\r\\n        Kirim Whatsapp\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n\\r\\n      <ion-col *ngIf=\\\"order.status == 'Pending'\\\"><ion-button expand=\\\"block\\\" color=\\\"secondary\\\" [routerLink]=\\\"['/orders-edit/'+order.id]\\\">\\r\\n        <ion-icon name=\\\"create-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Ubah pesanan\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col  *ngIf=\\\"order.status == 'Pending'\\\"><ion-button expand=\\\"block\\\" color=\\\"primary\\\" [routerLink]=\\\"['/orders-payment/'+order.id]\\\">\\r\\n        <ion-icon name=\\\"card-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Bayar\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col><ion-button expand=\\\"block\\\" color=\\\"light\\\" (click)=\\\"gotoPOS()\\\">\\r\\n        <ion-icon name=\\\"calculator-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Kembali ke POS\\r\\n      </ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-footer>\\r\\n\";"]}