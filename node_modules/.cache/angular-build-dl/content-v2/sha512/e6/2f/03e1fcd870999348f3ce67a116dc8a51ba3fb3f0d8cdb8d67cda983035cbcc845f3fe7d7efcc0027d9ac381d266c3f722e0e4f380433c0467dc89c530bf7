{"version":3,"sources":["webpack:///src/app/booking-detail/booking-detail.module.ts","webpack:///src/app/booking-detail/booking-detail-routing.module.ts","webpack:///src/app/booking-detail/booking-detail.page.scss","webpack:///src/app/booking-detail/booking-detail.page.ts","webpack:///src/app/booking-detail/booking-detail.page.html"],"names":["BookingDetailPageModule","imports","declarations","routes","path","component","BookingDetailPageRoutingModule","forChild","exports","BookingDetailPage","storage","http","global","router","loadingController","platform","route","bluetoothSerial","nativePageTransitions","alertController","storageBooking","showContent","disabledAnimation","content","contentWA","bookingOffline","params","subscribe","id","source","isEnabled","then","response","message","enabled","console","log","ready","getObject","printer","address","offline","checkThisOrderSync","company","outlet","user","auth","data","orderIndex","findIndex","x","booking","customer","name","center","phone","book_number","book_time","booking_item","item","product","leftRight","price","qty","currency","subtotalItem","subtotal","book_ref","format_receipt1","format_receipt2","parseFloat","a","connect","disconnect","text","textString","String","paperWidthChar","countSpace","length","textResult","i","Math","floor","leftText","rightText","leftTextString","rightTextString","countChar","connectToBluetoothPrinter","_","write","disconnectBluetoothPrinter","err","create","cssClass","header","inputs","type","placeholder","value","buttons","role","handler","numberStr","phone_number","charAt","substring","window","open","alert","present","cart","totalQty","push","cost","note","setObject","pos_subtotal","amount","pos_order_type","order_type","pos_customer","customer_id","booking_id","options","direction","duration","slowdownfactor","slidePixels","iosdelay","androiddelay","fixedPixelsTop","fixedPixelsBottom","slide","navigate","offlineIndex","y","blah","cancel","loadingPresent","bookingIndex","splice","reqHeader","Authorization","token","headers","postData","post","base_url","status","toastPresent","loadingDismiss","error","selector","template"],"mappings":"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","file":"booking-detail-booking-detail-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { BookingDetailPageRoutingModule } from './booking-detail-routing.module';\r\n\r\nimport { BookingDetailPage } from './booking-detail.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    BookingDetailPageRoutingModule\r\n  ],\r\n  declarations: [BookingDetailPage]\r\n})\r\nexport class BookingDetailPageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { BookingDetailPage } from './booking-detail.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: BookingDetailPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class BookingDetailPageRoutingModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJib29raW5nLWRldGFpbC5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from \"@angular/core\";\r\nimport { StorageService } from \"../storage.service\";\r\nimport {\r\n  HttpClient,\r\n  HttpHeaders,\r\n  HttpErrorResponse,\r\n} from \"@angular/common/http\";\r\nimport { GlobalService } from \"../global.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { LoadingController, Platform, AlertController } from \"@ionic/angular\";\r\n\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { BluetoothSerial } from \"@ionic-native/bluetooth-serial/ngx\";\r\nimport {\r\n  NativePageTransitions,\r\n  NativeTransitionOptions,\r\n} from \"@ionic-native/native-page-transitions/ngx\";\r\n\r\n@Component({\r\n  selector: \"app-booking-detail\",\r\n  templateUrl: \"./booking-detail.page.html\",\r\n  styleUrls: [\"./booking-detail.page.scss\"],\r\n})\r\nexport class BookingDetailPage implements OnInit {\r\n  auth: any;\r\n  id: any;\r\n  source: any;\r\n  booking: any;\r\n  storageBooking: any = [];\r\n  showContent: any = false;\r\n  disabledAnimation: any = false;\r\n  content: any = \"\";\r\n  contentWA: any = \"\";\r\n  printer: any;\r\n\r\n  company: any;\r\n  outlet: any;\r\n  user: any;\r\n\r\n  bookingOffline: any = [];\r\n\r\n  constructor(\r\n    private storage: StorageService,\r\n    private http: HttpClient,\r\n    public global: GlobalService,\r\n    private router: Router,\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private route: ActivatedRoute,\r\n    private bluetoothSerial: BluetoothSerial,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    private alertController: AlertController\r\n  ) {\r\n    this.route.params.subscribe((params: any) => {\r\n      if (params[\"id\"]) {\r\n        this.id = params[\"id\"];\r\n        this.source = params[\"source\"];\r\n      }\r\n    });\r\n\r\n    this.bluetoothSerial\r\n      .isEnabled()\r\n      .then((response) => {\r\n        const message = response.enabled ? \"enabled\" : \"disabled\";\r\n        console.log(`Bluetooth is ${message}`);\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Error checking bluetooth status\");\r\n      });\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewWillEnter() {\r\n    this.showContent = false;\r\n    this.platform.ready().then(() => {\r\n      this.storage.getObject(\"printer\").then((printer: any) => {\r\n        if (printer != null) {\r\n          this.printer = printer.address;\r\n        }\r\n      });\r\n\r\n      this.storage.getObject(\"booking_offline\").then((offline: any) => {\r\n        if (offline != null) {\r\n          this.bookingOffline = offline;\r\n          this.checkThisOrderSync();\r\n        }\r\n      });\r\n\r\n      this.storage.getObject(\"company\").then((company: any) => {\r\n        this.company = company;\r\n      });\r\n\r\n      this.storage.getObject(\"outlet_active\").then((outlet: any) => {\r\n        this.outlet = outlet;\r\n      });\r\n\r\n      this.storage.getObject(\"user\").then((user: any) => {\r\n        this.user = user;\r\n      });\r\n\r\n      this.storage.getObject(\"auth\").then((auth: any) => {\r\n        this.auth = auth;\r\n      });\r\n\r\n      this.storage.getObject(\"booking\").then((data: any) => {\r\n        if (data != null) {\r\n          this.storageBooking = data;\r\n          console.log(this.storageBooking);\r\n          var orderIndex = this.storageBooking.findIndex(\r\n            (x) => x.id === this.id\r\n          );\r\n          this.booking = this.storageBooking[orderIndex];\r\n          console.log(this.booking);\r\n          if (this.booking.customer == null) {\r\n            this.booking.customer = { id: \"Walk-in\", name: \"Walk-in\" };\r\n          }\r\n          console.log(\"data all\", data);\r\n          console.log(orderIndex);\r\n          this.showContent = true;\r\n\r\n          var content = \"\\n\" + this.center(this.company.name);\r\n          content += \"\\n\" + this.center(this.outlet.phone) + \" \\n \\n\";\r\n          content += \"================================\\n\";\r\n          content += \"No book   : BOOK-\" + this.booking.book_number + \"\\n\";\r\n          content += \"Tanggal   : \" + this.booking.book_time + \"\\n\";\r\n          content += \"Outlet    : \" + this.outlet.name + \"\\n\";\r\n          content += \"Kasir     : \" + this.user.name + \"\\n\";\r\n          content += \"Pelanggan : \" + this.booking.customer.name + \" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n\r\n          for (let item of this.booking.booking_item) {\r\n            content += item.product.name + \" \\n\";\r\n            content +=\r\n              this.leftRight(\r\n                item.price + \"x\" + item.qty,\r\n                this.global.currency(this.subtotalItem(item.price, item.qty))\r\n              ) + \" \\n\";\r\n          }\r\n          content += \"--------------------------------\\n\";\r\n          content +=\r\n            this.leftRight(\r\n              \"Subtotal\",\r\n              this.global.currency(this.booking.subtotal)\r\n            ) + \" \\n\";\r\n          content += \"--------------------------------\\n\";\r\n          content += this.center(\"No meja / referensi :\") + \" \\n\";\r\n          content += this.center(this.booking.book_ref) + \" \\n\";\r\n          content += \"--------------------------------\\n \\n\";\r\n          content += this.center(this.company.format_receipt1) + \" \\n\";\r\n          content += this.center(this.company.format_receipt2) + \" \\n\";\r\n          content += \"\\n \\n \\n\";\r\n\r\n          this.content = content;\r\n\r\n          var contentWA = \"*\" + this.company.name + \"* %0a %0a\";\r\n          // contentWA += \"================================%0a\";\r\n          contentWA +=\r\n            \"No booking *BOOK-\" +\r\n            this.booking.book_number +\r\n            \"* (\" +\r\n            this.booking.book_time +\r\n            \")%0a\";\r\n          contentWA += \"Pelanggan : \" + this.booking.customer.name + \" %0a\";\r\n          contentWA += \"--------------------------------%0a\";\r\n\r\n          for (let item of this.booking.booking_item) {\r\n            contentWA += item.product.name + \" %0a\";\r\n            contentWA +=\r\n              item.price +\r\n              \"x\" +\r\n              item.qty +\r\n              \"=\" +\r\n              this.global.currency(this.subtotalItem(item.price, item.qty)) +\r\n              \" %0a\";\r\n          }\r\n          contentWA += \"--------------------------------%0a\";\r\n          contentWA +=\r\n            \"Subtotal : \" +\r\n            this.global.currency(this.booking.subtotal) +\r\n            \" %0a\";\r\n          contentWA += \"--------------------------------%0a\";\r\n          contentWA += \"No meja / referensi : %0a\";\r\n          contentWA += this.booking.book_ref + \" %0a\";\r\n          contentWA += \"--------------------------------%0a\";\r\n          contentWA += this.company.format_receipt1 + \"%0a\";\r\n          contentWA += this.company.format_receipt2 + \"%0a\";\r\n          // contentWA += \"\\n \\n \\n\";\r\n\r\n          this.contentWA = contentWA;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  subtotalItem(price, qty) {\r\n    var subtotal = parseFloat(price) * parseFloat(qty);\r\n\r\n    return subtotal;\r\n  }\r\n\r\n  connectToBluetoothPrinter() {\r\n    //This will connect to bluetooth printer via the mac address provided\r\n    var a = this.bluetoothSerial.connect(this.printer);\r\n    console.log(a);\r\n    return a;\r\n  }\r\n\r\n  disconnectBluetoothPrinter() {\r\n    //This will disconnect the current bluetooth connection\r\n    return this.bluetoothSerial.disconnect();\r\n  }\r\n\r\n  center(text) {\r\n    var textString = String(text);\r\n    var paperWidthChar = 31;\r\n    var countSpace = (paperWidthChar - textString.length) / 2;\r\n\r\n    var textResult = \"\";\r\n    for (var i = 1; i <= Math.floor(countSpace); i++) {\r\n      textResult += \" \";\r\n    }\r\n\r\n    textResult += textString;\r\n\r\n    return textResult;\r\n  }\r\n\r\n  leftRight(leftText, rightText) {\r\n    var leftTextString = String(leftText);\r\n    var rightTextString = String(rightText);\r\n\r\n    var paperWidthChar = 31;\r\n    var countChar = leftTextString.length + rightTextString.length;\r\n    var countSpace = paperWidthChar - countChar;\r\n\r\n    console.log(\"L\", leftTextString.length);\r\n    console.log(\"R\", rightTextString.length);\r\n    console.log(\"countChar\", countChar);\r\n    console.log(\"countSpace\", countSpace);\r\n\r\n    var textResult = leftTextString;\r\n\r\n    for (var i = 1; i <= countSpace; i++) {\r\n      textResult += \" \";\r\n    }\r\n\r\n    textResult += rightTextString;\r\n    return textResult;\r\n  }\r\n\r\n  printReceipt() {\r\n    this.connectToBluetoothPrinter().subscribe(\r\n      (_) => {\r\n        //2. Connected successfully\r\n        this.bluetoothSerial.write(this.content).then(\r\n          (_) => {\r\n            //3. Print successful\r\n            //If you want to tell user print is successful,\r\n            //handle it here\r\n            //4. IMPORTANT! Disconnect bluetooth after printing\r\n            console.log(_);\r\n            this.disconnectBluetoothPrinter();\r\n          },\r\n          (err) => {\r\n            //If there is an error printing to bluetooth printer\r\n            //handle it here\r\n            console.log(err);\r\n          }\r\n        );\r\n      },\r\n      (err) => {\r\n        //If there is an error connecting to bluetooth printer\r\n        //handle it here\r\n      }\r\n    );\r\n  }\r\n\r\n  async sendWAPrompt() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: \"my-custom-class\",\r\n      header: \"Kirim nota ke Whatsapp\",\r\n      inputs: [\r\n        {\r\n          name: \"phone_number\",\r\n          type: \"tel\",\r\n          placeholder: \"Nomor WA tujuan\",\r\n          value: this.booking.customer.phone,\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: \"Batal\",\r\n          role: \"cancel\",\r\n          cssClass: \"secondary\",\r\n          handler: () => {\r\n            console.log(\"Confirm Cancel\");\r\n          },\r\n        },\r\n        {\r\n          text: \"Kirim\",\r\n          handler: (data: any) => {\r\n            var numberStr = String(data.phone_number);\r\n            if (numberStr.charAt(0) == \"0\") {\r\n              var numberStr = numberStr.substring(0);\r\n              var numberStr = \"62\" + numberStr;\r\n            }\r\n\r\n            window.open(\r\n              \"https://wa.me/\" + numberStr + \"?text=\" + this.contentWA\r\n            );\r\n            console.log(\"Confirm Ok\");\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  process() {\r\n    let cart = [];\r\n    let subtotal = 0;\r\n    let totalQty = 0;\r\n    for (let item of this.booking.booking_item) {\r\n      cart.push({\r\n        id: item.product.id,\r\n        name: item.product.name,\r\n        cost: item.cost,\r\n        price: item.price,\r\n        qty: item.qty,\r\n        note: item.note,\r\n      });\r\n\r\n      subtotal += item.price * item.qty;\r\n      totalQty += item.qty;\r\n    }\r\n\r\n    this.storage.setObject(\"pos_cart\", cart);\r\n\r\n    var pos_subtotal = { amount: subtotal, qty: totalQty };\r\n    var pos_order_type = { order_type: this.booking.order_type };\r\n\r\n    let pos_customer: any = { id: \"Walk-in\", name: \"Walk-in\" };\r\n\r\n    if (this.booking.customer_id != null) {\r\n      pos_customer = {\r\n        id: this.booking.customer_id,\r\n        name: this.booking.customer.name,\r\n        phone: this.booking.customer.phone,\r\n      };\r\n    }\r\n\r\n    this.storage.setObject(\"pos_booking\", {\r\n      booking_id: this.id,\r\n      book_number: this.booking.book_number,\r\n      book_ref: this.booking.book_ref,\r\n    });\r\n\r\n    this.storage.setObject(\"pos_subtotal\", pos_subtotal);\r\n    this.storage.setObject(\"pos_order_type\", pos_order_type);\r\n    this.storage.setObject(\"pos_customer\", pos_customer);\r\n\r\n    let options: NativeTransitionOptions = {\r\n      direction: \"left\",\r\n      duration: 300,\r\n      slowdownfactor: 0,\r\n      slidePixels: 0,\r\n      iosdelay: 0,\r\n      androiddelay: 0,\r\n      fixedPixelsTop: 0,\r\n      fixedPixelsBottom: 0,\r\n    };\r\n\r\n    this.nativePageTransitions.slide(options);\r\n\r\n    this.router.navigate([\"/payment-options\"]);\r\n  }\r\n\r\n  gotoPOS() {\r\n    this.disabledAnimation = true;\r\n    this.router.navigate([\"/tabs/blank\"]).then(() => {\r\n      this.router.navigate([\"/tabs/tab-pos\"]);\r\n    });\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    let options: NativeTransitionOptions = {\r\n      direction: \"right\",\r\n      duration: 300,\r\n      slowdownfactor: 3,\r\n      slidePixels: 0,\r\n      iosdelay: 0,\r\n      androiddelay: 0,\r\n      fixedPixelsTop: 0,\r\n      fixedPixelsBottom: 0,\r\n    };\r\n\r\n    if (this.disabledAnimation == false) {\r\n      this.nativePageTransitions.slide(options);\r\n    }\r\n  }\r\n\r\n  checkThisOrderSync() {\r\n    var offlineIndex = this.bookingOffline.findIndex((y) => y === this.id);\r\n    if (offlineIndex > -1) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  async infoOffline() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: \"my-custom-class\",\r\n      header: \"Info\",\r\n      message: \"Transaksi ini belum tersinkronisasi!\",\r\n      buttons: [\"OK\"],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async cancelConfirm() {\r\n    const alert = await this.alertController.create({\r\n      cssClass: \"my-custom-class\",\r\n      header: \"Konfirmasi hapus!\",\r\n      message: \"Anda yakin menghapus booking ini?\",\r\n      buttons: [\r\n        {\r\n          text: \"Tidak\",\r\n          role: \"cancel\",\r\n          cssClass: \"secondary\",\r\n          handler: (blah) => {\r\n            console.log(\"Confirm Cancel: blah\");\r\n          },\r\n        },\r\n        {\r\n          text: \"Ya\",\r\n          handler: () => {\r\n            this.cancel();\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  cancel() {\r\n    this.global.loadingPresent(\"menghapus booking...\");\r\n\r\n    this.storage.getObject(\"booking\").then((data: any) => {\r\n      if (data != null) {\r\n        var bookingIndex = data.findIndex((x) => x.id === this.id);\r\n        data.splice(bookingIndex, 1);\r\n\r\n        this.storage.setObject(\"booking\", data);\r\n\r\n        var reqHeader = new HttpHeaders({\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: \"Bearer \" + this.auth.token,\r\n        });\r\n\r\n        let options = { headers: reqHeader };\r\n        let postData = {\r\n          id: this.id,\r\n        };\r\n\r\n        this.http\r\n          .post(this.global.base_url + \"auth/booking/delete\", postData, options)\r\n          .subscribe(\r\n            (data: any) => {\r\n              console.log(data);\r\n\r\n              if (data.status == 0) {\r\n                this.global.toastPresent(data.message);\r\n                this.router.navigate([\"/tabs/blank\"]).then(() => {\r\n                  this.router.navigate([\"/booking\"]);\r\n                });\r\n                // this.ionViewWillEnter();\r\n              } else {\r\n                console.log(data);\r\n              }\r\n              this.global.loadingDismiss();\r\n            },\r\n            (error) => {\r\n              console.log(error);\r\n              this.global.loadingDismiss();\r\n            }\r\n          );\r\n      }\r\n    });\r\n  }\r\n}\r\n","export default \"<ion-item lines=\\\"none\\\" color=\\\"success\\\" *ngIf=\\\"source=='pos'\\\">\\r\\n  <ion-icon name=\\\"checkmark-circle-outline\\\" slot=\\\"end\\\"></ion-icon>\\r\\n  Pesanan berhasil dibook!\\r\\n</ion-item>\\r\\n<ion-header mode=\\\"ios\\\">\\r\\n\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button fill=\\\"link\\\" [routerLink]=\\\"['/booking']\\\"><ion-icon name=\\\"arrow-back-outline\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title *ngIf=\\\"showContent\\\">BOOK-{{booking.book_number}}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button (click)=\\\"infoOffline()\\\" fill=\\\"link\\\" *ngIf=\\\"checkThisOrderSync()\\\">\\r\\n        <ion-icon name=\\\"alert-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n      <ion-button (click)=\\\"cancelConfirm()\\\" fill=\\\"link\\\">\\r\\n        <ion-icon name=\\\"close-circle-outline\\\" color=\\\"danger\\\" ></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content mode=\\\"ios\\\" class=\\\"ion-padding\\\" *ngIf=\\\"showContent\\\">\\r\\n  <ion-list>\\r\\n\\r\\n    <ion-item lines=\\\"none\\\"><ion-label class=\\\"ion-text-wrap\\\">No book <br/><small>{{booking.book_time}}</small></ion-label><ion-note slot=\\\"end\\\" color=\\\"primary\\\">BOOK-{{booking.book_number}}</ion-note></ion-item>\\r\\n    <ion-item lines=\\\"none\\\"><small>No meja /referensi</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{booking.book_ref}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"none\\\"><small>Tipe pesanan</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{booking.order_type_label}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"full\\\"><small>Pelanggan</small> <ion-note slot=\\\"end\\\" color=\\\"primary\\\"><small>{{booking.customer.name}}</small></ion-note></ion-item>\\r\\n    <ion-item  *ngFor=\\\"let item of booking.booking_item\\\" lines=\\\"none\\\"><small>{{item.product.name}}<br/>{{global.currency(item.price)}} x {{item.qty}} <br/><span style=\\\"color:#666\\\">{{item.note}}</span></small><ion-note slot=\\\"end\\\"><small>{{global.currency(subtotalItem(item.price,item.qty))}}</small></ion-note></ion-item>\\r\\n    <ion-item lines=\\\"none\\\">Subtotal <ion-note slot=\\\"end\\\" color=\\\"primary\\\">{{global.currency(booking.subtotal)}}</ion-note></ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding\\\" mode=\\\"ios\\\">\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"6\\\"><ion-button size=\\\"small\\\"  expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"sendWAPrompt()\\\">\\r\\n        <ion-icon name=\\\"arrow-redo-outline\\\" slot=\\\"start\\\" ></ion-icon>\\r\\n          Kirim Whatsapp\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col size=\\\"6\\\"><ion-button size=\\\"small\\\" expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"printReceipt()\\\">\\r\\n        <ion-icon name=\\\"print-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n          Cetak tanda booking\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col  size=\\\"6\\\"><ion-button expand=\\\"block\\\" color=\\\"light\\\" [routerLink]=\\\"['/booking-edit/'+id]\\\">\\r\\n        <ion-icon name=\\\"create-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Ubah booking\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col  size=\\\"6\\\"><ion-button expand=\\\"block\\\" (click)=\\\"gotoPOS()\\\" color=\\\"light\\\" [routerLink]=\\\"['/tabs/tab-pos']\\\">\\r\\n        <ion-icon name=\\\"calculator-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Kembali ke POS\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n      <ion-col  size=\\\"12\\\"><ion-button expand=\\\"block\\\" (click)=\\\"process()\\\">\\r\\n        <ion-icon name=\\\"card-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        Order & Bayar\\r\\n        </ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-footer>\\r\\n\";"]}