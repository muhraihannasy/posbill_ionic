{"version":3,"sources":["webpack:///src/app/orders-payment-qris/orders-payment-qris.page.html","webpack:///src/app/orders-payment-qris/orders-payment-qris.page.ts","webpack:///src/app/orders-payment-qris/orders-payment-qris.module.ts","webpack:///src/app/orders-payment-qris/orders-payment-qris-routing.module.ts","webpack:///src/app/orders-payment-qris/orders-payment-qris.page.scss"],"names":["OrdersPaymentQrisPage","storage","http","global","router","loadingController","platform","route","bluetoothSerial","nativePageTransitions","alertController","DatecsPrinter","base64ToGallery","title","elementType","qrvalue","storageOrder","showContent","disabledAnimation","content","contentWA","orderOffline","params","subscribe","id","source","isEnabled","then","response","message","enabled","console","log","ready","getObject","printer","address","company","outlet","auth","user","getDataOrder","loadingPresent","reqHeader","token","options","headers","postData","post","base_url","data","status","order","payment_ref2","getQRIS","loadingDismiss","setTimeout","toPrint","setInterval","checkPaymentSilent","error","xendit","qr_string","imgPath","document","querySelector","base64qr","src","printQRIS","img","Image","onload","encoder","result","initialize","align","bold","line","order_number","name","newline","image","currency","total","resultByte","encode","connectToBluetoothPrinter","_","write","disconnectBluetoothPrinter","err","paid","toastPresent","orderIndex","findIndex","x","setObject","navigate","a","connect","disconnect","selector","template","OrdersPaymentQrisPageModule","imports","declarations","routes","path","component","OrdersPaymentQrisPageRoutingModule","forChild","exports"],"mappings":"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","file":"orders-payment-qris-orders-payment-qris-module-es5.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-title>QRIS Payment</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content *ngIf=\\\"showContent\\\" mode=\\\"ios\\\" class=\\\"ion-padding\\\">\\r\\n\\r\\n<div style=\\\"text-align:center;\\\">\\r\\n\\r\\n  <h3>TRX-{{order.order_number}}</h3>\\r\\n\\r\\n    <ngx-qrcode\\r\\n      [elementType]=\\\"elementType\\\"\\r\\n      [value]=\\\"qrvalue\\\"\\r\\n      cssClass=\\\"aclass\\\"\\r\\n      errorCorrectionLevel=\\\"L\\\">\\r\\n    </ngx-qrcode>\\r\\n\\r\\n    <h4>{{global.currency(order.total)}}</h4>\\r\\n</div>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer mode=\\\"ios\\\" class=\\\"ion-padding\\\">\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col><ion-button (click)=\\\"toPrint()\\\" expand=\\\"block\\\" fill=\\\"outline\\\">Cetak ulang</ion-button></ion-col>\\r\\n      <ion-col><ion-button (click)=\\\"checkPayment()\\\" expand=\\\"block\\\">Cek pembayaran</ion-button></ion-col>\\r\\n      <ion-col><ion-button [routerLink]=\\\"['/orders-detail/'+id+'/list']\\\" expand=\\\"block\\\" color=\\\"light\\\">Lihat Transaksi</ion-button></ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-footer>\\r\\n\";","import { Component, OnInit } from '@angular/core';\r\nimport { StorageService } from '../storage.service';\r\nimport { HttpClient, HttpHeaders, HttpErrorResponse} from \"@angular/common/http\";\r\nimport { GlobalService } from '../global.service';\r\nimport { Router } from '@angular/router';\r\nimport { LoadingController, Platform , AlertController} from '@ionic/angular';\r\n\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { BluetoothSerial } from '@ionic-native/bluetooth-serial/ngx';\r\nimport { NativePageTransitions, NativeTransitionOptions } from '@ionic-native/native-page-transitions/ngx';\r\nimport EscPosEncoder from 'esc-pos-encoder-ionic';\r\n\r\nimport { DatecsprinterService } from '../datecsprinter.service';\r\nimport { Base64ToGallery } from '@ionic-native/base64-to-gallery/ngx';\r\n\r\n\r\n@Component({\r\n  selector: 'app-orders-payment-qris',\r\n  templateUrl: './orders-payment-qris.page.html',\r\n  styleUrls: ['./orders-payment-qris.page.scss'],\r\n})\r\nexport class OrdersPaymentQrisPage implements OnInit {\r\n\r\n  title = 'app';\r\n  elementType = 'img';\r\n  qrvalue = '';\r\n\r\n  id: any;\r\n  auth: any;\r\n  source: any;\r\n  order: any;\r\n  storageOrder: any = [];\r\n  showContent: any=false;\r\n  disabledAnimation: any = false;\r\n  content: any = '';\r\n  contentWA: any = '';\r\n  printer: any;\r\n\r\n  company: any;\r\n  outlet: any;\r\n  user : any;\r\n\r\n  orderOffline: any = [];\r\n\r\n  constructor(\r\n    private storage: StorageService,\r\n    private http: HttpClient,\r\n    public global: GlobalService,\r\n    private router:Router,\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private route: ActivatedRoute,\r\n    private bluetoothSerial: BluetoothSerial,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    private alertController: AlertController,\r\n    private DatecsPrinter: DatecsprinterService,\r\n    private base64ToGallery: Base64ToGallery\r\n  ) {\r\n    this.route.params.subscribe((params: any) => {\r\n     if(params['id'])\r\n     {\r\n       this.id = params['id'];\r\n       this.source = params['source'];\r\n     }\r\n   });\r\n\r\n   this.bluetoothSerial\r\n     .isEnabled()\r\n     .then((response) => {\r\n       const message = response.enabled ? 'enabled' : 'disabled';\r\n       console.log(`Bluetooth is ${message}`);\r\n     })\r\n     .catch(() => {\r\n       console.log('Error checking bluetooth status');\r\n     });\r\n   }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.showContent = false;\r\n    this.platform.ready().then(() => {\r\n\r\n      this.storage.getObject('printer').then((printer: any) => {\r\n        if(printer!=null)\r\n        {\r\n          this.printer = printer.address;\r\n        }\r\n      });\r\n\r\n      this.storage.getObject('company').then((company: any) => {\r\n        this.company = company;\r\n      });\r\n\r\n      this.storage.getObject('outlet_active').then((outlet: any) => {\r\n        this.outlet = outlet;\r\n      });\r\n\r\n      this.storage.getObject('auth').then((auth) => {\r\n\r\n        this.auth = auth;\r\n\r\n        this.storage.getObject('user').then((user) => {\r\n          this.user = user;\r\n          this.getDataOrder();\r\n        });\r\n\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  getDataOrder()\r\n  {\r\n    this.global.loadingPresent('mengambil kode QRIS');\r\n    var reqHeader = new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer '+this.auth.token\r\n     });\r\n\r\n    let options = {headers: reqHeader};\r\n\r\n    let postData = {\r\n                id: this.id\r\n              };\r\n\r\n    this.http.post(this.global.base_url+'auth/order/get_detail', postData, options)\r\n       .subscribe((data: any) => {\r\n         console.log(data);\r\n\r\n         if(data.status == 0)\r\n         {\r\n           this.order = data.order;\r\n           this.qrvalue = data.order.payment_ref2;\r\n           if(data.order.payment_ref2 == null)\r\n           {\r\n             this.getQRIS();\r\n           }\r\n           else\r\n           {\r\n             this.global.loadingDismiss();\r\n             this.showContent = true;\r\n\r\n             setTimeout(() => {\r\n               this.toPrint();\r\n             }, 2000);\r\n\r\n             setInterval(() => {\r\n                this.checkPaymentSilent();\r\n             }, 2000);\r\n\r\n           }\r\n         }\r\n         else\r\n         {\r\n           console.log(data);\r\n         }\r\n        }, error => {\r\n         console.log(error);\r\n         this.global.loadingDismiss();\r\n    });\r\n  }\r\n\r\n  getQRIS()\r\n  {\r\n    this.storage.getObject('auth').then((auth:any) => {\r\n\r\n      var reqHeader = new HttpHeaders({\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer '+auth.token\r\n       });\r\n\r\n      let options = {headers: reqHeader};\r\n\r\n      let postData = {\r\n                  id: this.id\r\n                };\r\n\r\n      this.http.post(this.global.base_url+'auth/order/get_qris', postData, options)\r\n         .subscribe((data: any) => {\r\n           console.log(data);\r\n\r\n           if(data.status == 0)\r\n           {\r\n             // this.printQRIS();\r\n             this.qrvalue = data.xendit.qr_string;\r\n             setTimeout(() => {\r\n               this.toPrint();\r\n             }, 2000);\r\n\r\n             setInterval(() => {\r\n                this.checkPaymentSilent();\r\n             }, 2000);\r\n           }\r\n           else\r\n           {\r\n             console.log(data);\r\n           }\r\n\r\n           this.showContent = true;\r\n           this.global.loadingDismiss();\r\n          }, error => {\r\n           console.log(error);\r\n           this.global.loadingDismiss();\r\n      });\r\n\r\n    });\r\n  }\r\n\r\n  toPrint(): void\r\n  {\r\n    this.global.loadingPresent('mencetak kode QRIS..');\r\n    const imgPath:HTMLImageElement = document.querySelector(\".aclass img\");\r\n    let base64qr = imgPath.src;\r\n    this.printQRIS(base64qr);\r\n    console.log(base64qr);\r\n  }\r\n\r\n  printQRIS(base64qr)\r\n  {\r\n    let img = new Image();\r\n    img.src = base64qr;\r\n\r\n    img.onload = () => {\r\n\r\n      const encoder = new EscPosEncoder();\r\n      const result = encoder.initialize();\r\n\r\n      // result.qrcode(qr_string, 2, 8, 'l');\r\n      result.align('left')\r\n      .bold(true)\r\n      .line('TRX-'+this.order.order_number)\r\n      .bold(false)\r\n      .line('Scan kode QRIS untuk pembayaran ke '+this.company.name)\r\n      .newline()\r\n      .align('left')\r\n      .image(img, 256, 256, 'atkinson')\r\n      .line('Total : '+this.global.currency(this.order.total))\r\n      .newline().newline();\r\n\r\n      const resultByte = result.encode();\r\n      console.log(resultByte);\r\n      // const resultQr = this.content;\r\n\r\n      this.connectToBluetoothPrinter()\r\n        .subscribe(_=>{\r\n           //2. Connected successfully\r\n           this.bluetoothSerial.write(resultByte)\r\n           .then(_=>{\r\n            //3. Print successful\r\n            //If you want to tell user print is successful,\r\n            //handle it here\r\n            //4. IMPORTANT! Disconnect bluetooth after printing\r\n            console.log(_);\r\n            this.global.loadingDismiss();\r\n            this.disconnectBluetoothPrinter()\r\n            },err=>{\r\n              //If there is an error printing to bluetooth printer\r\n              //handle it here\r\n              this.global.loadingDismiss();\r\n              console.log(err);\r\n            })\r\n        },err=>{\r\n          this.global.loadingDismiss();\r\n          //If there is an error connecting to bluetooth printer\r\n          //handle it here\r\n        });\r\n\r\n    }\r\n\r\n  }\r\n\r\n  checkPayment()\r\n  {\r\n    this.global.loadingPresent('mengecek pembayaran...');\r\n    var reqHeader = new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer '+this.auth.token\r\n     });\r\n\r\n    let options = {headers: reqHeader};\r\n\r\n    let postData = {\r\n                id: this.id\r\n              };\r\n\r\n    this.http.post(this.global.base_url+'auth/order/get_qris_payment', postData, options)\r\n       .subscribe((data: any) => {\r\n         console.log(data);\r\n\r\n         if(data.status == 0)\r\n         {\r\n           console.log(data);\r\n           if(data.paid == 1)\r\n           {\r\n             this.global.toastPresent('Pembayaran telah diterima!');\r\n             this.storage.getObject('order').then((data: any) => {\r\n               if(data != null)\r\n               {\r\n                 var orderIndex = data.findIndex(x => x.id === this.id);\r\n                 data[orderIndex].status = 'Completed';\r\n\r\n                 this.storage.setObject('order',data);\r\n                 this.router.navigate(['/orders-detail/'+this.id+'/list']);\r\n\r\n               }\r\n             });\r\n           }\r\n           else\r\n           {\r\n             this.global.toastPresent('Belum ada pembayaran pada QRIS ini!');\r\n           }\r\n         }\r\n         else\r\n         {\r\n           console.log(data);\r\n         }\r\n         this.global.loadingDismiss();\r\n        }, error => {\r\n         console.log(error);\r\n         this.global.loadingDismiss();\r\n    });\r\n  }\r\n\r\n  checkPaymentSilent()\r\n  {\r\n    var reqHeader = new HttpHeaders({\r\n        'Content-Type': 'application/json',\r\n        'Authorization': 'Bearer '+this.auth.token\r\n     });\r\n\r\n    let options = {headers: reqHeader};\r\n\r\n    let postData = {\r\n                id: this.id\r\n              };\r\n\r\n    this.http.post(this.global.base_url+'auth/order/get_qris_payment', postData, options)\r\n       .subscribe((data: any) => {\r\n         console.log(data);\r\n\r\n         if(data.status == 0)\r\n         {\r\n           console.log(data);\r\n           if(data.paid == 1)\r\n           {\r\n             this.global.toastPresent('Pembayaran telah diterima!');\r\n             this.storage.getObject('order').then((data: any) => {\r\n               if(data != null)\r\n               {\r\n                 var orderIndex = data.findIndex(x => x.id === this.id);\r\n                 data[orderIndex].status = 'Completed';\r\n\r\n                 this.storage.setObject('order',data);\r\n                 this.router.navigate(['/orders-detail/'+this.id+'/list']);\r\n\r\n               }\r\n             });\r\n           }\r\n         }\r\n         else\r\n         {\r\n           console.log(data);\r\n         }\r\n\r\n        }, error => {\r\n         console.log(error);\r\n    });\r\n  }\r\n\r\n  connectToBluetoothPrinter()\r\n  {\r\n  //This will connect to bluetooth printer via the mac address provided\r\n    var a = this.bluetoothSerial.connect(this.printer);\r\n    console.log(a);\r\n     return a;\r\n  }\r\n\r\n  disconnectBluetoothPrinter()\r\n  {\r\n  //This will disconnect the current bluetooth connection\r\n     return this.bluetoothSerial.disconnect();\r\n  }\r\n\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { NgxQRCodeModule } from '@techiediaries/ngx-qrcode';\r\nimport { OrdersPaymentQrisPageRoutingModule } from './orders-payment-qris-routing.module';\r\n\r\nimport { OrdersPaymentQrisPage } from './orders-payment-qris.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OrdersPaymentQrisPageRoutingModule,\r\n    NgxQRCodeModule\r\n  ],\r\n  declarations: [OrdersPaymentQrisPage]\r\n})\r\nexport class OrdersPaymentQrisPageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OrdersPaymentQrisPage } from './orders-payment-qris.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OrdersPaymentQrisPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OrdersPaymentQrisPageRoutingModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJvcmRlcnMtcGF5bWVudC1xcmlzLnBhZ2Uuc2NzcyJ9 */\";"]}