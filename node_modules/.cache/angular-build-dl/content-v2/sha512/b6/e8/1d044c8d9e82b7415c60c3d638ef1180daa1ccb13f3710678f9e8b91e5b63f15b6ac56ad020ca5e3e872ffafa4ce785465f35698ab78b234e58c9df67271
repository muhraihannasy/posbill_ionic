{"version":3,"sources":["webpack:///src/app/user-add/user-add.page.html","webpack:///src/app/user-add/user-add.page.scss","webpack:///src/app/user-add/user-add.module.ts","webpack:///src/app/user-add/user-add-routing.module.ts","webpack:///src/app/user-add/user-add.page.ts"],"names":["UserAddPageModule","imports","declarations","routes","path","component","UserAddPageRoutingModule","forChild","exports","UserAddPage","storage","http","global","router","loadingController","platform","nativePageTransitions","clipboard","user","name","level","email","password","showResult","getObject","then","auth","getDataOutlet","text","copy","toastPresent","outlet","loadingPresent","reqHeader","Authorization","token","options","headers","post","base_url","subscribe","data","console","log","status","itemOutlet","thisOutlet","id","select","push","loadingDismiss","error","accessOutlet","filter","x","length","postData","dataResult","message","selector","template"],"mappings":"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","file":"user-add-user-add-module-es5.js","sourcesContent":["export default \"<ion-header mode=\\\"ios\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button fill=\\\"link\\\" [routerLink]=\\\"['/user']\\\"><ion-icon name=\\\"arrow-back-outline\\\"></ion-icon></ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Tambah pengguna</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content mode=\\\"ios\\\" class=\\\"ion-padding\\\" *ngIf=\\\"!showResult\\\">\\r\\n\\r\\n  <ion-item lines=\\\"inset\\\">\\r\\n    <ion-label><small>Level*</small></ion-label>\\r\\n    <ion-select interface=\\\"action-sheet\\\" [(ngModel)]=\\\"user.level\\\">\\r\\n      <ion-select-option value=\\\"Admin\\\">Admin</ion-select-option>\\r\\n      <ion-select-option value=\\\"Cashier\\\">Kasir</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n  <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Nama*</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"user.name\\\"></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item *ngIf=\\\"user.level == 'Admin'\\\">\\r\\n    <ion-label position=\\\"stacked\\\">Email*</ion-label>\\r\\n    <ion-input type=\\\"text\\\" [(ngModel)]=\\\"user.email\\\"></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item *ngIf=\\\"user.level == 'Admin'\\\">\\r\\n    <ion-label position=\\\"stacked\\\">Password*</ion-label>\\r\\n    <ion-input type=\\\"password\\\" [(ngModel)]=\\\"user.password\\\"></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-list>\\r\\n  <ion-list-header>Akses outlet</ion-list-header>\\r\\n  <ion-item *ngFor=\\\"let item of outlet\\\">\\r\\n    <ion-label><small>{{item.name}}</small></ion-label>\\r\\n    <ion-toggle [(ngModel)]=\\\"item.select\\\"></ion-toggle>\\r\\n  </ion-item>\\r\\n  </ion-list>\\r\\n\\r\\n</ion-content>\\r\\n\\r\\n<ion-content mode=\\\"ios\\\" class=\\\"ion-padding\\\" *ngIf=\\\"showResult\\\">\\r\\n  <ion-card>\\r\\n    <ion-card-content>\\r\\n      <ion-item>\\r\\n        <ion-label>Name</ion-label>\\r\\n        <ion-text slot=\\\"end\\\">{{dataResult.name}}</ion-text>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n        <ion-label>Username <br/><ion-button fill=\\\"outline\\\" size=\\\"small\\\" (click)=\\\"copy(dataResult.username)\\\">Copy</ion-button></ion-label>\\r\\n        <ion-text slot=\\\"end\\\">{{dataResult.username}}</ion-text>\\r\\n      </ion-item>\\r\\n      <ion-item lines=\\\"none\\\">\\r\\n        <ion-label>Password <br/><ion-button fill=\\\"outline\\\" size=\\\"small\\\" (click)=\\\"copy(dataResult.password)\\\">Copy</ion-button></ion-label>\\r\\n        <ion-text slot=\\\"end\\\">{{dataResult.password}}</ion-text>\\r\\n      </ion-item>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-padding\\\" mode=\\\"ios\\\">\\r\\n    <ion-button expand=\\\"block\\\" (click)=\\\"process()\\\" *ngIf=\\\"!showResult\\\">Simpan</ion-button>\\r\\n    <ion-button expand=\\\"block\\\" [routerLink]=\\\"['/user']\\\" *ngIf=\\\"showResult\\\">Kembali</ion-button>\\r\\n</ion-footer>\\r\\n\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1c2VyLWFkZC5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { UserAddPageRoutingModule } from './user-add-routing.module';\r\n\r\nimport { UserAddPage } from './user-add.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    UserAddPageRoutingModule\r\n  ],\r\n  declarations: [UserAddPage]\r\n})\r\nexport class UserAddPageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { UserAddPage } from './user-add.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: UserAddPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class UserAddPageRoutingModule {}\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { StorageService } from \"../storage.service\";\r\nimport {\r\n  HttpClient,\r\n  HttpHeaders,\r\n  HttpErrorResponse,\r\n} from \"@angular/common/http\";\r\nimport { GlobalService } from \"../global.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { LoadingController, Platform } from \"@ionic/angular\";\r\n\r\nimport {\r\n  NativePageTransitions,\r\n  NativeTransitionOptions,\r\n} from \"@ionic-native/native-page-transitions/ngx\";\r\nimport { Clipboard } from \"@ionic-native/clipboard/ngx\";\r\n\r\n@Component({\r\n  selector: \"app-user-add\",\r\n  templateUrl: \"./user-add.page.html\",\r\n  styleUrls: [\"./user-add.page.scss\"],\r\n})\r\nexport class UserAddPage implements OnInit {\r\n  auth: any;\r\n  user: any = { name: \"\", level: \"Admin\", email: \"\", password: \"\" };\r\n  outlet: any;\r\n\r\n  showResult: any = false;\r\n  dataResult: any;\r\n\r\n  constructor(\r\n    private storage: StorageService,\r\n    private http: HttpClient,\r\n    public global: GlobalService,\r\n    private router: Router,\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private nativePageTransitions: NativePageTransitions,\r\n    private clipboard: Clipboard\r\n  ) {\r\n    // this.platform.backButton.subscribeWithPriority(10, () => {\r\n    //   this.router.navigate(['/user']);\r\n    // });\r\n\r\n    this.user.level = \"Admin\";\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewWillEnter() {\r\n    this.storage.getObject(\"auth\").then((auth) => {\r\n      this.auth = auth;\r\n      this.getDataOutlet();\r\n    });\r\n  }\r\n\r\n  copy(text) {\r\n    this.clipboard.copy(text);\r\n    this.global.toastPresent(\"Text telah disalin!\");\r\n  }\r\n\r\n  getDataOutlet() {\r\n    this.outlet = [];\r\n\r\n    this.global.loadingPresent(\"mengambil data...\");\r\n    this.storage.getObject(\"auth\").then((auth) => {\r\n      var reqHeader = new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + this.auth.token,\r\n      });\r\n\r\n      let options = { headers: reqHeader };\r\n\r\n      this.http\r\n        .post(this.global.base_url + \"auth/outlet/list\", null, options)\r\n        .subscribe(\r\n          (data: any) => {\r\n            console.log(data);\r\n\r\n            if (data.status == 0) {\r\n              for (let itemOutlet of data.outlet) {\r\n                var thisOutlet = {\r\n                  id: itemOutlet.outlet.id,\r\n                  name: itemOutlet.outlet.name,\r\n                  select: false,\r\n                };\r\n                this.outlet.push(thisOutlet);\r\n              }\r\n\r\n              console.log(data);\r\n            } else {\r\n              console.log(data);\r\n            }\r\n            this.global.loadingDismiss();\r\n          },\r\n          (error) => {\r\n            console.log(error);\r\n          }\r\n        );\r\n    });\r\n  }\r\n\r\n  process() {\r\n    if (this.user.level == \"Admin\") {\r\n      if (\r\n        this.user.name == \"\" ||\r\n        this.user.level == \"\" ||\r\n        this.user.email == \"\" ||\r\n        this.user.password == \"\"\r\n      ) {\r\n        this.global.toastPresent(\"Mohon lengkapi form yang wajib diisi!\");\r\n        return false;\r\n      }\r\n    } else {\r\n      if (this.user.name == \"\" || this.user.level == \"\") {\r\n        this.global.toastPresent(\"Mohon lengkapi form yang wajib diisi!\");\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var accessOutlet = this.outlet.filter((x) => x.select === true);\r\n\r\n    if (accessOutlet.length < 1) {\r\n      this.global.toastPresent(\"Mohon pilih minimal 1 outlet!\");\r\n      return false;\r\n    }\r\n\r\n    console.log(this.outlet.length);\r\n\r\n    this.global.loadingPresent(\"menambah pengguna...\");\r\n    this.storage.getObject(\"auth\").then((auth) => {\r\n      var reqHeader = new HttpHeaders({\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + this.auth.token,\r\n      });\r\n\r\n      let options = { headers: reqHeader };\r\n\r\n      let postData = {\r\n        name: this.user.name,\r\n        level: this.user.level,\r\n        email: this.user.email,\r\n        password: this.user.password,\r\n        outlet: this.outlet,\r\n      };\r\n\r\n      this.http\r\n        .post(this.global.base_url + \"auth/user/add\", postData, options)\r\n        .subscribe(\r\n          (data: any) => {\r\n            console.log(data);\r\n\r\n            if (data.status == 0) {\r\n              this.dataResult = data;\r\n              this.showResult = true;\r\n\r\n              this.global.toastPresent(data.message);\r\n\r\n              // this.router.navigate(['/user-edit/'+data.id]);\r\n            } else {\r\n              console.log(data);\r\n            }\r\n            this.global.loadingDismiss();\r\n          },\r\n          (error) => {\r\n            console.log(error);\r\n          }\r\n        );\r\n    });\r\n  }\r\n}\r\n"]}