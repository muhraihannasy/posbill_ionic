{"version":3,"sources":["webpack:///node_modules/esc-pos-encoder-ionic/src/esc-pos-encoder.js","webpack:///node_modules/linewrap/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/sbcs-data-generated.js","webpack:///node_modules/canvas/browser.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/lib/index.js","webpack:///streams (ignored)","webpack:///extend-node (ignored)","webpack:///node_modules/canvas/lib/parse-font.js","webpack:///src/app/datecsprinter.service.ts","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/dbcs-codec.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/sbcs-codec.js","webpack:///node_modules/base64-js/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/internal.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/utf7.js","webpack:///node_modules/canvas-dither/src/canvas-dither.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/sbcs-data.js","webpack:///node_modules/string_decoder/lib/string_decoder.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/utf16.js","webpack:///node_modules/safe-buffer/index.js","webpack:///node_modules/ieee754/index.js","webpack:///node_modules/canvas-flatten/src/canvas-flatten.js","webpack:///node_modules/buffer/index.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/lib/bom-handling.js","webpack:///node_modules/esc-pos-encoder-ionic/node_modules/iconv-lite/encodings/dbcs-data.js","webpack:///node_modules/safer-buffer/safer.js"],"names":["iconv","linewrap","createCanvas","Dither","Flatten","EscPosEncoder","_reset","_buffer","_codepage","_state","value","encode","forEach","item","push","_queue","codepages","codepage","encodingExists","Error","encodings","hanzi","wrap","w","lineBreak","bytes","_encode","text","newline","underline","Number","italic","bold","alignments","symbology","height","symbologies","model","size","errorlevel","models","errorlevels","length","element","width","algorithm","threshold","canvas","context","getContext","drawImage","image","getImageData","flatten","bayer","floydsteinberg","atkinson","getPixel","x","y","data","Uint8Array","i","result","index","set","module","exports","presetMap","skipScheme","lineBreakScheme","whitespace","brPat","lineBreakSchemeMap","skipSchemeMap","modeMap","wsMap","rlbMap","rlbSMPat","escapePat","escapeRegExp","s","replace","start","stop","params","undefined","preset","mode","tabWidth","skip","respectLineBreaks","respectNum","preservedLineIndent","wrapLineIndent","wrapLineIndentBase","skipPat","lineBreakPat","lineBreakStr","multiLineBreakPat","preservedLinePrefix","wrapLineIndentPat","wrapLineInitPrefix","tabRepl","flags","Array","TypeError","Object","keys","join","parseInt","test","match","exec","isNaN","RegExp","global","ignoreCase","multiline","source","re","prefix","wsStrip","wsCollapse","wsLine","wsAll","tabPat","collapsePat","pPat","tPat","nonWsPat","wsPat","wrapLen","toString","lastIndex","blocks","base","mo","arr","b","res","substring","type","breaks","remaining","j","k","segments","bloc","chunks","segment","parts","split","acc","slice","concat","curLine","curLineLength","lines","bulge","cleanLine","preservedLine","wrapLinePrefix","remnant","finishOffCurLine","beforeHardBreak","str","idx","ln","rBase","search","chunk","num","chunk2","soft","hard","args","call","arguments","last","apply","shift","parseFont","assign","document","createElement","createImageData","array","ImageData","loadImage","src","options","Promise","resolve","reject","cleanup","onload","onerror","Buffer","bomHandling","defaultCharUnicode","defaultCharSingleByte","encoding","encoder","getEncoder","write","trail","end","decode","buf","skipDecodeWarning","console","error","from","decoder","getDecoder","enc","getCodec","e","toEncoding","fromEncoding","_codecDataCache","_canonicalizeEncoding","codecOptions","codec","codecDef","key","encodingName","toLowerCase","bomAware","addBOM","PrependBOM","stripBOM","StripBOM","nodeVer","process","versions","node","nodeVerArr","map","weights","styles","variants","stretches","units","string","weightRe","styleRe","variantRe","stretchRe","sizeFamilyRe","cache","defaultHeight","sizeFamily","font","weight","style","stretch","variant","parseFloat","unit","family","substr","DatecsprinterService","CanvasToBMP","toArrayBuffer","h","w4","idata","data32","Uint32Array","buffer","stride","Math","floor","pixelArraySize","fileLength","file","ArrayBuffer","view","DataView","pos","p","a","v","setU16","setU32","setUint32","setUint16","toBlob","Blob","toDataURL","bs","l","String","fromCharCode","btoa","log","window","DatecsPrinter","listBluetoothDevices","success","address","connect","disconnect","feedPaper","charset","printText","align","small","scale","hri","setBarcode","printBarcode","getStatus","getTemperature","printImage","providedIn","_dbcs","DBCSCodec","UNASSIGNED","GB18030_CODE","SEQ_START","NODE_START","UNASSIGNED_NODE","DEF_CHAR","table","mappingTable","decodeTables","decodeTableSeq","_addDecodeChunk","encodeTable","encodeTableSeq","skipEncodeChars","encodeSkipVals","val","to","_fillEncodeTable","encodeAdd","uChar","prototype","hasOwnProperty","_setEncodeChar","charCodeAt","defCharSB","gb18030","thirdByteNodeIdx","thirdByteNode","fourthByteNodeIdx","fourthByteNode","secondByteNodeIdx","secondByteNode","DBCSEncoder","DBCSDecoder","_getDecodeTrieNode","addr","curAddr","writeTable","part","code","codeTrail","len","seq","m","charCode","_getEncodeBucket","uCode","high","dbcsCode","bucket","low","_setEncodeSequence","oldVal","nodeIdx","mbCode","leadSurrogate","seqObj","newBuf","alloc","nextChar","resCode","subtable","findIdx","uChars","gbChars","prevBuf","prevBufOffset","seqStart","curByte","curSeq","ptr","uCodeLead","ret","r","mid","_sbcs","SBCSCodec","chars","asciiString","decodeBuf","encodeBuf","SBCSEncoder","SBCSDecoder","idx1","idx2","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","getLens","b64","validLen","indexOf","placeHoldersLen","lens","_byteLength","tmp","tripletToBase64","encodeChunk","uint8","output","extraBytes","maxChunkLength","len2","modules","utf8","cesu8","unicode11utf8","ucs2","utf16le","binary","base64","hex","_internal","InternalCodec","InternalEncoderBase64","InternalEncoderCesu8","InternalDecoderCesu8","InternalEncoder","InternalDecoder","StringDecoder","prevStr","completeQuads","bufIdx","contBytes","accBytes","utf7","Utf7Codec","unicode11utf7","Utf7Encoder","Utf7Decoder","nonDirectChars","bind","inBase64","base64Accum","base64Regex","base64Chars","plusChar","minusChar","andChar","lastI","b64str","canBeDecoded","utf7imap","Utf7IMAPCodec","Utf7IMAPEncoder","Utf7IMAPDecoder","base64AccumIdx","base64IMAPChars","CanvasDither","luminance","fill","thresholdMap","Uint8ClampedArray","isEncoding","_normalizeEncoding","retried","normalizeEncoding","nenc","nb","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","allocUnsafe","utf8End","utf8Text","copy","utf8CheckByte","byte","utf8CheckIncomplete","self","utf8CheckExtraBytes","total","c","n","utf16be","Utf16BECodec","Utf16BEEncoder","Utf16BEDecoder","overflowByte","buf2","utf16","Utf16Codec","Utf16Encoder","Utf16Decoder","initialBytes","initialBytesLen","detectEncoding","defaultEncoding","asciiCharsLE","asciiCharsBE","_len","min","copyProps","dst","allocUnsafeSlow","SafeBuffer","arg","encodingOrOffset","create","SlowBuffer","read","offset","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","d","NaN","Infinity","pow","rt","abs","LN2","CanvasFlatten","background","alpha","invAlpha","ieee754","INSPECT_MAX_BYTES","K_MAX_LENGTH","kMaxLength","TYPED_ARRAY_SUPPORT","typedArraySupport","__proto__","foo","defineProperty","enumerable","get","isBuffer","byteOffset","createBuffer","RangeError","Symbol","species","configurable","writable","poolSize","fromString","isView","fromArrayLike","isInstance","fromArrayBuffer","valueOf","fromObject","toPrimitive","assertSize","checked","actual","obj","numberIsNaN","isArray","_isBuffer","compare","list","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","swap16","swap32","swap64","toLocaleString","equals","inspect","max","trim","target","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","includes","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","isFinite","toJSON","_arr","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","out","toHex","subarray","checkOffset","ext","readUIntLE","noAssert","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","checkInt","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","checkIEEE754","writeFloat","littleEndian","writeFloatLE","writeFloatBE","writeDouble","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","INVALID_BASE64_RE","base64clean","byteArray","hi","lo","constructor","name","BOMChar","PrependBOMWrapper","StripBOMWrapper","pass","safer","Safer","kStringMaxLength","binding","constants","MAX_LENGTH","MAX_STRING_LENGTH"],"mappings":"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","file":"default~orders-detail-orders-detail-module~orders-edit-orders-edit-module~orders-payment-qris-orders~8c9f9247-es5.js","sourcesContent":["const iconv = require('iconv-lite');\r\nconst linewrap = require('linewrap');\r\nconst {createCanvas} = require('canvas');\r\nconst Dither = require('canvas-dither');\r\nconst Flatten = require('canvas-flatten');\r\n\r\n\r\n/**\r\n * Create a byte stream based on commands for ESC/POS printers\r\n */\r\nclass EscPosEncoder {\r\n    /**\r\n     * Create a new object\r\n     *\r\n    */\r\n    constructor() {\r\n        this._reset();\r\n    }\r\n\r\n    /**\r\n     * Reset the state of the object\r\n     *\r\n    */\r\n    _reset() {\r\n        this._buffer = [];\r\n        this._codepage = 'ascii';\r\n\r\n        this._state = {\r\n            'bold': false,\r\n            'italic': false,\r\n            'underline': false,\r\n            'hanzi': false,\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Encode a string with the current code page\r\n     *\r\n     * @param  {string}   value  String to encode\r\n     * @return {object}          Encoded string as a ArrayBuffer\r\n     *\r\n    */\r\n    _encode(value) {\r\n        return iconv.encode(value, this._codepage);\r\n    }\r\n\r\n    /**\r\n     * Add commands to the buffer\r\n     *\r\n     * @param  {array}   value  And array of numbers, arrays, buffers or Uint8Arrays to add to the buffer\r\n     *\r\n    */\r\n    _queue(value) {\r\n        value.forEach((item) => this._buffer.push(item));\r\n    }\r\n\r\n    /**\r\n     * Initialize the printer\r\n     *\r\n     * @return {object}          Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    initialize() {\r\n        this._queue([\r\n            0x1b, 0x40,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Change the code page\r\n     *\r\n     * @param  {string}   value  The codepage that we set the printer to\r\n     * @return {object}          Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    codepage(value) {\r\n        const codepages = {\r\n            'cp437': [0x00, false],\r\n            'cp737': [0x40, false],\r\n            'cp850': [0x02, false],\r\n            'cp775': [0x5f, false],\r\n            'cp852': [0x12, false],\r\n            'cp855': [0x3c, false],\r\n            'cp857': [0x3d, false],\r\n            'cp858': [0x13, false],\r\n            'cp860': [0x03, false],\r\n            'cp861': [0x38, false],\r\n            'cp862': [0x3e, false],\r\n            'cp863': [0x04, false],\r\n            'cp864': [0x1c, false],\r\n            'cp865': [0x05, false],\r\n            'cp866': [0x11, false],\r\n            'cp869': [0x42, false],\r\n            'cp936': [0xff, true],\r\n            'cp949': [0xfd, true],\r\n            'cp950': [0xfe, true],\r\n            'cp1252': [0x10, false],\r\n            'iso88596': [0x16, false],\r\n            'shiftjis': [0xfc, true],\r\n            'windows1250': [0x48, false],\r\n            'windows1251': [0x49, false],\r\n            'windows1252': [0x47, false],\r\n            'windows1253': [0x5a, false],\r\n            'windows1254': [0x5b, false],\r\n            'windows1255': [0x20, false],\r\n            'windows1256': [0x5c, false],\r\n            'windows1257': [0x19, false],\r\n            'windows1258': [0x5e, false],\r\n        };\r\n\r\n        let codepage;\r\n\r\n        if (!iconv.encodingExists(value)) {\r\n            throw new Error('Unknown codepage');\r\n        }\r\n\r\n        if (value in iconv.encodings) {\r\n            if (typeof iconv.encodings[value] === 'string') {\r\n                codepage = iconv.encodings[value];\r\n            } else {\r\n                codepage = value;\r\n            }\r\n        } else {\r\n            throw new Error('Unknown codepage');\r\n        }\r\n\r\n        if (typeof codepages[codepage] !== 'undefined') {\r\n            this._codepage = codepage;\r\n            this._state.hanzi = codepages[codepage][1];\r\n\r\n            this._queue([\r\n                0x1b, 0x74, codepages[codepage][0],\r\n            ]);\r\n        } else {\r\n            throw new Error('Codepage not supported by printer');\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Print text\r\n     *\r\n     * @param  {string}   value  Text that needs to be printed\r\n     * @param  {number}   wrap   Wrap text after this many positions\r\n     * @return {object}          Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    text(value, wrap) {\r\n        if (wrap) {\r\n            let w = linewrap(wrap, {lineBreak: '\\r\\n'});\r\n            value = w(value);\r\n        }\r\n\r\n        let bytes = this._encode(value);\r\n\r\n        if (this._state.hanzi) {\r\n            this._queue([\r\n                0x1c, 0x26, bytes, 0x1c, 0x2e,\r\n            ]);\r\n        } else {\r\n            this._queue([\r\n                bytes,\r\n            ]);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Print a newline\r\n     *\r\n     * @return {object}          Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    newline() {\r\n        this._queue([\r\n            0x0a, 0x0d,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Print text, followed by a newline\r\n     *\r\n     * @param  {string}   value  Text that needs to be printed\r\n     * @param  {number}   wrap   Wrap text after this many positions\r\n     * @return {object}          Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    line(value, wrap) {\r\n        this.text(value, wrap);\r\n        this.newline();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Underline text\r\n     *\r\n     * @param  {boolean|number}   value  true to turn on underline, false to turn off, or 2 for double underline\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    underline(value) {\r\n        if (typeof value === 'undefined') {\r\n            value = ! this._state.underline;\r\n        }\r\n\r\n        this._state.underline = value;\r\n\r\n        this._queue([\r\n            0x1b, 0x2d, Number(value),\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Italic text\r\n     *\r\n     * @param  {boolean}          value  true to turn on italic, false to turn off\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    italic(value) {\r\n        if (typeof value === 'undefined') {\r\n            value = ! this._state.italic;\r\n        }\r\n\r\n        this._state.italic = value;\r\n\r\n        this._queue([\r\n            0x1b, 0x34, Number(value),\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Bold text\r\n     *\r\n     * @param  {boolean}          value  true to turn on bold, false to turn off, or 2 for double underline\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    bold(value) {\r\n        if (typeof value === 'undefined') {\r\n            value = ! this._state.bold;\r\n        }\r\n\r\n        this._state.bold = value;\r\n\r\n        this._queue([\r\n            0x1b, 0x45, Number(value),\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n   /**\r\n     * Change text size\r\n     *\r\n     * @param  {string}          value   small or normal\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    size(value) {\r\n        if (value === 'small') {\r\n            value = 0x01;\r\n        } else {\r\n            value = 0x00;\r\n        }\r\n\r\n        this._queue([\r\n            0x1b, 0x4d, value,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n   /**\r\n     * Change text alignment\r\n     *\r\n     * @param  {string}          value   left, center or right\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    align(value) {\r\n        const alignments = {\r\n            'left': 0x00,\r\n            'center': 0x01,\r\n            'right': 0x02,\r\n        };\r\n\r\n        if (value in alignments) {\r\n            this._queue([\r\n                0x1b, 0x61, alignments[value],\r\n            ]);\r\n        } else {\r\n            throw new Error('Unknown alignment');\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Barcode\r\n     *\r\n     * @param  {string}           value  the value of the barcode\r\n     * @param  {string}           symbology  the type of the barcode\r\n     * @param  {number}           height  height of the barcode\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    barcode(value, symbology, height) {\r\n        const symbologies = {\r\n            'upca': 0x00,\r\n            'upce': 0x01,\r\n            'ean13': 0x02,\r\n            'ean8': 0x03,\r\n            'coda39': 0x04,\r\n            'itf': 0x05,\r\n            'codabar': 0x06,\r\n        };\r\n\r\n        if (symbology in symbologies) {\r\n            let bytes = iconv.encode(value, 'ascii');\r\n\r\n            this._queue([\r\n                0x1d, 0x68, height,\r\n                0x1d, 0x77, symbology === 'code39' ? 0x02 : 0x03,\r\n                0x1d, 0x6b, symbologies[symbology],\r\n                bytes,\r\n                0x00,\r\n            ]);\r\n        } else {\r\n            throw new Error('Symbology not supported by printer');\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * QR code\r\n     *\r\n     * @param  {string}           value  the value of the qr code\r\n     * @param  {number}           model  model of the qrcode, either 1 or 2\r\n     * @param  {number}           size   size of the qrcode, a value between 1 and 8\r\n     * @param  {string}           errorlevel  the amount of error correction used, either 'l', 'm', 'q', 'h'\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    qrcode(value, model, size, errorlevel) {\r\n        /* Force printing the print buffer and moving to a new line */\r\n\r\n        this._queue([\r\n            0x0a,\r\n        ]);\r\n\r\n        /* Model */\r\n\r\n        const models = {\r\n            1: 0x31,\r\n            2: 0x32,\r\n        };\r\n\r\n        if (typeof model === 'undefined') {\r\n            model = 2;\r\n        }\r\n\r\n        if (model in models) {\r\n            this._queue([\r\n                0x1d, 0x28, 0x6b, 0x04, 0x00, 0x31, 0x41, models[model], 0x00,\r\n            ]);\r\n        } else {\r\n            throw new Error('Model must be 1 or 2');\r\n        }\r\n\r\n        /* Size */\r\n\r\n        if (typeof size === 'undefined') {\r\n            size = 6;\r\n        }\r\n\r\n        if (typeof size !== 'number') {\r\n            throw new Error('Size must be a number');\r\n        }\r\n\r\n        if (size < 1 || size > 8) {\r\n            throw new Error('Size must be between 1 and 8');\r\n        }\r\n\r\n        this._queue([\r\n            0x1d, 0x28, 0x6b, 0x03, 0x00, 0x31, 0x43, size,\r\n        ]);\r\n\r\n        /* Error level */\r\n\r\n        const errorlevels = {\r\n            'l': 0x30,\r\n            'm': 0x31,\r\n            'q': 0x32,\r\n            'h': 0x33,\r\n        };\r\n\r\n        if (typeof errorlevel === 'undefined') {\r\n            errorlevel = 'm';\r\n        }\r\n\r\n        if (errorlevel in errorlevels) {\r\n            this._queue([\r\n                0x1d, 0x28, 0x6b, 0x03, 0x00, 0x31, 0x45, errorlevels[errorlevel],\r\n            ]);\r\n        } else {\r\n            throw new Error('Error level must be l, m, q or h');\r\n        }\r\n\r\n        /* Data */\r\n\r\n        let bytes = iconv.encode(value, 'iso88591');\r\n        let length = bytes.length + 3;\r\n\r\n        this._queue([\r\n            0x1d, 0x28, 0x6b, length % 0xff, length / 0xff, 0x31, 0x50, 0x30, bytes,\r\n        ]);\r\n\r\n        /* Print QR code */\r\n\r\n        this._queue([\r\n            0x1d, 0x28, 0x6b, 0x03, 0x00, 0x31, 0x51, 0x30,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Image\r\n     *\r\n     * @param  {object}         element  an element, like a canvas or image that needs to be printed\r\n     * @param  {number}         width  width of the image on the printer\r\n     * @param  {number}         height  height of the image on the printer\r\n     * @param  {string}         algorithm  the dithering algorithm for making the image black and white\r\n     * @param  {number}         threshold  threshold for the dithering algorithm\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    image(element, width, height, algorithm, threshold) {\r\n        if (width % 8 !== 0) {\r\n            throw new Error('Width must be a multiple of 8');\r\n        }\r\n\r\n        if (height % 8 !== 0) {\r\n            throw new Error('Height must be a multiple of 8');\r\n        }\r\n\r\n        if (typeof algorithm === 'undefined') {\r\n            algorithm = 'threshold';\r\n        }\r\n\r\n        if (typeof threshold === 'undefined') {\r\n            threshold = 128;\r\n        }\r\n\r\n        let canvas = createCanvas(width, height);\r\n        let context = canvas.getContext('2d');\r\n        context.drawImage(element, 0, 0, width, height);\r\n        let image = context.getImageData(0, 0, width, height);\r\n\r\n        image = Flatten.flatten(image, [0xff, 0xff, 0xff]);\r\n\r\n        switch (algorithm) {\r\n            case 'threshold': image = Dither.threshold(image, threshold); break;\r\n            case 'bayer': image = Dither.bayer(image, threshold); break;\r\n            case 'floydsteinberg': image = Dither.floydsteinberg(image); break;\r\n            case 'atkinson': image = Dither.atkinson(image); break;\r\n        }\r\n\r\n        let getPixel = (x, y) => image.data[((width * y) + x) * 4] > 0 ? 0 : 1;\r\n\r\n        let bytes = new Uint8Array((width * height) >> 3);\r\n\r\n        for (let y = 0; y < height; y++) {\r\n            for (let x = 0; x < width; x = x + 8) {\r\n                let i = (y * (width >> 3)) + (x >> 3);\r\n                bytes[i] =\r\n                    getPixel(x + 0, y) << 7 |\r\n                    getPixel(x + 1, y) << 6 |\r\n                    getPixel(x + 2, y) << 5 |\r\n                    getPixel(x + 3, y) << 4 |\r\n                    getPixel(x + 4, y) << 3 |\r\n                    getPixel(x + 5, y) << 2 |\r\n                    getPixel(x + 6, y) << 1 |\r\n                    getPixel(x + 7, y);\r\n            }\r\n        }\r\n\r\n        this._queue([\r\n            0x1d, 0x76, 0x30, 0x00,\r\n            (width >> 3) & 0xff, (((width >> 3) >> 8) & 0xff),\r\n            height & 0xff, ((height >> 8) & 0xff),\r\n            bytes,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Cut paper\r\n     *\r\n     * @param  {string}          value   full or partial. When not specified a full cut will be assumed\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    cut(value) {\r\n        let data = 0x00;\r\n\r\n        if (value == 'partial') {\r\n            data = 0x01;\r\n        }\r\n\r\n        this._queue([\r\n            0x1d, 0x56, data,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Beeper sound functionality\r\n     *\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     */\r\n    beeper() {\r\n        this._queue([\r\n            0x1b, 0x42, 0x05, 0x01,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Open cash drawer\r\n     *\r\n     * @return {object}                  Return the object, for easy chaining commands\r\n     */\r\n    openCashDrawer() {\r\n        this._queue([\r\n            0x1b, 0x70, 0x00,\r\n        ]);\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    /**\r\n     * Add raw printer commands\r\n     *\r\n     * @param  {array}           data   raw bytes to be included\r\n     * @return {object}          Return the object, for easy chaining commands\r\n     *\r\n     */\r\n    raw(data) {\r\n        this._queue(data);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Encode all previous commands\r\n     *\r\n     * @return {Uint8Array}         Return the encoded bytes\r\n     *\r\n     */\r\n    encode() {\r\n        let length = 0;\r\n\r\n        this._buffer.forEach((item) => {\r\n            if (typeof item === 'number') {\r\n                length++;\r\n            } else {\r\n                length += item.length;\r\n            }\r\n        });\r\n\r\n        let result = new Uint8Array(length);\r\n\r\n        let index = 0;\r\n\r\n        this._buffer.forEach((item) => {\r\n            if (typeof item === 'number') {\r\n                result[index] = item;\r\n                index++;\r\n            } else {\r\n                result.set(item, index);\r\n                index += item.length;\r\n            }\r\n        });\r\n\r\n        this._reset();\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nmodule.exports = EscPosEncoder;\r\n","\r\n// Presets\r\nvar presetMap = {\r\n    'html': {\r\n        skipScheme: 'html',\r\n        lineBreakScheme: 'html',\r\n        whitespace: 'collapse'\r\n    }\r\n};\r\n\r\n// lineBreak Schemes\r\nvar brPat = /<\\s*br(?:[\\s/]*|\\s[^>]*)>/gi;\r\nvar lineBreakSchemeMap = {\r\n    'unix': [/\\n/g, '\\n'],\r\n    'dos': [/\\r\\n/g, '\\r\\n'],\r\n    'mac': [/\\r/g, '\\r'],\r\n    'html': [brPat, '<br>'],\r\n    'xhtml': [brPat, '<br/>']\r\n};\r\n\r\n// skip Schemes\r\nvar skipSchemeMap = {\r\n    'ansi-color': /\\x1B\\[[^m]*m/g,\r\n    'html': /<[^>]*>/g,\r\n    'bbcode': /\\[[^]]*\\]/g\r\n};\r\n\r\nvar modeMap = {\r\n    'soft': 1,\r\n    'hard': 1\r\n};\r\n\r\nvar wsMap = {\r\n    'collapse': 1,\r\n    'default': 1,\r\n    'line': 1,\r\n    'all': 1\r\n};\r\n\r\nvar rlbMap = {\r\n    'all': 1,\r\n    'multi': 1,\r\n    'none': 1\r\n};\r\nvar rlbSMPat = /([sm])(\\d+)/;\r\n\r\nvar escapePat = /[-/\\\\^$*+?.()|[\\]{}]/g;\r\nfunction escapeRegExp(s) {\r\n    return s.replace(escapePat, '\\\\$&');\r\n}\r\n\r\nvar linewrap = module.exports = function (start, stop, params) {\r\n    if (typeof start === 'object') {\r\n        params = start;\r\n        start = params.start;\r\n        stop = params.stop;\r\n    }\r\n\r\n    if (typeof stop === 'object') {\r\n        params = stop;\r\n        start = start || params.start;\r\n        stop = undefined;\r\n    }\r\n\r\n    if (!stop) {\r\n        stop = start;\r\n        start = 0;\r\n    }\r\n\r\n    if (!params) { params = {}; }\r\n    // Supported options and default values.\r\n    var preset,\r\n        mode = 'soft',\r\n        whitespace = 'default',\r\n        tabWidth = 4,\r\n        skip, skipScheme, lineBreak, lineBreakScheme,\r\n        respectLineBreaks = 'all',\r\n        respectNum,\r\n        preservedLineIndent,\r\n        wrapLineIndent, wrapLineIndentBase;\r\n\r\n    var skipPat;\r\n    var lineBreakPat, lineBreakStr;\r\n    var multiLineBreakPat;\r\n    var preservedLinePrefix = '';\r\n    var wrapLineIndentPat, wrapLineInitPrefix = '';\r\n    var tabRepl;\r\n    var item, flags;\r\n    var i;\r\n\r\n    // First process presets, because these settings can be overwritten later.\r\n    preset = params.preset;\r\n    if (preset) {\r\n        if (!(preset instanceof Array)) {\r\n            preset = [preset];\r\n        }\r\n        for (i = 0; i < preset.length; i++) {\r\n            item = presetMap[preset[i]];\r\n            if (item) {\r\n                if (item.mode) {\r\n                    mode = item.mode;\r\n                }\r\n                if (item.whitespace) {\r\n                    whitespace = item.whitespace;\r\n                }\r\n                if (item.tabWidth !== undefined) {\r\n                    tabWidth = item.tabWidth;\r\n                }\r\n                if (item.skip) {\r\n                    skip = item.skip;\r\n                }\r\n                if (item.skipScheme) {\r\n                    skipScheme = item.skipScheme;\r\n                }\r\n                if (item.lineBreak) {\r\n                    lineBreak = item.lineBreak;\r\n                }\r\n                if (item.lineBreakScheme) {\r\n                    lineBreakScheme = item.lineBreakScheme;\r\n                }\r\n                if (item.respectLineBreaks) {\r\n                    respectLineBreaks = item.respectLineBreaks;\r\n                }\r\n                if (item.preservedLineIndent !== undefined) {\r\n                    preservedLineIndent = item.preservedLineIndent;\r\n                }\r\n                if (item.wrapLineIndent !== undefined) {\r\n                    wrapLineIndent = item.wrapLineIndent;\r\n                }\r\n                if (item.wrapLineIndentBase) {\r\n                    wrapLineIndentBase = item.wrapLineIndentBase;\r\n                }\r\n            } else {\r\n                throw new TypeError('preset must be one of \"' + Object.keys(presetMap).join('\", \"') + '\"');\r\n            }\r\n        }\r\n    }\r\n\r\n    if (params.mode) {\r\n        if (modeMap[params.mode]) {\r\n            mode = params.mode;\r\n        } else {\r\n            throw new TypeError('mode must be one of \"' + Object.keys(modeMap).join('\", \"') + '\"');\r\n        }\r\n    }\r\n    // Available options: 'collapse', 'default', 'line', and 'all'\r\n    if (params.whitespace) {\r\n        if (wsMap[params.whitespace]) {\r\n            whitespace = params.whitespace;\r\n        } else {\r\n            throw new TypeError('whitespace must be one of \"' + Object.keys(wsMap).join('\", \"') + '\"');\r\n        }\r\n    }\r\n\r\n    if (params.tabWidth !== undefined) {\r\n        if (parseInt(params.tabWidth, 10) >= 0) {\r\n            tabWidth = parseInt(params.tabWidth, 10);\r\n        } else {\r\n            throw new TypeError('tabWidth must be a non-negative integer');\r\n        }\r\n    }\r\n    tabRepl = new Array(tabWidth + 1).join(' ');\r\n\r\n    // Available options: 'all', 'multi', 'm\\d+', 's\\d+', 'none'\r\n    if (params.respectLineBreaks) {\r\n        if (rlbMap[params.respectLineBreaks] || rlbSMPat.test(params.respectLineBreaks)) {\r\n            respectLineBreaks = params.respectLineBreaks;\r\n        } else {\r\n            throw new TypeError('respectLineBreaks must be one of \"' + Object.keys(rlbMap).join('\", \"') +\r\n                                '\", \"m<num>\", \"s<num>\"');\r\n        }\r\n    }\r\n    // After these conversions, now we have 4 options in `respectLineBreaks`:\r\n    // 'all', 'none', 'm' and 's'.\r\n    // `respectNum` is applicable iff `respectLineBreaks` is either 'm' or 's'.\r\n    if (respectLineBreaks === 'multi') {\r\n        respectLineBreaks = 'm';\r\n        respectNum = 2;\r\n    } else if (!rlbMap[respectLineBreaks]) {\r\n        var match = rlbSMPat.exec(respectLineBreaks);\r\n        respectLineBreaks = match[1];\r\n        respectNum = parseInt(match[2], 10);\r\n    }\r\n\r\n    if (params.preservedLineIndent !== undefined) {\r\n        if (parseInt(params.preservedLineIndent, 10) >= 0) {\r\n            preservedLineIndent = parseInt(params.preservedLineIndent, 10);\r\n        } else {\r\n            throw new TypeError('preservedLineIndent must be a non-negative integer');\r\n        }\r\n    }\r\n\r\n    if (preservedLineIndent > 0) {\r\n        preservedLinePrefix = new Array(preservedLineIndent + 1).join(' ');\r\n    }\r\n\r\n    if (params.wrapLineIndent !== undefined) {\r\n        if (!isNaN(parseInt(params.wrapLineIndent, 10))) {\r\n            wrapLineIndent = parseInt(params.wrapLineIndent, 10);\r\n        } else {\r\n            throw new TypeError('wrapLineIndent must be an integer');\r\n        }\r\n    }\r\n    if (params.wrapLineIndentBase) {\r\n        wrapLineIndentBase = params.wrapLineIndentBase;\r\n    }\r\n\r\n    if (wrapLineIndentBase) {\r\n        if (wrapLineIndent === undefined) {\r\n            throw new TypeError('wrapLineIndent must be specified when wrapLineIndentBase is specified');\r\n        }\r\n        if (wrapLineIndentBase instanceof RegExp) {\r\n            wrapLineIndentPat = wrapLineIndentBase;\r\n        } else if (typeof wrapLineIndentBase === 'string') {\r\n            wrapLineIndentPat = new RegExp(escapeRegExp(wrapLineIndentBase));\r\n        } else {\r\n            throw new TypeError('wrapLineIndentBase must be either a RegExp object or a string');\r\n        }\r\n    } else if (wrapLineIndent > 0) {\r\n        wrapLineInitPrefix = new Array(wrapLineIndent + 1).join(' ');\r\n    } else if (wrapLineIndent < 0) {\r\n        throw new TypeError('wrapLineIndent must be non-negative when a base is not specified');\r\n    }\r\n\r\n    // NOTE: For the two RegExps `skipPat` and `lineBreakPat` that can be specified\r\n    //       by the user:\r\n    //       1. We require them to be \"global\", so we have to convert them to global\r\n    //          if the user specifies a non-global regex.\r\n    //       2. We cannot call `split()` on them, because they may or may not contain\r\n    //          capturing parentheses which affect the output of `split()`.\r\n\r\n    // Precedence: Regex = Str > Scheme\r\n    if (params.skipScheme) {\r\n        if (skipSchemeMap[params.skipScheme]) {\r\n            skipScheme = params.skipScheme;\r\n        } else {\r\n            throw new TypeError('skipScheme must be one of \"' + Object.keys(skipSchemeMap).join('\", \"') + '\"');\r\n        }\r\n    }\r\n    if (params.skip) {\r\n        skip = params.skip;\r\n    }\r\n\r\n    if (skip) {\r\n        if (skip instanceof RegExp) {\r\n            skipPat = skip;\r\n            if (!skipPat.global) {\r\n                flags = 'g';\r\n                if (skipPat.ignoreCase) { flags += 'i'; }\r\n                if (skipPat.multiline) { flags += 'm'; }\r\n                skipPat = new RegExp(skipPat.source, flags);\r\n            }\r\n        } else if (typeof skip === 'string') {\r\n            skipPat = new RegExp(escapeRegExp(skip), 'g');\r\n        } else {\r\n            throw new TypeError('skip must be either a RegExp object or a string');\r\n        }\r\n    }\r\n    if (!skipPat && skipScheme) {\r\n        skipPat = skipSchemeMap[skipScheme];\r\n    }\r\n\r\n    // Precedence:\r\n    // - for lineBreakPat: Regex > Scheme > Str\r\n    // - for lineBreakStr: Str > Scheme > Regex\r\n    if (params.lineBreakScheme) {\r\n        if (lineBreakSchemeMap[params.lineBreakScheme]) {\r\n            lineBreakScheme = params.lineBreakScheme;\r\n        } else {\r\n            throw new TypeError('lineBreakScheme must be one of \"' + Object.keys(lineBreakSchemeMap).join('\", \"') + '\"');\r\n        }\r\n    }\r\n    if (params.lineBreak) {\r\n        lineBreak = params.lineBreak;\r\n    }\r\n\r\n    if (lineBreakScheme) {\r\n        // Supported schemes: 'unix', 'dos', 'mac', 'html', 'xhtml'\r\n        item = lineBreakSchemeMap[lineBreakScheme];\r\n        if (item) {\r\n            lineBreakPat = item[0];\r\n            lineBreakStr = item[1];\r\n        }\r\n    }\r\n    if (lineBreak) {\r\n        if (lineBreak instanceof Array) {\r\n            if (lineBreak.length === 1) {\r\n                lineBreak = lineBreak[0];\r\n            } else if (lineBreak.length >= 2) {\r\n                if (lineBreak[0] instanceof RegExp) {\r\n                    lineBreakPat = lineBreak[0];\r\n                    if (typeof lineBreak[1] === 'string') {\r\n                        lineBreakStr = lineBreak[1];\r\n                    }\r\n                } else if (lineBreak[1] instanceof RegExp) {\r\n                    lineBreakPat = lineBreak[1];\r\n                    if (typeof lineBreak[0] === 'string') {\r\n                        lineBreakStr = lineBreak[0];\r\n                    }\r\n                } else if (typeof lineBreak[0] === 'string' && typeof lineBreak[1] === 'string') {\r\n                    lineBreakPat = new RegExp(escapeRegExp(lineBreak[0]), 'g');\r\n                    lineBreakStr = lineBreak[1];\r\n                } else {\r\n                    lineBreak = lineBreak[0];\r\n                }\r\n            }\r\n        }\r\n        if (typeof lineBreak === 'string') {\r\n            lineBreakStr = lineBreak;\r\n            if (!lineBreakPat) {\r\n                lineBreakPat = new RegExp(escapeRegExp(lineBreak), 'g');\r\n            }\r\n        } else if (lineBreak instanceof RegExp) {\r\n            lineBreakPat = lineBreak;\r\n        } else if (!(lineBreak instanceof Array)) {\r\n            throw new TypeError('lineBreak must be a RegExp object, a string, or an array consisted of a RegExp object and a string');\r\n        }\r\n    }\r\n    // Only assign defaults when `lineBreakPat` is not assigned.\r\n    // So if `params.lineBreak` is a RegExp, we don't have a value in `lineBreakStr`\r\n    // yet. We will try to get the value from the input string, and if failed, we\r\n    // will throw an exception.\r\n    if (!lineBreakPat) {\r\n        lineBreakPat = /\\n/g;\r\n        lineBreakStr = '\\n';\r\n    }\r\n\r\n    // Create `multiLineBreakPat` based on `lineBreakPat`, that matches strings\r\n    // consisted of one or more line breaks and zero or more whitespaces.\r\n    // Also convert `lineBreakPat` to global if not already so.\r\n    flags = 'g';\r\n    if (lineBreakPat.ignoreCase) { flags += 'i'; }\r\n    if (lineBreakPat.multiline) { flags += 'm'; }\r\n    multiLineBreakPat = new RegExp('\\\\s*(?:' + lineBreakPat.source + ')(?:' +\r\n                                   lineBreakPat.source + '|\\\\s)*', flags);\r\n    if (!lineBreakPat.global) {\r\n        lineBreakPat = new RegExp(lineBreakPat.source, flags);\r\n    }\r\n\r\n    // Initialize other useful variables.\r\n    var re = mode === 'hard' ? /\\b/ : /(\\S+\\s+)/;\r\n    var prefix = new Array(start + 1).join(' ');\r\n    var wsStrip = (whitespace === 'default' || whitespace === 'collapse'),\r\n        wsCollapse = (whitespace === 'collapse'),\r\n        wsLine = (whitespace === 'line'),\r\n        wsAll = (whitespace === 'all');\r\n    var tabPat = /\\t/g,\r\n        collapsePat = /  +/g,\r\n        pPat = /^\\s+/,\r\n        tPat = /\\s+$/,\r\n        nonWsPat = /\\S/,\r\n        wsPat = /\\s/;\r\n    var wrapLen = stop - start;\r\n\r\n    return function (text) {\r\n        text = text.toString().replace(tabPat, tabRepl);\r\n\r\n        var match;\r\n        if (!lineBreakStr) {\r\n            // Try to get lineBreakStr from `text`\r\n            lineBreakPat.lastIndex = 0;\r\n            match = lineBreakPat.exec(text);\r\n            if (match) {\r\n                lineBreakStr = match[0];\r\n            } else {\r\n                throw new TypeError('Line break string for the output not specified');\r\n            }\r\n        }\r\n\r\n        // text -> blocks; each bloc -> segments; each segment -> chunks\r\n        var blocks, base = 0;\r\n        var mo, arr, b, res;\r\n        // Split `text` by line breaks.\r\n        blocks = [];\r\n        multiLineBreakPat.lastIndex = 0;\r\n        match = multiLineBreakPat.exec(text);\r\n        while(match) {\r\n            blocks.push(text.substring(base, match.index));\r\n\r\n            if (respectLineBreaks !== 'none') {\r\n                arr = [];\r\n                b = 0;\r\n                lineBreakPat.lastIndex = 0;\r\n                mo = lineBreakPat.exec(match[0]);\r\n                while(mo) {\r\n                    arr.push(match[0].substring(b, mo.index));\r\n                    b = mo.index + mo[0].length;\r\n                    mo = lineBreakPat.exec(match[0]);\r\n                }\r\n                arr.push(match[0].substring(b));\r\n                blocks.push({type: 'break', breaks: arr});\r\n            } else {\r\n                // Strip line breaks and insert spaces when necessary.\r\n                if (wsCollapse) {\r\n                    res = ' ';\r\n                } else {\r\n                    res = match[0].replace(lineBreakPat, '');\r\n                }\r\n                blocks.push({type: 'break', remaining: res});\r\n            }\r\n\r\n            base = match.index + match[0].length;\r\n            match = multiLineBreakPat.exec(text);\r\n        }\r\n        blocks.push(text.substring(base));\r\n\r\n        var i, j, k;\r\n        var segments;\r\n        if (skipPat) {\r\n            segments = [];\r\n            for (i = 0; i < blocks.length; i++) {\r\n                var bloc = blocks[i];\r\n                if (typeof bloc !== 'string') {\r\n                    // This is an object.\r\n                    segments.push(bloc);\r\n                } else {\r\n                    base = 0;\r\n                    skipPat.lastIndex = 0;\r\n                    match = skipPat.exec(bloc);\r\n                    while(match) {\r\n                        segments.push(bloc.substring(base, match.index));\r\n                        segments.push({type: 'skip', value: match[0]});\r\n                        base = match.index + match[0].length;\r\n                        match = skipPat.exec(bloc);\r\n                    }\r\n                    segments.push(bloc.substring(base));\r\n                }\r\n            }\r\n        } else {\r\n            segments = blocks;\r\n        }\r\n\r\n        var chunks = [];\r\n        for (i = 0; i < segments.length; i++) {\r\n            var segment = segments[i];\r\n            if (typeof segment !== 'string') {\r\n                // This is an object.\r\n                chunks.push(segment);\r\n            } else {\r\n                if (wsCollapse) {\r\n                    segment = segment.replace(collapsePat, ' ');\r\n                }\r\n\r\n                var parts = segment.split(re),\r\n                    acc = [];\r\n\r\n                for (j = 0; j < parts.length; j++) {\r\n                    var x = parts[j];\r\n                    if (mode === 'hard') {\r\n                        for (k = 0; k < x.length; k += wrapLen) {\r\n                            acc.push(x.slice(k, k + wrapLen));\r\n                        }\r\n                    }\r\n                    else { acc.push(x); }\r\n                }\r\n                chunks = chunks.concat(acc);\r\n            }\r\n        }\r\n\r\n        var curLine = 0,\r\n            curLineLength = start + preservedLinePrefix.length,\r\n            lines = [ prefix + preservedLinePrefix ],\r\n            // Holds the \"real length\" (excluding trailing whitespaces) of the\r\n            // current line if it exceeds `stop`, otherwise 0.\r\n            // ONLY USED when `wsAll` is true, in `finishOffCurLine()`.\r\n            bulge = 0,\r\n            // `cleanLine` is true iff we are at the beginning of an output line. By\r\n            // \"beginning\" we mean it doesn't contain any non-whitespace char yet.\r\n            // But its `curLineLength` can be greater than `start`, or even possibly\r\n            // be greater than `stop`, if `wsStrip` is false.\r\n            //\r\n            // Note that a \"clean\" line can still contain skip strings, in addition\r\n            // to whitespaces.\r\n            //\r\n            // This variable is used to allow us strip preceding whitespaces when\r\n            // `wsStrip` is true, or `wsLine` is true and `preservedLine` is false.\r\n            cleanLine = true,\r\n            // `preservedLine` is true iff we are in a preserved input line.\r\n            //\r\n            // It's used when `wsLine` is true to (combined with `cleanLine`) decide\r\n            // whether a whitespace is at the beginning of a preserved input line and\r\n            // should not be stripped.\r\n            preservedLine = true,\r\n            // The current indent prefix for wrapped lines.\r\n            wrapLinePrefix = wrapLineInitPrefix,\r\n            remnant;\r\n\r\n        // Always returns '' if `beforeHardBreak` is true.\r\n        //\r\n        // Assumption: Each call of this function is always followed by a `lines.push()` call.\r\n        //\r\n        // This function can change the status of `cleanLine`, but we don't modify the value of\r\n        // `cleanLine` in this function. It's fine because `cleanLine` will be set to the correct\r\n        // value after the `lines.push()` call following this function call. We also don't update\r\n        // `curLineLength` when pushing a new line and it's safe for the same reason.\r\n        function finishOffCurLine(beforeHardBreak) {\r\n            var str = lines[curLine],\r\n                idx, ln, rBase;\r\n\r\n            if (!wsAll) {\r\n                // Strip all trailing whitespaces past `start`.\r\n                idx = str.length - 1;\r\n                while (idx >= start && str[idx] === ' ') { idx--; }\r\n                while (idx >= start && wsPat.test(str[idx])) { idx--; }\r\n                idx++;\r\n\r\n                if (idx !== str.length) {\r\n                    lines[curLine] = str.substring(0, idx);\r\n                }\r\n\r\n                if (preservedLine && cleanLine && wsLine && curLineLength > stop) {\r\n                    // Add the remnants to the next line, just like when `wsAll` is true.\r\n                    rBase = str.length - (curLineLength - stop);\r\n                    if (rBase < idx) {\r\n                        // We didn't reach `stop` when stripping due to a bulge.\r\n                        rBase = idx;\r\n                    }\r\n                }\r\n            } else {\r\n                // Strip trailing whitespaces exceeding stop.\r\n                if (curLineLength > stop) {\r\n                    bulge = bulge || stop;\r\n                    rBase = str.length - (curLineLength - bulge);\r\n                    lines[curLine] = str.substring(0,  rBase);\r\n                }\r\n                bulge = 0;\r\n            }\r\n\r\n            // Bug: the current implementation of `wrapLineIndent` is buggy: we are not\r\n            // taking the extra space occupied by the additional indentation into account\r\n            // when wrapping the line. For example, in \"hard\" mode, we should hard-wrap\r\n            // long words at `wrapLen - wrapLinePrefix.length` instead of `wrapLen`;\r\n            // and remnants should also be wrapped at `wrapLen - wrapLinePrefix.length`.\r\n            if (preservedLine) {\r\n                // This is a preserved line, and the next output line isn't a\r\n                // preserved line.\r\n                preservedLine = false;\r\n                if (wrapLineIndentPat) {\r\n                    idx = lines[curLine].substring(start).search(wrapLineIndentPat);\r\n                    if (idx >= 0 && idx + wrapLineIndent > 0) {\r\n                        wrapLinePrefix = new Array(idx + wrapLineIndent + 1).join(' ');\r\n                    } else {\r\n                        wrapLinePrefix = '';\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Some remnants are left to the next line.\r\n            if (rBase) {\r\n                while (rBase + wrapLen < str.length) {\r\n                    if (wsAll) {\r\n                        ln = str.substring(rBase, rBase + wrapLen);\r\n                        lines.push(prefix + wrapLinePrefix + ln);\r\n                    } else {\r\n                        lines.push(prefix + wrapLinePrefix);\r\n                    }\r\n                    rBase += wrapLen;\r\n                    curLine++;\r\n                }\r\n                if (beforeHardBreak) {\r\n                    if (wsAll) {\r\n                        ln = str.substring(rBase);\r\n                        lines.push(prefix + wrapLinePrefix + ln);\r\n                    } else {\r\n                        lines.push(prefix + wrapLinePrefix);\r\n                    }\r\n                    curLine++;\r\n                } else {\r\n                    ln = str.substring(rBase);\r\n                    return wrapLinePrefix + ln;\r\n                }\r\n            }\r\n\r\n            return '';\r\n        }\r\n\r\n        for (i = 0; i < chunks.length; i++) {\r\n            var chunk = chunks[i];\r\n\r\n            if (chunk === '') { continue; }\r\n\r\n            if (typeof chunk !== 'string') {\r\n                if (chunk.type === 'break') {\r\n                    // This is one or more line breaks.\r\n                    // Each entry in `breaks` is just zero or more whitespaces.\r\n                    if (respectLineBreaks !== 'none') {\r\n                        // Note that if `whitespace` is \"collapse\", we still need\r\n                        // to collapse whitespaces in entries of `breaks`.\r\n                        var breaks = chunk.breaks;\r\n                        var num = breaks.length - 1;\r\n\r\n                        if (respectLineBreaks === 's') {\r\n                            // This is the most complex scenario. We have to check\r\n                            // the line breaks one by one.\r\n                            for (j = 0; j < num; j++) {\r\n                                if (breaks[j+1].length < respectNum) {\r\n                                    // This line break should be stripped.\r\n                                    if (wsCollapse) {\r\n                                        breaks[j+1] = ' ';\r\n                                    } else {\r\n                                        breaks[j+1] = breaks[j] + breaks[j+1];\r\n                                    }\r\n                                } else {\r\n                                    // This line break should be preserved.\r\n                                    // First finish off the current line.\r\n                                    if (wsAll) {\r\n                                        lines[curLine] += breaks[j];\r\n                                        curLineLength += breaks[j].length;\r\n                                    }\r\n                                    finishOffCurLine(true);\r\n\r\n                                    lines.push(prefix + preservedLinePrefix);\r\n                                    curLine++;\r\n                                    curLineLength = start + preservedLinePrefix.length;\r\n\r\n                                    preservedLine = cleanLine = true;\r\n                                }\r\n                            }\r\n                            // We are adding to either the existing line (if no line break\r\n                            // is qualified for preservance) or a \"new\" line.\r\n                            if (!cleanLine || wsAll || (wsLine && preservedLine)) {\r\n                                if (wsCollapse || (!cleanLine && breaks[num] === '')) {\r\n                                    breaks[num] = ' ';\r\n                                }\r\n                                lines[curLine] += breaks[num];\r\n                                curLineLength += breaks[num].length;\r\n                            }\r\n                        } else if (respectLineBreaks === 'm' && num < respectNum) {\r\n                            // These line breaks should be stripped.\r\n                            if (!cleanLine || wsAll || (wsLine && preservedLine)) {\r\n                                if (wsCollapse) {\r\n                                    chunk = ' ';\r\n                                } else {\r\n                                    chunk = breaks.join('');\r\n                                    if (!cleanLine && chunk === '') {\r\n                                        chunk = ' ';\r\n                                    }\r\n                                }\r\n                                lines[curLine] += chunk;\r\n                                curLineLength += chunk.length;\r\n                            }\r\n                        } else {    // 'all' || ('m' && num >= respectNum)\r\n                            // These line breaks should be preserved.\r\n                            if (wsStrip) {\r\n                                // Finish off the current line.\r\n                                finishOffCurLine(true);\r\n\r\n                                for (j = 0; j < num; j++) {\r\n                                    lines.push(prefix + preservedLinePrefix);\r\n                                    curLine++;\r\n                                }\r\n\r\n                                curLineLength = start + preservedLinePrefix.length;\r\n                                preservedLine = cleanLine = true;\r\n\r\n                            } else {\r\n                                if (wsAll || (preservedLine && cleanLine)) {\r\n                                    lines[curLine] += breaks[0];\r\n                                    curLineLength += breaks[0].length;\r\n                                }\r\n\r\n                                for (j = 0; j < num; j++) {\r\n                                    // Finish off the current line.\r\n                                    finishOffCurLine(true);\r\n\r\n                                    lines.push(prefix + preservedLinePrefix + breaks[j+1]);\r\n                                    curLine++;\r\n                                    curLineLength = start + preservedLinePrefix.length + breaks[j+1].length;\r\n\r\n                                    preservedLine = cleanLine = true;\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        // These line breaks should be stripped.\r\n                        if (!cleanLine || wsAll || (wsLine && preservedLine)) {\r\n                            chunk = chunk.remaining;\r\n\r\n                            // Bug: If `wsAll` is true, `cleanLine` is false, and `chunk`\r\n                            // is '', we insert a space to replace the line break. This\r\n                            // space will be preserved even if we are at the end of an\r\n                            // output line, which is wrong behavior. However, I'm not\r\n                            // sure it's worth it to fix this edge case.\r\n                            if (wsCollapse || (!cleanLine && chunk === '')) {\r\n                                chunk = ' ';\r\n                            }\r\n                            lines[curLine] += chunk;\r\n                            curLineLength += chunk.length;\r\n                        }\r\n                    }\r\n                } else if (chunk.type === 'skip') {\r\n                    // This is a skip string.\r\n                    // Assumption: skip strings don't end with whitespaces.\r\n                    if (curLineLength > stop) {\r\n                        remnant = finishOffCurLine(false);\r\n\r\n                        lines.push(prefix + wrapLinePrefix);\r\n                        curLine++;\r\n                        curLineLength = start + wrapLinePrefix.length;\r\n\r\n                        if (remnant) {\r\n                            lines[curLine] += remnant;\r\n                            curLineLength += remnant.length;\r\n                        }\r\n\r\n                        cleanLine = true;\r\n                    }\r\n                    lines[curLine] += chunk.value;\r\n                }\r\n                continue;\r\n            }\r\n\r\n            var chunk2;\r\n            while (1) {\r\n                chunk2 = undefined;\r\n                if (curLineLength + chunk.length > stop &&\r\n                        curLineLength + (chunk2 = chunk.replace(tPat, '')).length > stop &&\r\n                        chunk2 !== '' &&\r\n                        curLineLength > start) {\r\n                    // This line is full, add `chunk` to the next line\r\n                    remnant = finishOffCurLine(false);\r\n\r\n                    lines.push(prefix + wrapLinePrefix);\r\n                    curLine++;\r\n                    curLineLength = start + wrapLinePrefix.length;\r\n\r\n                    if (remnant) {\r\n                        lines[curLine] += remnant;\r\n                        curLineLength += remnant.length;\r\n                        cleanLine = true;\r\n                        continue;\r\n                    }\r\n\r\n                    if (wsStrip || (wsLine && !(preservedLine && cleanLine))) {\r\n                        chunk = chunk.replace(pPat, '');\r\n                    }\r\n                    cleanLine = false;\r\n\r\n                } else {\r\n                    // Add `chunk` to this line\r\n                    if (cleanLine) {\r\n                        if (wsStrip || (wsLine && !(preservedLine && cleanLine))) {\r\n                            chunk = chunk.replace(pPat, '');\r\n                            if (chunk !== '') {\r\n                                cleanLine = false;\r\n                            }\r\n                        } else {\r\n                            if (nonWsPat.test(chunk)) {\r\n                                cleanLine = false;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            if (wsAll && chunk2 && curLineLength + chunk2.length > stop) {\r\n                bulge = curLineLength + chunk2.length;\r\n            }\r\n            lines[curLine] += chunk;\r\n            curLineLength += chunk.length;\r\n        }\r\n        // Finally, finish off the last line.\r\n        finishOffCurLine(true);\r\n        return lines.join(lineBreakStr);\r\n    };\r\n};\r\n\r\nlinewrap.soft = linewrap;\r\n\r\nlinewrap.hard = function (/*start, stop, params*/) {\r\n    var args = [].slice.call(arguments);\r\n    var last = args.length - 1;\r\n    if (typeof args[last] === 'object') {\r\n        args[last].mode = 'hard';\r\n    } else {\r\n        args.push({ mode : 'hard' });\r\n    }\r\n    return linewrap.apply(null, args);\r\n};\r\n\r\nlinewrap.wrap = function(text/*, start, stop, params*/) {\r\n    var args = [].slice.call(arguments);\r\n    args.shift();\r\n    return linewrap.apply(null, args)(text);\r\n};\r\n","\"use strict\";\r\n\r\n// Generated data for sbcs codec. Don't edit manually. Regenerate using generation/gen-sbcs.js script.\r\nmodule.exports = {\r\n  \"437\": \"cp437\",\r\n  \"737\": \"cp737\",\r\n  \"775\": \"cp775\",\r\n  \"850\": \"cp850\",\r\n  \"852\": \"cp852\",\r\n  \"855\": \"cp855\",\r\n  \"856\": \"cp856\",\r\n  \"857\": \"cp857\",\r\n  \"858\": \"cp858\",\r\n  \"860\": \"cp860\",\r\n  \"861\": \"cp861\",\r\n  \"862\": \"cp862\",\r\n  \"863\": \"cp863\",\r\n  \"864\": \"cp864\",\r\n  \"865\": \"cp865\",\r\n  \"866\": \"cp866\",\r\n  \"869\": \"cp869\",\r\n  \"874\": \"windows874\",\r\n  \"922\": \"cp922\",\r\n  \"1046\": \"cp1046\",\r\n  \"1124\": \"cp1124\",\r\n  \"1125\": \"cp1125\",\r\n  \"1129\": \"cp1129\",\r\n  \"1133\": \"cp1133\",\r\n  \"1161\": \"cp1161\",\r\n  \"1162\": \"cp1162\",\r\n  \"1163\": \"cp1163\",\r\n  \"1250\": \"windows1250\",\r\n  \"1251\": \"windows1251\",\r\n  \"1252\": \"windows1252\",\r\n  \"1253\": \"windows1253\",\r\n  \"1254\": \"windows1254\",\r\n  \"1255\": \"windows1255\",\r\n  \"1256\": \"windows1256\",\r\n  \"1257\": \"windows1257\",\r\n  \"1258\": \"windows1258\",\r\n  \"28591\": \"iso88591\",\r\n  \"28592\": \"iso88592\",\r\n  \"28593\": \"iso88593\",\r\n  \"28594\": \"iso88594\",\r\n  \"28595\": \"iso88595\",\r\n  \"28596\": \"iso88596\",\r\n  \"28597\": \"iso88597\",\r\n  \"28598\": \"iso88598\",\r\n  \"28599\": \"iso88599\",\r\n  \"28600\": \"iso885910\",\r\n  \"28601\": \"iso885911\",\r\n  \"28603\": \"iso885913\",\r\n  \"28604\": \"iso885914\",\r\n  \"28605\": \"iso885915\",\r\n  \"28606\": \"iso885916\",\r\n  \"windows874\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win874\": \"windows874\",\r\n  \"cp874\": \"windows874\",\r\n  \"windows1250\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1250\": \"windows1250\",\r\n  \"cp1250\": \"windows1250\",\r\n  \"windows1251\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1251\": \"windows1251\",\r\n  \"cp1251\": \"windows1251\",\r\n  \"windows1252\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1252\": \"windows1252\",\r\n  \"cp1252\": \"windows1252\",\r\n  \"windows1253\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1253\": \"windows1253\",\r\n  \"cp1253\": \"windows1253\",\r\n  \"windows1254\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1254\": \"windows1254\",\r\n  \"cp1254\": \"windows1254\",\r\n  \"windows1255\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1255\": \"windows1255\",\r\n  \"cp1255\": \"windows1255\",\r\n  \"windows1256\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1256\": \"windows1256\",\r\n  \"cp1256\": \"windows1256\",\r\n  \"windows1257\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1257\": \"windows1257\",\r\n  \"cp1257\": \"windows1257\",\r\n  \"windows1258\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"win1258\": \"windows1258\",\r\n  \"cp1258\": \"windows1258\",\r\n  \"iso88591\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28591\": \"iso88591\",\r\n  \"iso88592\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28592\": \"iso88592\",\r\n  \"iso88593\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28593\": \"iso88593\",\r\n  \"iso88594\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28594\": \"iso88594\",\r\n  \"iso88595\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28595\": \"iso88595\",\r\n  \"iso88596\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28596\": \"iso88596\",\r\n  \"iso88597\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28597\": \"iso88597\",\r\n  \"iso88598\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28598\": \"iso88598\",\r\n  \"iso88599\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28599\": \"iso88599\",\r\n  \"iso885910\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28600\": \"iso885910\",\r\n  \"iso885911\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28601\": \"iso885911\",\r\n  \"iso885913\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28603\": \"iso885913\",\r\n  \"iso885914\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28604\": \"iso885914\",\r\n  \"iso885915\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28605\": \"iso885915\",\r\n  \"iso885916\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"cp28606\": \"iso885916\",\r\n  \"cp437\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm437\": \"cp437\",\r\n  \"csibm437\": \"cp437\",\r\n  \"cp737\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm737\": \"cp737\",\r\n  \"csibm737\": \"cp737\",\r\n  \"cp775\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm775\": \"cp775\",\r\n  \"csibm775\": \"cp775\",\r\n  \"cp850\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm850\": \"cp850\",\r\n  \"csibm850\": \"cp850\",\r\n  \"cp852\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm852\": \"cp852\",\r\n  \"csibm852\": \"cp852\",\r\n  \"cp855\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm855\": \"cp855\",\r\n  \"csibm855\": \"cp855\",\r\n  \"cp856\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm856\": \"cp856\",\r\n  \"csibm856\": \"cp856\",\r\n  \"cp857\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm857\": \"cp857\",\r\n  \"csibm857\": \"cp857\",\r\n  \"cp858\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm858\": \"cp858\",\r\n  \"csibm858\": \"cp858\",\r\n  \"cp860\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm860\": \"cp860\",\r\n  \"csibm860\": \"cp860\",\r\n  \"cp861\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm861\": \"cp861\",\r\n  \"csibm861\": \"cp861\",\r\n  \"cp862\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm862\": \"cp862\",\r\n  \"csibm862\": \"cp862\",\r\n  \"cp863\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm863\": \"cp863\",\r\n  \"csibm863\": \"cp863\",\r\n  \"cp864\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\r\n  },\r\n  \"ibm864\": \"cp864\",\r\n  \"csibm864\": \"cp864\",\r\n  \"cp865\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm865\": \"cp865\",\r\n  \"csibm865\": \"cp865\",\r\n  \"cp866\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm866\": \"cp866\",\r\n  \"csibm866\": \"cp866\",\r\n  \"cp869\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm869\": \"cp869\",\r\n  \"csibm869\": \"cp869\",\r\n  \"cp922\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm922\": \"cp922\",\r\n  \"csibm922\": \"cp922\",\r\n  \"cp1046\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1046\": \"cp1046\",\r\n  \"csibm1046\": \"cp1046\",\r\n  \"cp1124\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1124\": \"cp1124\",\r\n  \"csibm1124\": \"cp1124\",\r\n  \"cp1125\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1125\": \"cp1125\",\r\n  \"csibm1125\": \"cp1125\",\r\n  \"cp1129\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1129\": \"cp1129\",\r\n  \"csibm1129\": \"cp1129\",\r\n  \"cp1133\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1133\": \"cp1133\",\r\n  \"csibm1133\": \"cp1133\",\r\n  \"cp1161\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1161\": \"cp1161\",\r\n  \"csibm1161\": \"cp1161\",\r\n  \"cp1162\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1162\": \"cp1162\",\r\n  \"csibm1162\": \"cp1162\",\r\n  \"cp1163\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ibm1163\": \"cp1163\",\r\n  \"csibm1163\": \"cp1163\",\r\n  \"maccroatian\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"maccyrillic\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"macgreek\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"maciceland\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"macroman\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"macromania\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"macthai\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"macturkish\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"macukraine\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"koi8r\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"koi8u\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"koi8ru\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"koi8t\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"armscii8\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \")(.,-\"\r\n  },\r\n  \"rk1048\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"tcvn\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\\u0000\\u0003\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\r\n  },\r\n  \"georgianacademy\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"georgianps\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"pt154\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"viscii\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\\u0000\\u0001\\u0003\\u0004\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0015\\u0016\\u0017\\u0018\\u001a\\u001b\\u001c\\u001d\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\r\n  },\r\n  \"iso646cn\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}\"\r\n  },\r\n  \"iso646jp\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}\"\r\n  },\r\n  \"hproman8\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"macintosh\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"ascii\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  },\r\n  \"tis620\": {\r\n    \"type\": \"_sbcs\",\r\n    \"chars\": \"\"\r\n  }\r\n}","/* globals document, ImageData */\r\n\r\nconst parseFont = require('./lib/parse-font')\r\n\r\nexports.parseFont = parseFont\r\n\r\nexports.createCanvas = function (width, height) {\r\n  return Object.assign(document.createElement('canvas'), { width: width, height: height })\r\n}\r\n\r\nexports.createImageData = function (array, width, height) {\r\n  // Browser implementation of ImageData looks at the number of arguments passed\r\n  switch (arguments.length) {\r\n    case 0: return new ImageData()\r\n    case 1: return new ImageData(array)\r\n    case 2: return new ImageData(array, width)\r\n    default: return new ImageData(array, width, height)\r\n  }\r\n}\r\n\r\nexports.loadImage = function (src, options) {\r\n  return new Promise(function (resolve, reject) {\r\n    const image = Object.assign(document.createElement('img'), options)\r\n\r\n    function cleanup () {\r\n      image.onload = null\r\n      image.onerror = null\r\n    }\r\n\r\n    image.onload = function () { cleanup(); resolve(image) }\r\n    image.onerror = function () { cleanup(); reject(new Error('Failed to load the image \"' + src + '\"')) }\r\n\r\n    image.src = src\r\n  })\r\n}\r\n","\"use strict\";\r\n\r\n// Some environments don't have global Buffer (e.g. React Native).\r\n// Solution would be installing npm modules \"buffer\" and \"stream\" explicitly.\r\nvar Buffer = require(\"safer-buffer\").Buffer;\r\n\r\nvar bomHandling = require(\"./bom-handling\"),\r\n    iconv = module.exports;\r\n\r\n// All codecs and aliases are kept here, keyed by encoding name/alias.\r\n// They are lazy loaded in `iconv.getCodec` from `encodings/index.js`.\r\niconv.encodings = null;\r\n\r\n// Characters emitted in case of error.\r\niconv.defaultCharUnicode = '';\r\niconv.defaultCharSingleByte = '?';\r\n\r\n// Public API.\r\niconv.encode = function encode(str, encoding, options) {\r\n    str = \"\" + (str || \"\"); // Ensure string.\r\n\r\n    var encoder = iconv.getEncoder(encoding, options);\r\n\r\n    var res = encoder.write(str);\r\n    var trail = encoder.end();\r\n    \r\n    return (trail && trail.length > 0) ? Buffer.concat([res, trail]) : res;\r\n}\r\n\r\niconv.decode = function decode(buf, encoding, options) {\r\n    if (typeof buf === 'string') {\r\n        if (!iconv.skipDecodeWarning) {\r\n            console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');\r\n            iconv.skipDecodeWarning = true;\r\n        }\r\n\r\n        buf = Buffer.from(\"\" + (buf || \"\"), \"binary\"); // Ensure buffer.\r\n    }\r\n\r\n    var decoder = iconv.getDecoder(encoding, options);\r\n\r\n    var res = decoder.write(buf);\r\n    var trail = decoder.end();\r\n\r\n    return trail ? (res + trail) : res;\r\n}\r\n\r\niconv.encodingExists = function encodingExists(enc) {\r\n    try {\r\n        iconv.getCodec(enc);\r\n        return true;\r\n    } catch (e) {\r\n        return false;\r\n    }\r\n}\r\n\r\n// Legacy aliases to convert functions\r\niconv.toEncoding = iconv.encode;\r\niconv.fromEncoding = iconv.decode;\r\n\r\n// Search for a codec in iconv.encodings. Cache codec data in iconv._codecDataCache.\r\niconv._codecDataCache = {};\r\niconv.getCodec = function getCodec(encoding) {\r\n    if (!iconv.encodings)\r\n        iconv.encodings = require(\"../encodings\"); // Lazy load all encoding definitions.\r\n    \r\n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\r\n    var enc = iconv._canonicalizeEncoding(encoding);\r\n\r\n    // Traverse iconv.encodings to find actual codec.\r\n    var codecOptions = {};\r\n    while (true) {\r\n        var codec = iconv._codecDataCache[enc];\r\n        if (codec)\r\n            return codec;\r\n\r\n        var codecDef = iconv.encodings[enc];\r\n\r\n        switch (typeof codecDef) {\r\n            case \"string\": // Direct alias to other encoding.\r\n                enc = codecDef;\r\n                break;\r\n\r\n            case \"object\": // Alias with options. Can be layered.\r\n                for (var key in codecDef)\r\n                    codecOptions[key] = codecDef[key];\r\n\r\n                if (!codecOptions.encodingName)\r\n                    codecOptions.encodingName = enc;\r\n                \r\n                enc = codecDef.type;\r\n                break;\r\n\r\n            case \"function\": // Codec itself.\r\n                if (!codecOptions.encodingName)\r\n                    codecOptions.encodingName = enc;\r\n\r\n                // The codec function must load all tables and return object with .encoder and .decoder methods.\r\n                // It'll be called only once (for each different options object).\r\n                codec = new codecDef(codecOptions, iconv);\r\n\r\n                iconv._codecDataCache[codecOptions.encodingName] = codec; // Save it to be reused later.\r\n                return codec;\r\n\r\n            default:\r\n                throw new Error(\"Encoding not recognized: '\" + encoding + \"' (searched as: '\"+enc+\"')\");\r\n        }\r\n    }\r\n}\r\n\r\niconv._canonicalizeEncoding = function(encoding) {\r\n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\r\n    return (''+encoding).toLowerCase().replace(/:\\d{4}$|[^0-9a-z]/g, \"\");\r\n}\r\n\r\niconv.getEncoder = function getEncoder(encoding, options) {\r\n    var codec = iconv.getCodec(encoding),\r\n        encoder = new codec.encoder(options, codec);\r\n\r\n    if (codec.bomAware && options && options.addBOM)\r\n        encoder = new bomHandling.PrependBOM(encoder, options);\r\n\r\n    return encoder;\r\n}\r\n\r\niconv.getDecoder = function getDecoder(encoding, options) {\r\n    var codec = iconv.getCodec(encoding),\r\n        decoder = new codec.decoder(options, codec);\r\n\r\n    if (codec.bomAware && !(options && options.stripBOM === false))\r\n        decoder = new bomHandling.StripBOM(decoder, options);\r\n\r\n    return decoder;\r\n}\r\n\r\n\r\n// Load extensions in Node. All of them are omitted in Browserify build via 'browser' field in package.json.\r\nvar nodeVer = typeof process !== 'undefined' && process.versions && process.versions.node;\r\nif (nodeVer) {\r\n\r\n    // Load streaming support in Node v0.10+\r\n    var nodeVerArr = nodeVer.split(\".\").map(Number);\r\n    if (nodeVerArr[0] > 0 || nodeVerArr[1] >= 10) {\r\n        require(\"./streams\")(iconv);\r\n    }\r\n\r\n    // Load Node primitive extensions.\r\n    require(\"./extend-node\")(iconv);\r\n}\r\n\r\nif (\"\" != \"\\u0100\") {\r\n    console.error(\"iconv-lite warning: javascript files use encoding different from utf-8. See https://github.com/ashtuchkin/iconv-lite/wiki/Javascript-source-file-encodings for more info.\");\r\n}\r\n","/* (ignored) */","/* (ignored) */","'use strict'\r\n\r\n/**\r\n * Font RegExp helpers.\r\n */\r\n\r\nconst weights = 'bold|bolder|lighter|[1-9]00'\r\nconst styles = 'italic|oblique'\r\nconst variants = 'small-caps'\r\nconst stretches = 'ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded'\r\nconst units = 'px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q'\r\nconst string = '\\'([^\\']+)\\'|\"([^\"]+)\"|[\\\\w\\\\s-]+'\r\n\r\n// [ [ <font-style> || <font-variant-css21> || <font-weight> || <font-stretch> ]?\r\n//    <font-size> [ / <line-height> ]? <font-family> ]\r\n// https://drafts.csswg.org/css-fonts-3/#font-prop\r\nconst weightRe = new RegExp(`(${weights}) +`, 'i')\r\nconst styleRe = new RegExp(`(${styles}) +`, 'i')\r\nconst variantRe = new RegExp(`(${variants}) +`, 'i')\r\nconst stretchRe = new RegExp(`(${stretches}) +`, 'i')\r\nconst sizeFamilyRe = new RegExp(\r\n  `([\\\\d\\\\.]+)(${units}) *((?:${string})( *, *(?:${string}))*)`)\r\n\r\n/**\r\n * Cache font parsing.\r\n */\r\n\r\nconst cache = {}\r\n\r\nconst defaultHeight = 16 // pt, common browser default\r\n\r\n/**\r\n * Parse font `str`.\r\n *\r\n * @param {String} str\r\n * @return {Object} Parsed font. `size` is in device units. `unit` is the unit\r\n *   appearing in the input string.\r\n * @api private\r\n */\r\n\r\nmodule.exports = str => {\r\n  // Cached\r\n  if (cache[str]) return cache[str]\r\n\r\n  // Try for required properties first.\r\n  const sizeFamily = sizeFamilyRe.exec(str)\r\n  if (!sizeFamily) return // invalid\r\n\r\n  // Default values and required properties\r\n  const font = {\r\n    weight: 'normal',\r\n    style: 'normal',\r\n    stretch: 'normal',\r\n    variant: 'normal',\r\n    size: parseFloat(sizeFamily[1]),\r\n    unit: sizeFamily[2],\r\n    family: sizeFamily[3].replace(/[\"']/g, '').replace(/ *, */g, ',')\r\n  }\r\n\r\n  // Optional, unordered properties.\r\n  let weight, style, variant, stretch\r\n  // Stop search at `sizeFamily.index`\r\n  const substr = str.substring(0, sizeFamily.index)\r\n  if ((weight = weightRe.exec(substr))) font.weight = weight[1]\r\n  if ((style = styleRe.exec(substr))) font.style = style[1]\r\n  if ((variant = variantRe.exec(substr))) font.variant = variant[1]\r\n  if ((stretch = stretchRe.exec(substr))) font.stretch = stretch[1]\r\n\r\n  // Convert to device units. (`font.unit` is the original unit)\r\n  // TODO: ch, ex\r\n  switch (font.unit) {\r\n    case 'pt':\r\n      font.size /= 0.75\r\n      break\r\n    case 'pc':\r\n      font.size *= 16\r\n      break\r\n    case 'in':\r\n      font.size *= 96\r\n      break\r\n    case 'cm':\r\n      font.size *= 96.0 / 2.54\r\n      break\r\n    case 'mm':\r\n      font.size *= 96.0 / 25.4\r\n      break\r\n    case '%':\r\n      // TODO disabled because existing unit tests assume 100\r\n      // font.size *= defaultHeight / 100 / 0.75\r\n      break\r\n    case 'em':\r\n    case 'rem':\r\n      font.size *= defaultHeight / 0.75\r\n      break\r\n    case 'q':\r\n      font.size *= 96 / 25.4 / 4\r\n      break\r\n  }\r\n\r\n  return (cache[str] = font)\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\ndeclare let window: any;\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class DatecsprinterService {\r\n\r\n  DatecsPrinter: any;\r\n  constructor() {\r\n    console.log('Hello DatecsPrinter Provider');\r\n  }\r\n\r\n  async listBluetoothDevices (){\r\n    return new Promise((resolve, reject) => {\r\n        window.DatecsPrinter.listBluetoothDevices(\r\n          function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n   connect(address:string){\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.connect(address,\r\n          function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n  disconnect(){\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.disconnect(\r\n          function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n  feedPaper(lines:number = 1){\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.feedPaper(lines,\r\n          function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n  printText (text:string, charset:string = 'ISO-8859-1'){\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.printText( text,\r\n        charset,\r\n          function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n\r\n  setBarcode (align, small, scale, hri, height) {\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.setBarcode(\r\n        align,\r\n        small,\r\n        scale,\r\n        hri,\r\n        height,\r\n          function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n\r\n  printBarcode(data = '1234445775', type = 73) {\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.printBarcode(\r\n        type,\r\n        data,\r\n          function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n\r\n  getStatus(){\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.getStatus(\r\n        function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n  getTemperature(){\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.getTemperature(\r\n        function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n  printImage (image:string, height:number, width:number, align = 0){\r\n    return new Promise((resolve, reject) => {\r\n      window.DatecsPrinter.printImage(\r\n        image,\r\n        height,\r\n        width,\r\n        align,\r\n        function (success) {\r\n            resolve(success);\r\n          },\r\n          function (error) {\r\n            reject(error);\r\n          });\r\n    });\r\n\r\n  }\r\n\r\n\r\n\r\n/*! canvas-to-bmp version 1.0 ALPHA\r\n    (c) 2015 Ken \"Epistemex\" Fyrstenberg\r\n    MIT License (this header required)\r\n*/\r\n\r\npublic CanvasToBMP = {\r\n\r\n  /**\r\n   * Convert a canvas element to ArrayBuffer containing a BMP file\r\n   * with support for 32-bit (alpha).\r\n   *\r\n   * Note that CORS requirement must be fulfilled.\r\n   *\r\n   * @param {HTMLCanvasElement} canvas - the canvas element to convert\r\n   * @return {ArrayBuffer}\r\n   */\r\n  toArrayBuffer: function(canvas) {\r\n\r\n    var w = canvas.width,\r\n        h = canvas.height,\r\n        w4 = w * 4,\r\n        idata = canvas.getContext(\"2d\").getImageData(0, 0, w, h),\r\n        data32 = new Uint32Array(idata.data.buffer), // 32-bit representation of canvas\r\n\r\n        stride = Math.floor((32 * w + 31) / 32) * 4, // row length incl. padding\r\n        pixelArraySize = stride * h,                 // total bitmap size\r\n        fileLength = 122 + pixelArraySize,           // header size is known + bitmap\r\n\r\n        file = new ArrayBuffer(fileLength),          // raw byte buffer (returned)\r\n        view = new DataView(file),                   // handle endian, reg. width etc.\r\n        pos = 0, x, y = 0, p, s = 0, a, v;\r\n\r\n    // write file header\r\n    setU16(0x4d42);          // BM\r\n    setU32(fileLength);      // total length\r\n    pos += 4;                // skip unused fields\r\n    setU32(0x7a);            // offset to pixels\r\n\r\n    // DIB header\r\n    setU32(108);             // header size\r\n    setU32(w);\r\n    setU32(-h >>> 0);        // negative = top-to-bottom\r\n    setU16(1);               // 1 plane\r\n    setU16(32);              // 32-bits (RGBA)\r\n    setU32(3);               // no compression (BI_BITFIELDS, 3)\r\n    setU32(pixelArraySize);  // bitmap size incl. padding (stride x height)\r\n    setU32(2835);            // pixels/meter h (~72 DPI x 39.3701 inch/m)\r\n    setU32(2835);            // pixels/meter v\r\n    pos += 8;                // skip color/important colors\r\n    setU32(0xff0000);        // red channel mask\r\n    setU32(0xff00);          // green channel mask\r\n    setU32(0xff);            // blue channel mask\r\n    setU32(0xff000000);      // alpha channel mask\r\n    setU32(0x57696e20);      // \" win\" color space\r\n\r\n    // bitmap data, change order of ABGR to BGRA\r\n    while (y < h) {\r\n      p = 0x7a + y * stride; // offset + stride x height\r\n      x = 0;\r\n      while (x < w4) {\r\n        v = data32[s++];                     // get ABGR\r\n        a = v >>> 24;                        // alpha channel\r\n        view.setUint32(p + x, (v << 8) | a); // set BGRA\r\n        x += 4;\r\n      }\r\n      y++\r\n    }\r\n\r\n    return file;\r\n\r\n    // helper method to move current buffer position\r\n    function setU16(data) {view.setUint16(pos, data, true); pos += 2}\r\n    function setU32(data) {view.setUint32(pos, data, true); pos += 4}\r\n  },\r\n\r\n  /**\r\n   * Converts a canvas to BMP file, returns a Blob representing the\r\n   * file. This can be used with URL.createObjectURL().\r\n   * Note that CORS requirement must be fulfilled.\r\n   *\r\n   * @param {HTMLCanvasElement} canvas - the canvas element to convert\r\n   * @return {Blob}\r\n   */\r\n  toBlob: function(canvas) {\r\n    return new Blob([this.toArrayBuffer(canvas)], {\r\n      type: \"image/bmp\"\r\n    });\r\n  },\r\n\r\n  /**\r\n   * Converts the canvas to a data-URI representing a BMP file.\r\n   * Note that CORS requirement must be fulfilled.\r\n   *\r\n   * @param canvas\r\n   * @return {string}\r\n   */\r\n  toDataURL: function(canvas) {\r\n    var buffer = new Uint8Array(this.toArrayBuffer(canvas)),\r\n        bs = \"\", i = 0, l = buffer.length;\r\n    while (i < l) bs += String.fromCharCode(buffer[i++]);\r\n    return \"data:image/bmp;base64,\" + btoa(bs);\r\n  }\r\n};\r\n\r\n}\r\n","\"use strict\";\r\nvar Buffer = require(\"safer-buffer\").Buffer;\r\n\r\n// Multibyte codec. In this scheme, a character is represented by 1 or more bytes.\r\n// Our codec supports UTF-16 surrogates, extensions for GB18030 and unicode sequences.\r\n// To save memory and loading time, we read table files only when requested.\r\n\r\nexports._dbcs = DBCSCodec;\r\n\r\nvar UNASSIGNED = -1,\r\n    GB18030_CODE = -2,\r\n    SEQ_START  = -10,\r\n    NODE_START = -1000,\r\n    UNASSIGNED_NODE = new Array(0x100),\r\n    DEF_CHAR = -1;\r\n\r\nfor (var i = 0; i < 0x100; i++)\r\n    UNASSIGNED_NODE[i] = UNASSIGNED;\r\n\r\n\r\n// Class DBCSCodec reads and initializes mapping tables.\r\nfunction DBCSCodec(codecOptions, iconv) {\r\n    this.encodingName = codecOptions.encodingName;\r\n    if (!codecOptions)\r\n        throw new Error(\"DBCS codec is called without the data.\")\r\n    if (!codecOptions.table)\r\n        throw new Error(\"Encoding '\" + this.encodingName + \"' has no data.\");\r\n\r\n    // Load tables.\r\n    var mappingTable = codecOptions.table();\r\n\r\n\r\n    // Decode tables: MBCS -> Unicode.\r\n\r\n    // decodeTables is a trie, encoded as an array of arrays of integers. Internal arrays are trie nodes and all have len = 256.\r\n    // Trie root is decodeTables[0].\r\n    // Values: >=  0 -> unicode character code. can be > 0xFFFF\r\n    //         == UNASSIGNED -> unknown/unassigned sequence.\r\n    //         == GB18030_CODE -> this is the end of a GB18030 4-byte sequence.\r\n    //         <= NODE_START -> index of the next node in our trie to process next byte.\r\n    //         <= SEQ_START  -> index of the start of a character code sequence, in decodeTableSeq.\r\n    this.decodeTables = [];\r\n    this.decodeTables[0] = UNASSIGNED_NODE.slice(0); // Create root node.\r\n\r\n    // Sometimes a MBCS char corresponds to a sequence of unicode chars. We store them as arrays of integers here. \r\n    this.decodeTableSeq = [];\r\n\r\n    // Actual mapping tables consist of chunks. Use them to fill up decode tables.\r\n    for (var i = 0; i < mappingTable.length; i++)\r\n        this._addDecodeChunk(mappingTable[i]);\r\n\r\n    this.defaultCharUnicode = iconv.defaultCharUnicode;\r\n\r\n    \r\n    // Encode tables: Unicode -> DBCS.\r\n\r\n    // `encodeTable` is array mapping from unicode char to encoded char. All its values are integers for performance.\r\n    // Because it can be sparse, it is represented as array of buckets by 256 chars each. Bucket can be null.\r\n    // Values: >=  0 -> it is a normal char. Write the value (if <=256 then 1 byte, if <=65536 then 2 bytes, etc.).\r\n    //         == UNASSIGNED -> no conversion found. Output a default char.\r\n    //         <= SEQ_START  -> it's an index in encodeTableSeq, see below. The character starts a sequence.\r\n    this.encodeTable = [];\r\n    \r\n    // `encodeTableSeq` is used when a sequence of unicode characters is encoded as a single code. We use a tree of\r\n    // objects where keys correspond to characters in sequence and leafs are the encoded dbcs values. A special DEF_CHAR key\r\n    // means end of sequence (needed when one sequence is a strict subsequence of another).\r\n    // Objects are kept separately from encodeTable to increase performance.\r\n    this.encodeTableSeq = [];\r\n\r\n    // Some chars can be decoded, but need not be encoded.\r\n    var skipEncodeChars = {};\r\n    if (codecOptions.encodeSkipVals)\r\n        for (var i = 0; i < codecOptions.encodeSkipVals.length; i++) {\r\n            var val = codecOptions.encodeSkipVals[i];\r\n            if (typeof val === 'number')\r\n                skipEncodeChars[val] = true;\r\n            else\r\n                for (var j = val.from; j <= val.to; j++)\r\n                    skipEncodeChars[j] = true;\r\n        }\r\n        \r\n    // Use decode trie to recursively fill out encode tables.\r\n    this._fillEncodeTable(0, 0, skipEncodeChars);\r\n\r\n    // Add more encoding pairs when needed.\r\n    if (codecOptions.encodeAdd) {\r\n        for (var uChar in codecOptions.encodeAdd)\r\n            if (Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd, uChar))\r\n                this._setEncodeChar(uChar.charCodeAt(0), codecOptions.encodeAdd[uChar]);\r\n    }\r\n\r\n    this.defCharSB  = this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];\r\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]['?'];\r\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = \"?\".charCodeAt(0);\r\n\r\n\r\n    // Load & create GB18030 tables when needed.\r\n    if (typeof codecOptions.gb18030 === 'function') {\r\n        this.gb18030 = codecOptions.gb18030(); // Load GB18030 ranges.\r\n\r\n        // Add GB18030 decode tables.\r\n        var thirdByteNodeIdx = this.decodeTables.length;\r\n        var thirdByteNode = this.decodeTables[thirdByteNodeIdx] = UNASSIGNED_NODE.slice(0);\r\n\r\n        var fourthByteNodeIdx = this.decodeTables.length;\r\n        var fourthByteNode = this.decodeTables[fourthByteNodeIdx] = UNASSIGNED_NODE.slice(0);\r\n\r\n        for (var i = 0x81; i <= 0xFE; i++) {\r\n            var secondByteNodeIdx = NODE_START - this.decodeTables[0][i];\r\n            var secondByteNode = this.decodeTables[secondByteNodeIdx];\r\n            for (var j = 0x30; j <= 0x39; j++)\r\n                secondByteNode[j] = NODE_START - thirdByteNodeIdx;\r\n        }\r\n        for (var i = 0x81; i <= 0xFE; i++)\r\n            thirdByteNode[i] = NODE_START - fourthByteNodeIdx;\r\n        for (var i = 0x30; i <= 0x39; i++)\r\n            fourthByteNode[i] = GB18030_CODE\r\n    }        \r\n}\r\n\r\nDBCSCodec.prototype.encoder = DBCSEncoder;\r\nDBCSCodec.prototype.decoder = DBCSDecoder;\r\n\r\n// Decoder helpers\r\nDBCSCodec.prototype._getDecodeTrieNode = function(addr) {\r\n    var bytes = [];\r\n    for (; addr > 0; addr >>= 8)\r\n        bytes.push(addr & 0xFF);\r\n    if (bytes.length == 0)\r\n        bytes.push(0);\r\n\r\n    var node = this.decodeTables[0];\r\n    for (var i = bytes.length-1; i > 0; i--) { // Traverse nodes deeper into the trie.\r\n        var val = node[bytes[i]];\r\n\r\n        if (val == UNASSIGNED) { // Create new node.\r\n            node[bytes[i]] = NODE_START - this.decodeTables.length;\r\n            this.decodeTables.push(node = UNASSIGNED_NODE.slice(0));\r\n        }\r\n        else if (val <= NODE_START) { // Existing node.\r\n            node = this.decodeTables[NODE_START - val];\r\n        }\r\n        else\r\n            throw new Error(\"Overwrite byte in \" + this.encodingName + \", addr: \" + addr.toString(16));\r\n    }\r\n    return node;\r\n}\r\n\r\n\r\nDBCSCodec.prototype._addDecodeChunk = function(chunk) {\r\n    // First element of chunk is the hex mbcs code where we start.\r\n    var curAddr = parseInt(chunk[0], 16);\r\n\r\n    // Choose the decoding node where we'll write our chars.\r\n    var writeTable = this._getDecodeTrieNode(curAddr);\r\n    curAddr = curAddr & 0xFF;\r\n\r\n    // Write all other elements of the chunk to the table.\r\n    for (var k = 1; k < chunk.length; k++) {\r\n        var part = chunk[k];\r\n        if (typeof part === \"string\") { // String, write as-is.\r\n            for (var l = 0; l < part.length;) {\r\n                var code = part.charCodeAt(l++);\r\n                if (0xD800 <= code && code < 0xDC00) { // Decode surrogate\r\n                    var codeTrail = part.charCodeAt(l++);\r\n                    if (0xDC00 <= codeTrail && codeTrail < 0xE000)\r\n                        writeTable[curAddr++] = 0x10000 + (code - 0xD800) * 0x400 + (codeTrail - 0xDC00);\r\n                    else\r\n                        throw new Error(\"Incorrect surrogate pair in \"  + this.encodingName + \" at chunk \" + chunk[0]);\r\n                }\r\n                else if (0x0FF0 < code && code <= 0x0FFF) { // Character sequence (our own encoding used)\r\n                    var len = 0xFFF - code + 2;\r\n                    var seq = [];\r\n                    for (var m = 0; m < len; m++)\r\n                        seq.push(part.charCodeAt(l++)); // Simple variation: don't support surrogates or subsequences in seq.\r\n\r\n                    writeTable[curAddr++] = SEQ_START - this.decodeTableSeq.length;\r\n                    this.decodeTableSeq.push(seq);\r\n                }\r\n                else\r\n                    writeTable[curAddr++] = code; // Basic char\r\n            }\r\n        } \r\n        else if (typeof part === \"number\") { // Integer, meaning increasing sequence starting with prev character.\r\n            var charCode = writeTable[curAddr - 1] + 1;\r\n            for (var l = 0; l < part; l++)\r\n                writeTable[curAddr++] = charCode++;\r\n        }\r\n        else\r\n            throw new Error(\"Incorrect type '\" + typeof part + \"' given in \"  + this.encodingName + \" at chunk \" + chunk[0]);\r\n    }\r\n    if (curAddr > 0xFF)\r\n        throw new Error(\"Incorrect chunk in \"  + this.encodingName + \" at addr \" + chunk[0] + \": too long\" + curAddr);\r\n}\r\n\r\n// Encoder helpers\r\nDBCSCodec.prototype._getEncodeBucket = function(uCode) {\r\n    var high = uCode >> 8; // This could be > 0xFF because of astral characters.\r\n    if (this.encodeTable[high] === undefined)\r\n        this.encodeTable[high] = UNASSIGNED_NODE.slice(0); // Create bucket on demand.\r\n    return this.encodeTable[high];\r\n}\r\n\r\nDBCSCodec.prototype._setEncodeChar = function(uCode, dbcsCode) {\r\n    var bucket = this._getEncodeBucket(uCode);\r\n    var low = uCode & 0xFF;\r\n    if (bucket[low] <= SEQ_START)\r\n        this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR] = dbcsCode; // There's already a sequence, set a single-char subsequence of it.\r\n    else if (bucket[low] == UNASSIGNED)\r\n        bucket[low] = dbcsCode;\r\n}\r\n\r\nDBCSCodec.prototype._setEncodeSequence = function(seq, dbcsCode) {\r\n    \r\n    // Get the root of character tree according to first character of the sequence.\r\n    var uCode = seq[0];\r\n    var bucket = this._getEncodeBucket(uCode);\r\n    var low = uCode & 0xFF;\r\n\r\n    var node;\r\n    if (bucket[low] <= SEQ_START) {\r\n        // There's already a sequence with  - use it.\r\n        node = this.encodeTableSeq[SEQ_START-bucket[low]];\r\n    }\r\n    else {\r\n        // There was no sequence object - allocate a new one.\r\n        node = {};\r\n        if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low]; // If a char was set before - make it a single-char subsequence.\r\n        bucket[low] = SEQ_START - this.encodeTableSeq.length;\r\n        this.encodeTableSeq.push(node);\r\n    }\r\n\r\n    // Traverse the character tree, allocating new nodes as needed.\r\n    for (var j = 1; j < seq.length-1; j++) {\r\n        var oldVal = node[uCode];\r\n        if (typeof oldVal === 'object')\r\n            node = oldVal;\r\n        else {\r\n            node = node[uCode] = {}\r\n            if (oldVal !== undefined)\r\n                node[DEF_CHAR] = oldVal\r\n        }\r\n    }\r\n\r\n    // Set the leaf to given dbcsCode.\r\n    uCode = seq[seq.length-1];\r\n    node[uCode] = dbcsCode;\r\n}\r\n\r\nDBCSCodec.prototype._fillEncodeTable = function(nodeIdx, prefix, skipEncodeChars) {\r\n    var node = this.decodeTables[nodeIdx];\r\n    for (var i = 0; i < 0x100; i++) {\r\n        var uCode = node[i];\r\n        var mbCode = prefix + i;\r\n        if (skipEncodeChars[mbCode])\r\n            continue;\r\n\r\n        if (uCode >= 0)\r\n            this._setEncodeChar(uCode, mbCode);\r\n        else if (uCode <= NODE_START)\r\n            this._fillEncodeTable(NODE_START - uCode, mbCode << 8, skipEncodeChars);\r\n        else if (uCode <= SEQ_START)\r\n            this._setEncodeSequence(this.decodeTableSeq[SEQ_START - uCode], mbCode);\r\n    }\r\n}\r\n\r\n\r\n\r\n// == Encoder ==================================================================\r\n\r\nfunction DBCSEncoder(options, codec) {\r\n    // Encoder state\r\n    this.leadSurrogate = -1;\r\n    this.seqObj = undefined;\r\n    \r\n    // Static data\r\n    this.encodeTable = codec.encodeTable;\r\n    this.encodeTableSeq = codec.encodeTableSeq;\r\n    this.defaultCharSingleByte = codec.defCharSB;\r\n    this.gb18030 = codec.gb18030;\r\n}\r\n\r\nDBCSEncoder.prototype.write = function(str) {\r\n    var newBuf = Buffer.alloc(str.length * (this.gb18030 ? 4 : 3)),\r\n        leadSurrogate = this.leadSurrogate,\r\n        seqObj = this.seqObj, nextChar = -1,\r\n        i = 0, j = 0;\r\n\r\n    while (true) {\r\n        // 0. Get next character.\r\n        if (nextChar === -1) {\r\n            if (i == str.length) break;\r\n            var uCode = str.charCodeAt(i++);\r\n        }\r\n        else {\r\n            var uCode = nextChar;\r\n            nextChar = -1;    \r\n        }\r\n\r\n        // 1. Handle surrogates.\r\n        if (0xD800 <= uCode && uCode < 0xE000) { // Char is one of surrogates.\r\n            if (uCode < 0xDC00) { // We've got lead surrogate.\r\n                if (leadSurrogate === -1) {\r\n                    leadSurrogate = uCode;\r\n                    continue;\r\n                } else {\r\n                    leadSurrogate = uCode;\r\n                    // Double lead surrogate found.\r\n                    uCode = UNASSIGNED;\r\n                }\r\n            } else { // We've got trail surrogate.\r\n                if (leadSurrogate !== -1) {\r\n                    uCode = 0x10000 + (leadSurrogate - 0xD800) * 0x400 + (uCode - 0xDC00);\r\n                    leadSurrogate = -1;\r\n                } else {\r\n                    // Incomplete surrogate pair - only trail surrogate found.\r\n                    uCode = UNASSIGNED;\r\n                }\r\n                \r\n            }\r\n        }\r\n        else if (leadSurrogate !== -1) {\r\n            // Incomplete surrogate pair - only lead surrogate found.\r\n            nextChar = uCode; uCode = UNASSIGNED; // Write an error, then current char.\r\n            leadSurrogate = -1;\r\n        }\r\n\r\n        // 2. Convert uCode character.\r\n        var dbcsCode = UNASSIGNED;\r\n        if (seqObj !== undefined && uCode != UNASSIGNED) { // We are in the middle of the sequence\r\n            var resCode = seqObj[uCode];\r\n            if (typeof resCode === 'object') { // Sequence continues.\r\n                seqObj = resCode;\r\n                continue;\r\n\r\n            } else if (typeof resCode == 'number') { // Sequence finished. Write it.\r\n                dbcsCode = resCode;\r\n\r\n            } else if (resCode == undefined) { // Current character is not part of the sequence.\r\n\r\n                // Try default character for this sequence\r\n                resCode = seqObj[DEF_CHAR];\r\n                if (resCode !== undefined) {\r\n                    dbcsCode = resCode; // Found. Write it.\r\n                    nextChar = uCode; // Current character will be written too in the next iteration.\r\n\r\n                } else {\r\n                    // TODO: What if we have no default? (resCode == undefined)\r\n                    // Then, we should write first char of the sequence as-is and try the rest recursively.\r\n                    // Didn't do it for now because no encoding has this situation yet.\r\n                    // Currently, just skip the sequence and write current char.\r\n                }\r\n            }\r\n            seqObj = undefined;\r\n        }\r\n        else if (uCode >= 0) {  // Regular character\r\n            var subtable = this.encodeTable[uCode >> 8];\r\n            if (subtable !== undefined)\r\n                dbcsCode = subtable[uCode & 0xFF];\r\n            \r\n            if (dbcsCode <= SEQ_START) { // Sequence start\r\n                seqObj = this.encodeTableSeq[SEQ_START-dbcsCode];\r\n                continue;\r\n            }\r\n\r\n            if (dbcsCode == UNASSIGNED && this.gb18030) {\r\n                // Use GB18030 algorithm to find character(s) to write.\r\n                var idx = findIdx(this.gb18030.uChars, uCode);\r\n                if (idx != -1) {\r\n                    var dbcsCode = this.gb18030.gbChars[idx] + (uCode - this.gb18030.uChars[idx]);\r\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 12600); dbcsCode = dbcsCode % 12600;\r\n                    newBuf[j++] = 0x30 + Math.floor(dbcsCode / 1260); dbcsCode = dbcsCode % 1260;\r\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 10); dbcsCode = dbcsCode % 10;\r\n                    newBuf[j++] = 0x30 + dbcsCode;\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 3. Write dbcsCode character.\r\n        if (dbcsCode === UNASSIGNED)\r\n            dbcsCode = this.defaultCharSingleByte;\r\n        \r\n        if (dbcsCode < 0x100) {\r\n            newBuf[j++] = dbcsCode;\r\n        }\r\n        else if (dbcsCode < 0x10000) {\r\n            newBuf[j++] = dbcsCode >> 8;   // high byte\r\n            newBuf[j++] = dbcsCode & 0xFF; // low byte\r\n        }\r\n        else {\r\n            newBuf[j++] = dbcsCode >> 16;\r\n            newBuf[j++] = (dbcsCode >> 8) & 0xFF;\r\n            newBuf[j++] = dbcsCode & 0xFF;\r\n        }\r\n    }\r\n\r\n    this.seqObj = seqObj;\r\n    this.leadSurrogate = leadSurrogate;\r\n    return newBuf.slice(0, j);\r\n}\r\n\r\nDBCSEncoder.prototype.end = function() {\r\n    if (this.leadSurrogate === -1 && this.seqObj === undefined)\r\n        return; // All clean. Most often case.\r\n\r\n    var newBuf = Buffer.alloc(10), j = 0;\r\n\r\n    if (this.seqObj) { // We're in the sequence.\r\n        var dbcsCode = this.seqObj[DEF_CHAR];\r\n        if (dbcsCode !== undefined) { // Write beginning of the sequence.\r\n            if (dbcsCode < 0x100) {\r\n                newBuf[j++] = dbcsCode;\r\n            }\r\n            else {\r\n                newBuf[j++] = dbcsCode >> 8;   // high byte\r\n                newBuf[j++] = dbcsCode & 0xFF; // low byte\r\n            }\r\n        } else {\r\n            // See todo above.\r\n        }\r\n        this.seqObj = undefined;\r\n    }\r\n\r\n    if (this.leadSurrogate !== -1) {\r\n        // Incomplete surrogate pair - only lead surrogate found.\r\n        newBuf[j++] = this.defaultCharSingleByte;\r\n        this.leadSurrogate = -1;\r\n    }\r\n    \r\n    return newBuf.slice(0, j);\r\n}\r\n\r\n// Export for testing\r\nDBCSEncoder.prototype.findIdx = findIdx;\r\n\r\n\r\n// == Decoder ==================================================================\r\n\r\nfunction DBCSDecoder(options, codec) {\r\n    // Decoder state\r\n    this.nodeIdx = 0;\r\n    this.prevBuf = Buffer.alloc(0);\r\n\r\n    // Static data\r\n    this.decodeTables = codec.decodeTables;\r\n    this.decodeTableSeq = codec.decodeTableSeq;\r\n    this.defaultCharUnicode = codec.defaultCharUnicode;\r\n    this.gb18030 = codec.gb18030;\r\n}\r\n\r\nDBCSDecoder.prototype.write = function(buf) {\r\n    var newBuf = Buffer.alloc(buf.length*2),\r\n        nodeIdx = this.nodeIdx, \r\n        prevBuf = this.prevBuf, prevBufOffset = this.prevBuf.length,\r\n        seqStart = -this.prevBuf.length, // idx of the start of current parsed sequence.\r\n        uCode;\r\n\r\n    if (prevBufOffset > 0) // Make prev buf overlap a little to make it easier to slice later.\r\n        prevBuf = Buffer.concat([prevBuf, buf.slice(0, 10)]);\r\n    \r\n    for (var i = 0, j = 0; i < buf.length; i++) {\r\n        var curByte = (i >= 0) ? buf[i] : prevBuf[i + prevBufOffset];\r\n\r\n        // Lookup in current trie node.\r\n        var uCode = this.decodeTables[nodeIdx][curByte];\r\n\r\n        if (uCode >= 0) { \r\n            // Normal character, just use it.\r\n        }\r\n        else if (uCode === UNASSIGNED) { // Unknown char.\r\n            // TODO: Callback with seq.\r\n            //var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\r\n            i = seqStart; // Try to parse again, after skipping first byte of the sequence ('i' will be incremented by 'for' cycle).\r\n            uCode = this.defaultCharUnicode.charCodeAt(0);\r\n        }\r\n        else if (uCode === GB18030_CODE) {\r\n            var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\r\n            var ptr = (curSeq[0]-0x81)*12600 + (curSeq[1]-0x30)*1260 + (curSeq[2]-0x81)*10 + (curSeq[3]-0x30);\r\n            var idx = findIdx(this.gb18030.gbChars, ptr);\r\n            uCode = this.gb18030.uChars[idx] + ptr - this.gb18030.gbChars[idx];\r\n        }\r\n        else if (uCode <= NODE_START) { // Go to next trie node.\r\n            nodeIdx = NODE_START - uCode;\r\n            continue;\r\n        }\r\n        else if (uCode <= SEQ_START) { // Output a sequence of chars.\r\n            var seq = this.decodeTableSeq[SEQ_START - uCode];\r\n            for (var k = 0; k < seq.length - 1; k++) {\r\n                uCode = seq[k];\r\n                newBuf[j++] = uCode & 0xFF;\r\n                newBuf[j++] = uCode >> 8;\r\n            }\r\n            uCode = seq[seq.length-1];\r\n        }\r\n        else\r\n            throw new Error(\"iconv-lite internal error: invalid decoding table value \" + uCode + \" at \" + nodeIdx + \"/\" + curByte);\r\n\r\n        // Write the character to buffer, handling higher planes using surrogate pair.\r\n        if (uCode > 0xFFFF) { \r\n            uCode -= 0x10000;\r\n            var uCodeLead = 0xD800 + Math.floor(uCode / 0x400);\r\n            newBuf[j++] = uCodeLead & 0xFF;\r\n            newBuf[j++] = uCodeLead >> 8;\r\n\r\n            uCode = 0xDC00 + uCode % 0x400;\r\n        }\r\n        newBuf[j++] = uCode & 0xFF;\r\n        newBuf[j++] = uCode >> 8;\r\n\r\n        // Reset trie node.\r\n        nodeIdx = 0; seqStart = i+1;\r\n    }\r\n\r\n    this.nodeIdx = nodeIdx;\r\n    this.prevBuf = (seqStart >= 0) ? buf.slice(seqStart) : prevBuf.slice(seqStart + prevBufOffset);\r\n    return newBuf.slice(0, j).toString('ucs2');\r\n}\r\n\r\nDBCSDecoder.prototype.end = function() {\r\n    var ret = '';\r\n\r\n    // Try to parse all remaining chars.\r\n    while (this.prevBuf.length > 0) {\r\n        // Skip 1 character in the buffer.\r\n        ret += this.defaultCharUnicode;\r\n        var buf = this.prevBuf.slice(1);\r\n\r\n        // Parse remaining as usual.\r\n        this.prevBuf = Buffer.alloc(0);\r\n        this.nodeIdx = 0;\r\n        if (buf.length > 0)\r\n            ret += this.write(buf);\r\n    }\r\n\r\n    this.nodeIdx = 0;\r\n    return ret;\r\n}\r\n\r\n// Binary search for GB18030. Returns largest i such that table[i] <= val.\r\nfunction findIdx(table, val) {\r\n    if (table[0] > val)\r\n        return -1;\r\n\r\n    var l = 0, r = table.length;\r\n    while (l < r-1) { // always table[l] <= val < table[r]\r\n        var mid = l + Math.floor((r-l+1)/2);\r\n        if (table[mid] <= val)\r\n            l = mid;\r\n        else\r\n            r = mid;\r\n    }\r\n    return l;\r\n}\r\n\r\n","\"use strict\";\r\nvar Buffer = require(\"safer-buffer\").Buffer;\r\n\r\n// Single-byte codec. Needs a 'chars' string parameter that contains 256 or 128 chars that\r\n// correspond to encoded bytes (if 128 - then lower half is ASCII). \r\n\r\nexports._sbcs = SBCSCodec;\r\nfunction SBCSCodec(codecOptions, iconv) {\r\n    if (!codecOptions)\r\n        throw new Error(\"SBCS codec is called without the data.\")\r\n    \r\n    // Prepare char buffer for decoding.\r\n    if (!codecOptions.chars || (codecOptions.chars.length !== 128 && codecOptions.chars.length !== 256))\r\n        throw new Error(\"Encoding '\"+codecOptions.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");\r\n    \r\n    if (codecOptions.chars.length === 128) {\r\n        var asciiString = \"\";\r\n        for (var i = 0; i < 128; i++)\r\n            asciiString += String.fromCharCode(i);\r\n        codecOptions.chars = asciiString + codecOptions.chars;\r\n    }\r\n\r\n    this.decodeBuf = Buffer.from(codecOptions.chars, 'ucs2');\r\n    \r\n    // Encoding buffer.\r\n    var encodeBuf = Buffer.alloc(65536, iconv.defaultCharSingleByte.charCodeAt(0));\r\n\r\n    for (var i = 0; i < codecOptions.chars.length; i++)\r\n        encodeBuf[codecOptions.chars.charCodeAt(i)] = i;\r\n\r\n    this.encodeBuf = encodeBuf;\r\n}\r\n\r\nSBCSCodec.prototype.encoder = SBCSEncoder;\r\nSBCSCodec.prototype.decoder = SBCSDecoder;\r\n\r\n\r\nfunction SBCSEncoder(options, codec) {\r\n    this.encodeBuf = codec.encodeBuf;\r\n}\r\n\r\nSBCSEncoder.prototype.write = function(str) {\r\n    var buf = Buffer.alloc(str.length);\r\n    for (var i = 0; i < str.length; i++)\r\n        buf[i] = this.encodeBuf[str.charCodeAt(i)];\r\n    \r\n    return buf;\r\n}\r\n\r\nSBCSEncoder.prototype.end = function() {\r\n}\r\n\r\n\r\nfunction SBCSDecoder(options, codec) {\r\n    this.decodeBuf = codec.decodeBuf;\r\n}\r\n\r\nSBCSDecoder.prototype.write = function(buf) {\r\n    // Strings are immutable in JS -> we use ucs2 buffer to speed up computations.\r\n    var decodeBuf = this.decodeBuf;\r\n    var newBuf = Buffer.alloc(buf.length*2);\r\n    var idx1 = 0, idx2 = 0;\r\n    for (var i = 0; i < buf.length; i++) {\r\n        idx1 = buf[i]*2; idx2 = i*2;\r\n        newBuf[idx2] = decodeBuf[idx1];\r\n        newBuf[idx2+1] = decodeBuf[idx1+1];\r\n    }\r\n    return newBuf.toString('ucs2');\r\n}\r\n\r\nSBCSDecoder.prototype.end = function() {\r\n}\r\n","'use strict'\r\n\r\nexports.byteLength = byteLength\r\nexports.toByteArray = toByteArray\r\nexports.fromByteArray = fromByteArray\r\n\r\nvar lookup = []\r\nvar revLookup = []\r\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\r\n\r\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\r\nfor (var i = 0, len = code.length; i < len; ++i) {\r\n  lookup[i] = code[i]\r\n  revLookup[code.charCodeAt(i)] = i\r\n}\r\n\r\n// Support decoding URL-safe base64 strings, as Node.js does.\r\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\r\nrevLookup['-'.charCodeAt(0)] = 62\r\nrevLookup['_'.charCodeAt(0)] = 63\r\n\r\nfunction getLens (b64) {\r\n  var len = b64.length\r\n\r\n  if (len % 4 > 0) {\r\n    throw new Error('Invalid string. Length must be a multiple of 4')\r\n  }\r\n\r\n  // Trim off extra bytes after placeholder bytes are found\r\n  // See: https://github.com/beatgammit/base64-js/issues/42\r\n  var validLen = b64.indexOf('=')\r\n  if (validLen === -1) validLen = len\r\n\r\n  var placeHoldersLen = validLen === len\r\n    ? 0\r\n    : 4 - (validLen % 4)\r\n\r\n  return [validLen, placeHoldersLen]\r\n}\r\n\r\n// base64 is 4/3 + up to two characters of the original data\r\nfunction byteLength (b64) {\r\n  var lens = getLens(b64)\r\n  var validLen = lens[0]\r\n  var placeHoldersLen = lens[1]\r\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\r\n}\r\n\r\nfunction _byteLength (b64, validLen, placeHoldersLen) {\r\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\r\n}\r\n\r\nfunction toByteArray (b64) {\r\n  var tmp\r\n  var lens = getLens(b64)\r\n  var validLen = lens[0]\r\n  var placeHoldersLen = lens[1]\r\n\r\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\r\n\r\n  var curByte = 0\r\n\r\n  // if there are placeholders, only get up to the last complete 4 chars\r\n  var len = placeHoldersLen > 0\r\n    ? validLen - 4\r\n    : validLen\r\n\r\n  var i\r\n  for (i = 0; i < len; i += 4) {\r\n    tmp =\r\n      (revLookup[b64.charCodeAt(i)] << 18) |\r\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\r\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\r\n      revLookup[b64.charCodeAt(i + 3)]\r\n    arr[curByte++] = (tmp >> 16) & 0xFF\r\n    arr[curByte++] = (tmp >> 8) & 0xFF\r\n    arr[curByte++] = tmp & 0xFF\r\n  }\r\n\r\n  if (placeHoldersLen === 2) {\r\n    tmp =\r\n      (revLookup[b64.charCodeAt(i)] << 2) |\r\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\r\n    arr[curByte++] = tmp & 0xFF\r\n  }\r\n\r\n  if (placeHoldersLen === 1) {\r\n    tmp =\r\n      (revLookup[b64.charCodeAt(i)] << 10) |\r\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\r\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\r\n    arr[curByte++] = (tmp >> 8) & 0xFF\r\n    arr[curByte++] = tmp & 0xFF\r\n  }\r\n\r\n  return arr\r\n}\r\n\r\nfunction tripletToBase64 (num) {\r\n  return lookup[num >> 18 & 0x3F] +\r\n    lookup[num >> 12 & 0x3F] +\r\n    lookup[num >> 6 & 0x3F] +\r\n    lookup[num & 0x3F]\r\n}\r\n\r\nfunction encodeChunk (uint8, start, end) {\r\n  var tmp\r\n  var output = []\r\n  for (var i = start; i < end; i += 3) {\r\n    tmp =\r\n      ((uint8[i] << 16) & 0xFF0000) +\r\n      ((uint8[i + 1] << 8) & 0xFF00) +\r\n      (uint8[i + 2] & 0xFF)\r\n    output.push(tripletToBase64(tmp))\r\n  }\r\n  return output.join('')\r\n}\r\n\r\nfunction fromByteArray (uint8) {\r\n  var tmp\r\n  var len = uint8.length\r\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\r\n  var parts = []\r\n  var maxChunkLength = 16383 // must be multiple of 3\r\n\r\n  // go through the array every three bytes, we'll deal with trailing stuff later\r\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\r\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\r\n  }\r\n\r\n  // pad the end with zeros, but make sure to not forget the extra bytes\r\n  if (extraBytes === 1) {\r\n    tmp = uint8[len - 1]\r\n    parts.push(\r\n      lookup[tmp >> 2] +\r\n      lookup[(tmp << 4) & 0x3F] +\r\n      '=='\r\n    )\r\n  } else if (extraBytes === 2) {\r\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\r\n    parts.push(\r\n      lookup[tmp >> 10] +\r\n      lookup[(tmp >> 4) & 0x3F] +\r\n      lookup[(tmp << 2) & 0x3F] +\r\n      '='\r\n    )\r\n  }\r\n\r\n  return parts.join('')\r\n}\r\n","\"use strict\";\r\n\r\n// Update this array if you add/rename/remove files in this directory.\r\n// We support Browserify by skipping automatic module discovery and requiring modules directly.\r\nvar modules = [\r\n    require(\"./internal\"),\r\n    require(\"./utf16\"),\r\n    require(\"./utf7\"),\r\n    require(\"./sbcs-codec\"),\r\n    require(\"./sbcs-data\"),\r\n    require(\"./sbcs-data-generated\"),\r\n    require(\"./dbcs-codec\"),\r\n    require(\"./dbcs-data\"),\r\n];\r\n\r\n// Put all encoding/alias/codec definitions to single object and export it. \r\nfor (var i = 0; i < modules.length; i++) {\r\n    var module = modules[i];\r\n    for (var enc in module)\r\n        if (Object.prototype.hasOwnProperty.call(module, enc))\r\n            exports[enc] = module[enc];\r\n}\r\n","\"use strict\";\r\nvar Buffer = require(\"safer-buffer\").Buffer;\r\n\r\n// Export Node.js internal encodings.\r\n\r\nmodule.exports = {\r\n    // Encodings\r\n    utf8:   { type: \"_internal\", bomAware: true},\r\n    cesu8:  { type: \"_internal\", bomAware: true},\r\n    unicode11utf8: \"utf8\",\r\n\r\n    ucs2:   { type: \"_internal\", bomAware: true},\r\n    utf16le: \"ucs2\",\r\n\r\n    binary: { type: \"_internal\" },\r\n    base64: { type: \"_internal\" },\r\n    hex:    { type: \"_internal\" },\r\n\r\n    // Codec.\r\n    _internal: InternalCodec,\r\n};\r\n\r\n//------------------------------------------------------------------------------\r\n\r\nfunction InternalCodec(codecOptions, iconv) {\r\n    this.enc = codecOptions.encodingName;\r\n    this.bomAware = codecOptions.bomAware;\r\n\r\n    if (this.enc === \"base64\")\r\n        this.encoder = InternalEncoderBase64;\r\n    else if (this.enc === \"cesu8\") {\r\n        this.enc = \"utf8\"; // Use utf8 for decoding.\r\n        this.encoder = InternalEncoderCesu8;\r\n\r\n        // Add decoder for versions of Node not supporting CESU-8\r\n        if (Buffer.from('eda0bdedb2a9', 'hex').toString() !== '') {\r\n            this.decoder = InternalDecoderCesu8;\r\n            this.defaultCharUnicode = iconv.defaultCharUnicode;\r\n        }\r\n    }\r\n}\r\n\r\nInternalCodec.prototype.encoder = InternalEncoder;\r\nInternalCodec.prototype.decoder = InternalDecoder;\r\n\r\n//------------------------------------------------------------------------------\r\n\r\n// We use node.js internal decoder. Its signature is the same as ours.\r\nvar StringDecoder = require('string_decoder').StringDecoder;\r\n\r\nif (!StringDecoder.prototype.end) // Node v0.8 doesn't have this method.\r\n    StringDecoder.prototype.end = function() {};\r\n\r\n\r\nfunction InternalDecoder(options, codec) {\r\n    StringDecoder.call(this, codec.enc);\r\n}\r\n\r\nInternalDecoder.prototype = StringDecoder.prototype;\r\n\r\n\r\n//------------------------------------------------------------------------------\r\n// Encoder is mostly trivial\r\n\r\nfunction InternalEncoder(options, codec) {\r\n    this.enc = codec.enc;\r\n}\r\n\r\nInternalEncoder.prototype.write = function(str) {\r\n    return Buffer.from(str, this.enc);\r\n}\r\n\r\nInternalEncoder.prototype.end = function() {\r\n}\r\n\r\n\r\n//------------------------------------------------------------------------------\r\n// Except base64 encoder, which must keep its state.\r\n\r\nfunction InternalEncoderBase64(options, codec) {\r\n    this.prevStr = '';\r\n}\r\n\r\nInternalEncoderBase64.prototype.write = function(str) {\r\n    str = this.prevStr + str;\r\n    var completeQuads = str.length - (str.length % 4);\r\n    this.prevStr = str.slice(completeQuads);\r\n    str = str.slice(0, completeQuads);\r\n\r\n    return Buffer.from(str, \"base64\");\r\n}\r\n\r\nInternalEncoderBase64.prototype.end = function() {\r\n    return Buffer.from(this.prevStr, \"base64\");\r\n}\r\n\r\n\r\n//------------------------------------------------------------------------------\r\n// CESU-8 encoder is also special.\r\n\r\nfunction InternalEncoderCesu8(options, codec) {\r\n}\r\n\r\nInternalEncoderCesu8.prototype.write = function(str) {\r\n    var buf = Buffer.alloc(str.length * 3), bufIdx = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var charCode = str.charCodeAt(i);\r\n        // Naive implementation, but it works because CESU-8 is especially easy\r\n        // to convert from UTF-16 (which all JS strings are encoded in).\r\n        if (charCode < 0x80)\r\n            buf[bufIdx++] = charCode;\r\n        else if (charCode < 0x800) {\r\n            buf[bufIdx++] = 0xC0 + (charCode >>> 6);\r\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\r\n        }\r\n        else { // charCode will always be < 0x10000 in javascript.\r\n            buf[bufIdx++] = 0xE0 + (charCode >>> 12);\r\n            buf[bufIdx++] = 0x80 + ((charCode >>> 6) & 0x3f);\r\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\r\n        }\r\n    }\r\n    return buf.slice(0, bufIdx);\r\n}\r\n\r\nInternalEncoderCesu8.prototype.end = function() {\r\n}\r\n\r\n//------------------------------------------------------------------------------\r\n// CESU-8 decoder is not implemented in Node v4.0+\r\n\r\nfunction InternalDecoderCesu8(options, codec) {\r\n    this.acc = 0;\r\n    this.contBytes = 0;\r\n    this.accBytes = 0;\r\n    this.defaultCharUnicode = codec.defaultCharUnicode;\r\n}\r\n\r\nInternalDecoderCesu8.prototype.write = function(buf) {\r\n    var acc = this.acc, contBytes = this.contBytes, accBytes = this.accBytes, \r\n        res = '';\r\n    for (var i = 0; i < buf.length; i++) {\r\n        var curByte = buf[i];\r\n        if ((curByte & 0xC0) !== 0x80) { // Leading byte\r\n            if (contBytes > 0) { // Previous code is invalid\r\n                res += this.defaultCharUnicode;\r\n                contBytes = 0;\r\n            }\r\n\r\n            if (curByte < 0x80) { // Single-byte code\r\n                res += String.fromCharCode(curByte);\r\n            } else if (curByte < 0xE0) { // Two-byte code\r\n                acc = curByte & 0x1F;\r\n                contBytes = 1; accBytes = 1;\r\n            } else if (curByte < 0xF0) { // Three-byte code\r\n                acc = curByte & 0x0F;\r\n                contBytes = 2; accBytes = 1;\r\n            } else { // Four or more are not supported for CESU-8.\r\n                res += this.defaultCharUnicode;\r\n            }\r\n        } else { // Continuation byte\r\n            if (contBytes > 0) { // We're waiting for it.\r\n                acc = (acc << 6) | (curByte & 0x3f);\r\n                contBytes--; accBytes++;\r\n                if (contBytes === 0) {\r\n                    // Check for overlong encoding, but support Modified UTF-8 (encoding NULL as C0 80)\r\n                    if (accBytes === 2 && acc < 0x80 && acc > 0)\r\n                        res += this.defaultCharUnicode;\r\n                    else if (accBytes === 3 && acc < 0x800)\r\n                        res += this.defaultCharUnicode;\r\n                    else\r\n                        // Actually add character.\r\n                        res += String.fromCharCode(acc);\r\n                }\r\n            } else { // Unexpected continuation byte\r\n                res += this.defaultCharUnicode;\r\n            }\r\n        }\r\n    }\r\n    this.acc = acc; this.contBytes = contBytes; this.accBytes = accBytes;\r\n    return res;\r\n}\r\n\r\nInternalDecoderCesu8.prototype.end = function() {\r\n    var res = 0;\r\n    if (this.contBytes > 0)\r\n        res += this.defaultCharUnicode;\r\n    return res;\r\n}\r\n","\"use strict\";\r\nvar Buffer = require(\"safer-buffer\").Buffer;\r\n\r\n// UTF-7 codec, according to https://tools.ietf.org/html/rfc2152\r\n// See also below a UTF-7-IMAP codec, according to http://tools.ietf.org/html/rfc3501#section-5.1.3\r\n\r\nexports.utf7 = Utf7Codec;\r\nexports.unicode11utf7 = 'utf7'; // Alias UNICODE-1-1-UTF-7\r\nfunction Utf7Codec(codecOptions, iconv) {\r\n    this.iconv = iconv;\r\n};\r\n\r\nUtf7Codec.prototype.encoder = Utf7Encoder;\r\nUtf7Codec.prototype.decoder = Utf7Decoder;\r\nUtf7Codec.prototype.bomAware = true;\r\n\r\n\r\n// -- Encoding\r\n\r\nvar nonDirectChars = /[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;\r\n\r\nfunction Utf7Encoder(options, codec) {\r\n    this.iconv = codec.iconv;\r\n}\r\n\r\nUtf7Encoder.prototype.write = function(str) {\r\n    // Naive implementation.\r\n    // Non-direct chars are encoded as \"+<base64>-\"; single \"+\" char is encoded as \"+-\".\r\n    return Buffer.from(str.replace(nonDirectChars, function(chunk) {\r\n        return \"+\" + (chunk === '+' ? '' : \r\n            this.iconv.encode(chunk, 'utf16-be').toString('base64').replace(/=+$/, '')) \r\n            + \"-\";\r\n    }.bind(this)));\r\n}\r\n\r\nUtf7Encoder.prototype.end = function() {\r\n}\r\n\r\n\r\n// -- Decoding\r\n\r\nfunction Utf7Decoder(options, codec) {\r\n    this.iconv = codec.iconv;\r\n    this.inBase64 = false;\r\n    this.base64Accum = '';\r\n}\r\n\r\nvar base64Regex = /[A-Za-z0-9\\/+]/;\r\nvar base64Chars = [];\r\nfor (var i = 0; i < 256; i++)\r\n    base64Chars[i] = base64Regex.test(String.fromCharCode(i));\r\n\r\nvar plusChar = '+'.charCodeAt(0), \r\n    minusChar = '-'.charCodeAt(0),\r\n    andChar = '&'.charCodeAt(0);\r\n\r\nUtf7Decoder.prototype.write = function(buf) {\r\n    var res = \"\", lastI = 0,\r\n        inBase64 = this.inBase64,\r\n        base64Accum = this.base64Accum;\r\n\r\n    // The decoder is more involved as we must handle chunks in stream.\r\n\r\n    for (var i = 0; i < buf.length; i++) {\r\n        if (!inBase64) { // We're in direct mode.\r\n            // Write direct chars until '+'\r\n            if (buf[i] == plusChar) {\r\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\r\n                lastI = i+1;\r\n                inBase64 = true;\r\n            }\r\n        } else { // We decode base64.\r\n            if (!base64Chars[buf[i]]) { // Base64 ended.\r\n                if (i == lastI && buf[i] == minusChar) {// \"+-\" -> \"+\"\r\n                    res += \"+\";\r\n                } else {\r\n                    var b64str = base64Accum + buf.slice(lastI, i).toString();\r\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\r\n                }\r\n\r\n                if (buf[i] != minusChar) // Minus is absorbed after base64.\r\n                    i--;\r\n\r\n                lastI = i+1;\r\n                inBase64 = false;\r\n                base64Accum = '';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!inBase64) {\r\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\r\n    } else {\r\n        var b64str = base64Accum + buf.slice(lastI).toString();\r\n\r\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\r\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\r\n        b64str = b64str.slice(0, canBeDecoded);\r\n\r\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\r\n    }\r\n\r\n    this.inBase64 = inBase64;\r\n    this.base64Accum = base64Accum;\r\n\r\n    return res;\r\n}\r\n\r\nUtf7Decoder.prototype.end = function() {\r\n    var res = \"\";\r\n    if (this.inBase64 && this.base64Accum.length > 0)\r\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\r\n\r\n    this.inBase64 = false;\r\n    this.base64Accum = '';\r\n    return res;\r\n}\r\n\r\n\r\n// UTF-7-IMAP codec.\r\n// RFC3501 Sec. 5.1.3 Modified UTF-7 (http://tools.ietf.org/html/rfc3501#section-5.1.3)\r\n// Differences:\r\n//  * Base64 part is started by \"&\" instead of \"+\"\r\n//  * Direct characters are 0x20-0x7E, except \"&\" (0x26)\r\n//  * In Base64, \",\" is used instead of \"/\"\r\n//  * Base64 must not be used to represent direct characters.\r\n//  * No implicit shift back from Base64 (should always end with '-')\r\n//  * String must end in non-shifted position.\r\n//  * \"-&\" while in base64 is not allowed.\r\n\r\n\r\nexports.utf7imap = Utf7IMAPCodec;\r\nfunction Utf7IMAPCodec(codecOptions, iconv) {\r\n    this.iconv = iconv;\r\n};\r\n\r\nUtf7IMAPCodec.prototype.encoder = Utf7IMAPEncoder;\r\nUtf7IMAPCodec.prototype.decoder = Utf7IMAPDecoder;\r\nUtf7IMAPCodec.prototype.bomAware = true;\r\n\r\n\r\n// -- Encoding\r\n\r\nfunction Utf7IMAPEncoder(options, codec) {\r\n    this.iconv = codec.iconv;\r\n    this.inBase64 = false;\r\n    this.base64Accum = Buffer.alloc(6);\r\n    this.base64AccumIdx = 0;\r\n}\r\n\r\nUtf7IMAPEncoder.prototype.write = function(str) {\r\n    var inBase64 = this.inBase64,\r\n        base64Accum = this.base64Accum,\r\n        base64AccumIdx = this.base64AccumIdx,\r\n        buf = Buffer.alloc(str.length*5 + 10), bufIdx = 0;\r\n\r\n    for (var i = 0; i < str.length; i++) {\r\n        var uChar = str.charCodeAt(i);\r\n        if (0x20 <= uChar && uChar <= 0x7E) { // Direct character or '&'.\r\n            if (inBase64) {\r\n                if (base64AccumIdx > 0) {\r\n                    bufIdx += buf.write(base64Accum.slice(0, base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\r\n                    base64AccumIdx = 0;\r\n                }\r\n\r\n                buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\r\n                inBase64 = false;\r\n            }\r\n\r\n            if (!inBase64) {\r\n                buf[bufIdx++] = uChar; // Write direct character\r\n\r\n                if (uChar === andChar)  // Ampersand -> '&-'\r\n                    buf[bufIdx++] = minusChar;\r\n            }\r\n\r\n        } else { // Non-direct character\r\n            if (!inBase64) {\r\n                buf[bufIdx++] = andChar; // Write '&', then go to base64 mode.\r\n                inBase64 = true;\r\n            }\r\n            if (inBase64) {\r\n                base64Accum[base64AccumIdx++] = uChar >> 8;\r\n                base64Accum[base64AccumIdx++] = uChar & 0xFF;\r\n\r\n                if (base64AccumIdx == base64Accum.length) {\r\n                    bufIdx += buf.write(base64Accum.toString('base64').replace(/\\//g, ','), bufIdx);\r\n                    base64AccumIdx = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    this.inBase64 = inBase64;\r\n    this.base64AccumIdx = base64AccumIdx;\r\n\r\n    return buf.slice(0, bufIdx);\r\n}\r\n\r\nUtf7IMAPEncoder.prototype.end = function() {\r\n    var buf = Buffer.alloc(10), bufIdx = 0;\r\n    if (this.inBase64) {\r\n        if (this.base64AccumIdx > 0) {\r\n            bufIdx += buf.write(this.base64Accum.slice(0, this.base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\r\n            this.base64AccumIdx = 0;\r\n        }\r\n\r\n        buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\r\n        this.inBase64 = false;\r\n    }\r\n\r\n    return buf.slice(0, bufIdx);\r\n}\r\n\r\n\r\n// -- Decoding\r\n\r\nfunction Utf7IMAPDecoder(options, codec) {\r\n    this.iconv = codec.iconv;\r\n    this.inBase64 = false;\r\n    this.base64Accum = '';\r\n}\r\n\r\nvar base64IMAPChars = base64Chars.slice();\r\nbase64IMAPChars[','.charCodeAt(0)] = true;\r\n\r\nUtf7IMAPDecoder.prototype.write = function(buf) {\r\n    var res = \"\", lastI = 0,\r\n        inBase64 = this.inBase64,\r\n        base64Accum = this.base64Accum;\r\n\r\n    // The decoder is more involved as we must handle chunks in stream.\r\n    // It is forgiving, closer to standard UTF-7 (for example, '-' is optional at the end).\r\n\r\n    for (var i = 0; i < buf.length; i++) {\r\n        if (!inBase64) { // We're in direct mode.\r\n            // Write direct chars until '&'\r\n            if (buf[i] == andChar) {\r\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\r\n                lastI = i+1;\r\n                inBase64 = true;\r\n            }\r\n        } else { // We decode base64.\r\n            if (!base64IMAPChars[buf[i]]) { // Base64 ended.\r\n                if (i == lastI && buf[i] == minusChar) { // \"&-\" -> \"&\"\r\n                    res += \"&\";\r\n                } else {\r\n                    var b64str = base64Accum + buf.slice(lastI, i).toString().replace(/,/g, '/');\r\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\r\n                }\r\n\r\n                if (buf[i] != minusChar) // Minus may be absorbed after base64.\r\n                    i--;\r\n\r\n                lastI = i+1;\r\n                inBase64 = false;\r\n                base64Accum = '';\r\n            }\r\n        }\r\n    }\r\n\r\n    if (!inBase64) {\r\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\r\n    } else {\r\n        var b64str = base64Accum + buf.slice(lastI).toString().replace(/,/g, '/');\r\n\r\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\r\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\r\n        b64str = b64str.slice(0, canBeDecoded);\r\n\r\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\r\n    }\r\n\r\n    this.inBase64 = inBase64;\r\n    this.base64Accum = base64Accum;\r\n\r\n    return res;\r\n}\r\n\r\nUtf7IMAPDecoder.prototype.end = function() {\r\n    var res = \"\";\r\n    if (this.inBase64 && this.base64Accum.length > 0)\r\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\r\n\r\n    this.inBase64 = false;\r\n    this.base64Accum = '';\r\n    return res;\r\n}\r\n\r\n\r\n","/**\r\n * Use the ImageData from a Canvas and turn the image in a 1-bit black and white image using dithering\r\n */\r\nclass CanvasDither {\r\n  /**\r\n     * Change the image to grayscale\r\n     *\r\n     * @param  {object}   image         The imageData of a Canvas 2d context\r\n     * @return {object}                 The resulting imageData\r\n     *\r\n     */\r\n  grayscale(image) {\r\n    for (let i = 0; i < image.data.length; i += 4) {\r\n      const luminance = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\r\n      image.data.fill(luminance, i, i + 3);\r\n    }\r\n\r\n    return image;\r\n  }\r\n\r\n  /**\r\n     * Change the image to blank and white using a simple threshold\r\n     *\r\n     * @param  {object}   image         The imageData of a Canvas 2d context\r\n     * @param  {number}   threshold     Threshold value (0-255)\r\n     * @return {object}                 The resulting imageData\r\n     *\r\n     */\r\n  threshold(image, threshold) {\r\n    for (let i = 0; i < image.data.length; i += 4) {\r\n      const luminance = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\r\n\r\n      const value = luminance < threshold ? 0 : 255;\r\n      image.data.fill(value, i, i + 3);\r\n    }\r\n\r\n    return image;\r\n  }\r\n\r\n  /**\r\n     * Change the image to blank and white using the Bayer algorithm\r\n     *\r\n     * @param  {object}   image         The imageData of a Canvas 2d context\r\n     * @param  {number}   threshold     Threshold value (0-255)\r\n     * @return {object}                 The resulting imageData\r\n     *\r\n     */\r\n  bayer(image, threshold) {\r\n    const thresholdMap = [\r\n      [15, 135, 45, 165],\r\n      [195, 75, 225, 105],\r\n      [60, 180, 30, 150],\r\n      [240, 120, 210, 90],\r\n    ];\r\n\r\n    for (let i = 0; i < image.data.length; i += 4) {\r\n      const luminance = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\r\n\r\n      const x = i / 4 % image.width;\r\n      const y = Math.floor(i / 4 / image.width);\r\n      const map = Math.floor((luminance + thresholdMap[x % 4][y % 4]) / 2);\r\n      const value = map < threshold ? 0 : 255;\r\n      image.data.fill(value, i, i + 3);\r\n    }\r\n\r\n    return image;\r\n  }\r\n\r\n  /**\r\n     * Change the image to blank and white using the Floyd-Steinberg algorithm\r\n     *\r\n     * @param  {object}   image         The imageData of a Canvas 2d context\r\n     * @return {object}                 The resulting imageData\r\n     *\r\n     */\r\n  floydsteinberg(image) {\r\n    const width = image.width;\r\n    const luminance = new Uint8ClampedArray(image.width * image.height);\r\n\r\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\r\n      luminance[l] = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\r\n    }\r\n\r\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\r\n      const value = luminance[l] < 129 ? 0 : 255;\r\n      const error = Math.floor((luminance[l] - value) / 16);\r\n      image.data.fill(value, i, i + 3);\r\n\r\n      luminance[l + 1] += error * 7;\r\n      luminance[l + width - 1] += error * 3;\r\n      luminance[l + width] += error * 5;\r\n      luminance[l + width + 1] += error * 1;\r\n    }\r\n\r\n    return image;\r\n  }\r\n\r\n  /**\r\n     * Change the image to blank and white using the Atkinson algorithm\r\n     *\r\n     * @param  {object}   image         The imageData of a Canvas 2d context\r\n     * @return {object}                 The resulting imageData\r\n     *\r\n     */\r\n  atkinson(image) {\r\n    const width = image.width;\r\n    const luminance = new Uint8ClampedArray(image.width * image.height);\r\n\r\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\r\n      luminance[l] = (image.data[i] * 0.299) + (image.data[i + 1] * 0.587) + (image.data[i + 2] * 0.114);\r\n    }\r\n\r\n    for (let l = 0, i = 0; i < image.data.length; l++, i += 4) {\r\n      const value = luminance[l] < 129 ? 0 : 255;\r\n      const error = Math.floor((luminance[l] - value) / 8);\r\n      image.data.fill(value, i, i + 3);\r\n\r\n      luminance[l + 1] += error;\r\n      luminance[l + 2] += error;\r\n      luminance[l + width - 1] += error;\r\n      luminance[l + width] += error;\r\n      luminance[l + width + 1] += error;\r\n      luminance[l + 2 * width] += error;\r\n    }\r\n\r\n    return image;\r\n  }\r\n}\r\n\r\nmodule.exports = new CanvasDither();\r\n","\"use strict\";\r\n\r\n// Manually added data to be used by sbcs codec in addition to generated one.\r\n\r\nmodule.exports = {\r\n    // Not supported by iconv, not sure why.\r\n    \"10029\": \"maccenteuro\",\r\n    \"maccenteuro\": {\r\n        \"type\": \"_sbcs\",\r\n        \"chars\": \"\"\r\n    },\r\n\r\n    \"808\": \"cp808\",\r\n    \"ibm808\": \"cp808\",\r\n    \"cp808\": {\r\n        \"type\": \"_sbcs\",\r\n        \"chars\": \"\"\r\n    },\r\n\r\n    \"mik\": {\r\n        \"type\": \"_sbcs\",\r\n        \"chars\": \"\"\r\n    },\r\n\r\n    // Aliases of generated encodings.\r\n    \"ascii8bit\": \"ascii\",\r\n    \"usascii\": \"ascii\",\r\n    \"ansix34\": \"ascii\",\r\n    \"ansix341968\": \"ascii\",\r\n    \"ansix341986\": \"ascii\",\r\n    \"csascii\": \"ascii\",\r\n    \"cp367\": \"ascii\",\r\n    \"ibm367\": \"ascii\",\r\n    \"isoir6\": \"ascii\",\r\n    \"iso646us\": \"ascii\",\r\n    \"iso646irv\": \"ascii\",\r\n    \"us\": \"ascii\",\r\n\r\n    \"latin1\": \"iso88591\",\r\n    \"latin2\": \"iso88592\",\r\n    \"latin3\": \"iso88593\",\r\n    \"latin4\": \"iso88594\",\r\n    \"latin5\": \"iso88599\",\r\n    \"latin6\": \"iso885910\",\r\n    \"latin7\": \"iso885913\",\r\n    \"latin8\": \"iso885914\",\r\n    \"latin9\": \"iso885915\",\r\n    \"latin10\": \"iso885916\",\r\n\r\n    \"csisolatin1\": \"iso88591\",\r\n    \"csisolatin2\": \"iso88592\",\r\n    \"csisolatin3\": \"iso88593\",\r\n    \"csisolatin4\": \"iso88594\",\r\n    \"csisolatincyrillic\": \"iso88595\",\r\n    \"csisolatinarabic\": \"iso88596\",\r\n    \"csisolatingreek\" : \"iso88597\",\r\n    \"csisolatinhebrew\": \"iso88598\",\r\n    \"csisolatin5\": \"iso88599\",\r\n    \"csisolatin6\": \"iso885910\",\r\n\r\n    \"l1\": \"iso88591\",\r\n    \"l2\": \"iso88592\",\r\n    \"l3\": \"iso88593\",\r\n    \"l4\": \"iso88594\",\r\n    \"l5\": \"iso88599\",\r\n    \"l6\": \"iso885910\",\r\n    \"l7\": \"iso885913\",\r\n    \"l8\": \"iso885914\",\r\n    \"l9\": \"iso885915\",\r\n    \"l10\": \"iso885916\",\r\n\r\n    \"isoir14\": \"iso646jp\",\r\n    \"isoir57\": \"iso646cn\",\r\n    \"isoir100\": \"iso88591\",\r\n    \"isoir101\": \"iso88592\",\r\n    \"isoir109\": \"iso88593\",\r\n    \"isoir110\": \"iso88594\",\r\n    \"isoir144\": \"iso88595\",\r\n    \"isoir127\": \"iso88596\",\r\n    \"isoir126\": \"iso88597\",\r\n    \"isoir138\": \"iso88598\",\r\n    \"isoir148\": \"iso88599\",\r\n    \"isoir157\": \"iso885910\",\r\n    \"isoir166\": \"tis620\",\r\n    \"isoir179\": \"iso885913\",\r\n    \"isoir199\": \"iso885914\",\r\n    \"isoir203\": \"iso885915\",\r\n    \"isoir226\": \"iso885916\",\r\n\r\n    \"cp819\": \"iso88591\",\r\n    \"ibm819\": \"iso88591\",\r\n\r\n    \"cyrillic\": \"iso88595\",\r\n\r\n    \"arabic\": \"iso88596\",\r\n    \"arabic8\": \"iso88596\",\r\n    \"ecma114\": \"iso88596\",\r\n    \"asmo708\": \"iso88596\",\r\n\r\n    \"greek\" : \"iso88597\",\r\n    \"greek8\" : \"iso88597\",\r\n    \"ecma118\" : \"iso88597\",\r\n    \"elot928\" : \"iso88597\",\r\n\r\n    \"hebrew\": \"iso88598\",\r\n    \"hebrew8\": \"iso88598\",\r\n\r\n    \"turkish\": \"iso88599\",\r\n    \"turkish8\": \"iso88599\",\r\n\r\n    \"thai\": \"iso885911\",\r\n    \"thai8\": \"iso885911\",\r\n\r\n    \"celtic\": \"iso885914\",\r\n    \"celtic8\": \"iso885914\",\r\n    \"isoceltic\": \"iso885914\",\r\n\r\n    \"tis6200\": \"tis620\",\r\n    \"tis62025291\": \"tis620\",\r\n    \"tis62025330\": \"tis620\",\r\n\r\n    \"10000\": \"macroman\",\r\n    \"10006\": \"macgreek\",\r\n    \"10007\": \"maccyrillic\",\r\n    \"10079\": \"maciceland\",\r\n    \"10081\": \"macturkish\",\r\n\r\n    \"cspc8codepage437\": \"cp437\",\r\n    \"cspc775baltic\": \"cp775\",\r\n    \"cspc850multilingual\": \"cp850\",\r\n    \"cspcp852\": \"cp852\",\r\n    \"cspc862latinhebrew\": \"cp862\",\r\n    \"cpgr\": \"cp869\",\r\n\r\n    \"msee\": \"cp1250\",\r\n    \"mscyrl\": \"cp1251\",\r\n    \"msansi\": \"cp1252\",\r\n    \"msgreek\": \"cp1253\",\r\n    \"msturk\": \"cp1254\",\r\n    \"mshebr\": \"cp1255\",\r\n    \"msarab\": \"cp1256\",\r\n    \"winbaltrim\": \"cp1257\",\r\n\r\n    \"cp20866\": \"koi8r\",\r\n    \"20866\": \"koi8r\",\r\n    \"ibm878\": \"koi8r\",\r\n    \"cskoi8r\": \"koi8r\",\r\n\r\n    \"cp21866\": \"koi8u\",\r\n    \"21866\": \"koi8u\",\r\n    \"ibm1168\": \"koi8u\",\r\n\r\n    \"strk10482002\": \"rk1048\",\r\n\r\n    \"tcvn5712\": \"tcvn\",\r\n    \"tcvn57121\": \"tcvn\",\r\n\r\n    \"gb198880\": \"iso646cn\",\r\n    \"cn\": \"iso646cn\",\r\n\r\n    \"csiso14jisc6220ro\": \"iso646jp\",\r\n    \"jisc62201969ro\": \"iso646jp\",\r\n    \"jp\": \"iso646jp\",\r\n\r\n    \"cshproman8\": \"hproman8\",\r\n    \"r8\": \"hproman8\",\r\n    \"roman8\": \"hproman8\",\r\n    \"xroman8\": \"hproman8\",\r\n    \"ibm1051\": \"hproman8\",\r\n\r\n    \"mac\": \"macintosh\",\r\n    \"csmacintosh\": \"macintosh\",\r\n};\r\n\r\n","// Copyright Joyent, Inc. and other Node contributors.\r\n//\r\n// Permission is hereby granted, free of charge, to any person obtaining a\r\n// copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to permit\r\n// persons to whom the Software is furnished to do so, subject to the\r\n// following conditions:\r\n//\r\n// The above copyright notice and this permission notice shall be included\r\n// in all copies or substantial portions of the Software.\r\n//\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\r\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\r\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\r\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\r\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n'use strict';\r\n\r\n/*<replacement>*/\r\n\r\nvar Buffer = require('safe-buffer').Buffer;\r\n/*</replacement>*/\r\n\r\nvar isEncoding = Buffer.isEncoding || function (encoding) {\r\n  encoding = '' + encoding;\r\n  switch (encoding && encoding.toLowerCase()) {\r\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\r\n      return true;\r\n    default:\r\n      return false;\r\n  }\r\n};\r\n\r\nfunction _normalizeEncoding(enc) {\r\n  if (!enc) return 'utf8';\r\n  var retried;\r\n  while (true) {\r\n    switch (enc) {\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return 'utf8';\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return 'utf16le';\r\n      case 'latin1':\r\n      case 'binary':\r\n        return 'latin1';\r\n      case 'base64':\r\n      case 'ascii':\r\n      case 'hex':\r\n        return enc;\r\n      default:\r\n        if (retried) return; // undefined\r\n        enc = ('' + enc).toLowerCase();\r\n        retried = true;\r\n    }\r\n  }\r\n};\r\n\r\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\r\n// modules monkey-patch it to support additional encodings\r\nfunction normalizeEncoding(enc) {\r\n  var nenc = _normalizeEncoding(enc);\r\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\r\n  return nenc || enc;\r\n}\r\n\r\n// StringDecoder provides an interface for efficiently splitting a series of\r\n// buffers into a series of JS strings without breaking apart multi-byte\r\n// characters.\r\nexports.StringDecoder = StringDecoder;\r\nfunction StringDecoder(encoding) {\r\n  this.encoding = normalizeEncoding(encoding);\r\n  var nb;\r\n  switch (this.encoding) {\r\n    case 'utf16le':\r\n      this.text = utf16Text;\r\n      this.end = utf16End;\r\n      nb = 4;\r\n      break;\r\n    case 'utf8':\r\n      this.fillLast = utf8FillLast;\r\n      nb = 4;\r\n      break;\r\n    case 'base64':\r\n      this.text = base64Text;\r\n      this.end = base64End;\r\n      nb = 3;\r\n      break;\r\n    default:\r\n      this.write = simpleWrite;\r\n      this.end = simpleEnd;\r\n      return;\r\n  }\r\n  this.lastNeed = 0;\r\n  this.lastTotal = 0;\r\n  this.lastChar = Buffer.allocUnsafe(nb);\r\n}\r\n\r\nStringDecoder.prototype.write = function (buf) {\r\n  if (buf.length === 0) return '';\r\n  var r;\r\n  var i;\r\n  if (this.lastNeed) {\r\n    r = this.fillLast(buf);\r\n    if (r === undefined) return '';\r\n    i = this.lastNeed;\r\n    this.lastNeed = 0;\r\n  } else {\r\n    i = 0;\r\n  }\r\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\r\n  return r || '';\r\n};\r\n\r\nStringDecoder.prototype.end = utf8End;\r\n\r\n// Returns only complete characters in a Buffer\r\nStringDecoder.prototype.text = utf8Text;\r\n\r\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\r\nStringDecoder.prototype.fillLast = function (buf) {\r\n  if (this.lastNeed <= buf.length) {\r\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\r\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\r\n  }\r\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\r\n  this.lastNeed -= buf.length;\r\n};\r\n\r\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\r\n// continuation byte. If an invalid byte is detected, -2 is returned.\r\nfunction utf8CheckByte(byte) {\r\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\r\n  return byte >> 6 === 0x02 ? -1 : -2;\r\n}\r\n\r\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\r\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\r\n// needed to complete the UTF-8 character (if applicable) are returned.\r\nfunction utf8CheckIncomplete(self, buf, i) {\r\n  var j = buf.length - 1;\r\n  if (j < i) return 0;\r\n  var nb = utf8CheckByte(buf[j]);\r\n  if (nb >= 0) {\r\n    if (nb > 0) self.lastNeed = nb - 1;\r\n    return nb;\r\n  }\r\n  if (--j < i || nb === -2) return 0;\r\n  nb = utf8CheckByte(buf[j]);\r\n  if (nb >= 0) {\r\n    if (nb > 0) self.lastNeed = nb - 2;\r\n    return nb;\r\n  }\r\n  if (--j < i || nb === -2) return 0;\r\n  nb = utf8CheckByte(buf[j]);\r\n  if (nb >= 0) {\r\n    if (nb > 0) {\r\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\r\n    }\r\n    return nb;\r\n  }\r\n  return 0;\r\n}\r\n\r\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\r\n// needed or are available. If we see a non-continuation byte where we expect\r\n// one, we \"replace\" the validated continuation bytes we've seen so far with\r\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\r\n// behavior. The continuation byte check is included three times in the case\r\n// where all of the continuation bytes for a character exist in the same buffer.\r\n// It is also done this way as a slight performance increase instead of using a\r\n// loop.\r\nfunction utf8CheckExtraBytes(self, buf, p) {\r\n  if ((buf[0] & 0xC0) !== 0x80) {\r\n    self.lastNeed = 0;\r\n    return '\\ufffd';\r\n  }\r\n  if (self.lastNeed > 1 && buf.length > 1) {\r\n    if ((buf[1] & 0xC0) !== 0x80) {\r\n      self.lastNeed = 1;\r\n      return '\\ufffd';\r\n    }\r\n    if (self.lastNeed > 2 && buf.length > 2) {\r\n      if ((buf[2] & 0xC0) !== 0x80) {\r\n        self.lastNeed = 2;\r\n        return '\\ufffd';\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\r\nfunction utf8FillLast(buf) {\r\n  var p = this.lastTotal - this.lastNeed;\r\n  var r = utf8CheckExtraBytes(this, buf, p);\r\n  if (r !== undefined) return r;\r\n  if (this.lastNeed <= buf.length) {\r\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\r\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\r\n  }\r\n  buf.copy(this.lastChar, p, 0, buf.length);\r\n  this.lastNeed -= buf.length;\r\n}\r\n\r\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\r\n// partial character, the character's bytes are buffered until the required\r\n// number of bytes are available.\r\nfunction utf8Text(buf, i) {\r\n  var total = utf8CheckIncomplete(this, buf, i);\r\n  if (!this.lastNeed) return buf.toString('utf8', i);\r\n  this.lastTotal = total;\r\n  var end = buf.length - (total - this.lastNeed);\r\n  buf.copy(this.lastChar, 0, end);\r\n  return buf.toString('utf8', i, end);\r\n}\r\n\r\n// For UTF-8, a replacement character is added when ending on a partial\r\n// character.\r\nfunction utf8End(buf) {\r\n  var r = buf && buf.length ? this.write(buf) : '';\r\n  if (this.lastNeed) return r + '\\ufffd';\r\n  return r;\r\n}\r\n\r\n// UTF-16LE typically needs two bytes per character, but even if we have an even\r\n// number of bytes available, we need to check if we end on a leading/high\r\n// surrogate. In that case, we need to wait for the next two bytes in order to\r\n// decode the last character properly.\r\nfunction utf16Text(buf, i) {\r\n  if ((buf.length - i) % 2 === 0) {\r\n    var r = buf.toString('utf16le', i);\r\n    if (r) {\r\n      var c = r.charCodeAt(r.length - 1);\r\n      if (c >= 0xD800 && c <= 0xDBFF) {\r\n        this.lastNeed = 2;\r\n        this.lastTotal = 4;\r\n        this.lastChar[0] = buf[buf.length - 2];\r\n        this.lastChar[1] = buf[buf.length - 1];\r\n        return r.slice(0, -1);\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n  this.lastNeed = 1;\r\n  this.lastTotal = 2;\r\n  this.lastChar[0] = buf[buf.length - 1];\r\n  return buf.toString('utf16le', i, buf.length - 1);\r\n}\r\n\r\n// For UTF-16LE we do not explicitly append special replacement characters if we\r\n// end on a partial character, we simply let v8 handle that.\r\nfunction utf16End(buf) {\r\n  var r = buf && buf.length ? this.write(buf) : '';\r\n  if (this.lastNeed) {\r\n    var end = this.lastTotal - this.lastNeed;\r\n    return r + this.lastChar.toString('utf16le', 0, end);\r\n  }\r\n  return r;\r\n}\r\n\r\nfunction base64Text(buf, i) {\r\n  var n = (buf.length - i) % 3;\r\n  if (n === 0) return buf.toString('base64', i);\r\n  this.lastNeed = 3 - n;\r\n  this.lastTotal = 3;\r\n  if (n === 1) {\r\n    this.lastChar[0] = buf[buf.length - 1];\r\n  } else {\r\n    this.lastChar[0] = buf[buf.length - 2];\r\n    this.lastChar[1] = buf[buf.length - 1];\r\n  }\r\n  return buf.toString('base64', i, buf.length - n);\r\n}\r\n\r\nfunction base64End(buf) {\r\n  var r = buf && buf.length ? this.write(buf) : '';\r\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\r\n  return r;\r\n}\r\n\r\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\r\nfunction simpleWrite(buf) {\r\n  return buf.toString(this.encoding);\r\n}\r\n\r\nfunction simpleEnd(buf) {\r\n  return buf && buf.length ? this.write(buf) : '';\r\n}","\"use strict\";\r\nvar Buffer = require(\"safer-buffer\").Buffer;\r\n\r\n// Note: UTF16-LE (or UCS2) codec is Node.js native. See encodings/internal.js\r\n\r\n// == UTF16-BE codec. ==========================================================\r\n\r\nexports.utf16be = Utf16BECodec;\r\nfunction Utf16BECodec() {\r\n}\r\n\r\nUtf16BECodec.prototype.encoder = Utf16BEEncoder;\r\nUtf16BECodec.prototype.decoder = Utf16BEDecoder;\r\nUtf16BECodec.prototype.bomAware = true;\r\n\r\n\r\n// -- Encoding\r\n\r\nfunction Utf16BEEncoder() {\r\n}\r\n\r\nUtf16BEEncoder.prototype.write = function(str) {\r\n    var buf = Buffer.from(str, 'ucs2');\r\n    for (var i = 0; i < buf.length; i += 2) {\r\n        var tmp = buf[i]; buf[i] = buf[i+1]; buf[i+1] = tmp;\r\n    }\r\n    return buf;\r\n}\r\n\r\nUtf16BEEncoder.prototype.end = function() {\r\n}\r\n\r\n\r\n// -- Decoding\r\n\r\nfunction Utf16BEDecoder() {\r\n    this.overflowByte = -1;\r\n}\r\n\r\nUtf16BEDecoder.prototype.write = function(buf) {\r\n    if (buf.length == 0)\r\n        return '';\r\n\r\n    var buf2 = Buffer.alloc(buf.length + 1),\r\n        i = 0, j = 0;\r\n\r\n    if (this.overflowByte !== -1) {\r\n        buf2[0] = buf[0];\r\n        buf2[1] = this.overflowByte;\r\n        i = 1; j = 2;\r\n    }\r\n\r\n    for (; i < buf.length-1; i += 2, j+= 2) {\r\n        buf2[j] = buf[i+1];\r\n        buf2[j+1] = buf[i];\r\n    }\r\n\r\n    this.overflowByte = (i == buf.length-1) ? buf[buf.length-1] : -1;\r\n\r\n    return buf2.slice(0, j).toString('ucs2');\r\n}\r\n\r\nUtf16BEDecoder.prototype.end = function() {\r\n}\r\n\r\n\r\n// == UTF-16 codec =============================================================\r\n// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.\r\n// Defaults to UTF-16LE, as it's prevalent and default in Node.\r\n// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le\r\n// Decoder default can be changed: iconv.decode(buf, 'utf16', {defaultEncoding: 'utf-16be'});\r\n\r\n// Encoder uses UTF-16LE and prepends BOM (which can be overridden with addBOM: false).\r\n\r\nexports.utf16 = Utf16Codec;\r\nfunction Utf16Codec(codecOptions, iconv) {\r\n    this.iconv = iconv;\r\n}\r\n\r\nUtf16Codec.prototype.encoder = Utf16Encoder;\r\nUtf16Codec.prototype.decoder = Utf16Decoder;\r\n\r\n\r\n// -- Encoding (pass-through)\r\n\r\nfunction Utf16Encoder(options, codec) {\r\n    options = options || {};\r\n    if (options.addBOM === undefined)\r\n        options.addBOM = true;\r\n    this.encoder = codec.iconv.getEncoder('utf-16le', options);\r\n}\r\n\r\nUtf16Encoder.prototype.write = function(str) {\r\n    return this.encoder.write(str);\r\n}\r\n\r\nUtf16Encoder.prototype.end = function() {\r\n    return this.encoder.end();\r\n}\r\n\r\n\r\n// -- Decoding\r\n\r\nfunction Utf16Decoder(options, codec) {\r\n    this.decoder = null;\r\n    this.initialBytes = [];\r\n    this.initialBytesLen = 0;\r\n\r\n    this.options = options || {};\r\n    this.iconv = codec.iconv;\r\n}\r\n\r\nUtf16Decoder.prototype.write = function(buf) {\r\n    if (!this.decoder) {\r\n        // Codec is not chosen yet. Accumulate initial bytes.\r\n        this.initialBytes.push(buf);\r\n        this.initialBytesLen += buf.length;\r\n        \r\n        if (this.initialBytesLen < 16) // We need more bytes to use space heuristic (see below)\r\n            return '';\r\n\r\n        // We have enough bytes -> detect endianness.\r\n        var buf = Buffer.concat(this.initialBytes),\r\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\r\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\r\n        this.initialBytes.length = this.initialBytesLen = 0;\r\n    }\r\n\r\n    return this.decoder.write(buf);\r\n}\r\n\r\nUtf16Decoder.prototype.end = function() {\r\n    if (!this.decoder) {\r\n        var buf = Buffer.concat(this.initialBytes),\r\n            encoding = detectEncoding(buf, this.options.defaultEncoding);\r\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\r\n\r\n        var res = this.decoder.write(buf),\r\n            trail = this.decoder.end();\r\n\r\n        return trail ? (res + trail) : res;\r\n    }\r\n    return this.decoder.end();\r\n}\r\n\r\nfunction detectEncoding(buf, defaultEncoding) {\r\n    var enc = defaultEncoding || 'utf-16le';\r\n\r\n    if (buf.length >= 2) {\r\n        // Check BOM.\r\n        if (buf[0] == 0xFE && buf[1] == 0xFF) // UTF-16BE BOM\r\n            enc = 'utf-16be';\r\n        else if (buf[0] == 0xFF && buf[1] == 0xFE) // UTF-16LE BOM\r\n            enc = 'utf-16le';\r\n        else {\r\n            // No BOM found. Try to deduce encoding from initial content.\r\n            // Most of the time, the content has ASCII chars (U+00**), but the opposite (U+**00) is uncommon.\r\n            // So, we count ASCII as if it was LE or BE, and decide from that.\r\n            var asciiCharsLE = 0, asciiCharsBE = 0, // Counts of chars in both positions\r\n                _len = Math.min(buf.length - (buf.length % 2), 64); // Len is always even.\r\n\r\n            for (var i = 0; i < _len; i += 2) {\r\n                if (buf[i] === 0 && buf[i+1] !== 0) asciiCharsBE++;\r\n                if (buf[i] !== 0 && buf[i+1] === 0) asciiCharsLE++;\r\n            }\r\n\r\n            if (asciiCharsBE > asciiCharsLE)\r\n                enc = 'utf-16be';\r\n            else if (asciiCharsBE < asciiCharsLE)\r\n                enc = 'utf-16le';\r\n        }\r\n    }\r\n\r\n    return enc;\r\n}\r\n\r\n\r\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\r\n/* eslint-disable node/no-deprecated-api */\r\nvar buffer = require('buffer')\r\nvar Buffer = buffer.Buffer\r\n\r\n// alternative to using Object.keys for old browsers\r\nfunction copyProps (src, dst) {\r\n  for (var key in src) {\r\n    dst[key] = src[key]\r\n  }\r\n}\r\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\r\n  module.exports = buffer\r\n} else {\r\n  // Copy properties from require('buffer')\r\n  copyProps(buffer, exports)\r\n  exports.Buffer = SafeBuffer\r\n}\r\n\r\nfunction SafeBuffer (arg, encodingOrOffset, length) {\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.prototype = Object.create(Buffer.prototype)\r\n\r\n// Copy static methods from Buffer\r\ncopyProps(Buffer, SafeBuffer)\r\n\r\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\r\n  if (typeof arg === 'number') {\r\n    throw new TypeError('Argument must not be a number')\r\n  }\r\n  return Buffer(arg, encodingOrOffset, length)\r\n}\r\n\r\nSafeBuffer.alloc = function (size, fill, encoding) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  var buf = Buffer(size)\r\n  if (fill !== undefined) {\r\n    if (typeof encoding === 'string') {\r\n      buf.fill(fill, encoding)\r\n    } else {\r\n      buf.fill(fill)\r\n    }\r\n  } else {\r\n    buf.fill(0)\r\n  }\r\n  return buf\r\n}\r\n\r\nSafeBuffer.allocUnsafe = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return Buffer(size)\r\n}\r\n\r\nSafeBuffer.allocUnsafeSlow = function (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('Argument must be a number')\r\n  }\r\n  return buffer.SlowBuffer(size)\r\n}\r\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\r\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\r\n  var e, m\r\n  var eLen = (nBytes * 8) - mLen - 1\r\n  var eMax = (1 << eLen) - 1\r\n  var eBias = eMax >> 1\r\n  var nBits = -7\r\n  var i = isLE ? (nBytes - 1) : 0\r\n  var d = isLE ? -1 : 1\r\n  var s = buffer[offset + i]\r\n\r\n  i += d\r\n\r\n  e = s & ((1 << (-nBits)) - 1)\r\n  s >>= (-nBits)\r\n  nBits += eLen\r\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\r\n\r\n  m = e & ((1 << (-nBits)) - 1)\r\n  e >>= (-nBits)\r\n  nBits += mLen\r\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\r\n\r\n  if (e === 0) {\r\n    e = 1 - eBias\r\n  } else if (e === eMax) {\r\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\r\n  } else {\r\n    m = m + Math.pow(2, mLen)\r\n    e = e - eBias\r\n  }\r\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\r\n}\r\n\r\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\r\n  var e, m, c\r\n  var eLen = (nBytes * 8) - mLen - 1\r\n  var eMax = (1 << eLen) - 1\r\n  var eBias = eMax >> 1\r\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\r\n  var i = isLE ? 0 : (nBytes - 1)\r\n  var d = isLE ? 1 : -1\r\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\r\n\r\n  value = Math.abs(value)\r\n\r\n  if (isNaN(value) || value === Infinity) {\r\n    m = isNaN(value) ? 1 : 0\r\n    e = eMax\r\n  } else {\r\n    e = Math.floor(Math.log(value) / Math.LN2)\r\n    if (value * (c = Math.pow(2, -e)) < 1) {\r\n      e--\r\n      c *= 2\r\n    }\r\n    if (e + eBias >= 1) {\r\n      value += rt / c\r\n    } else {\r\n      value += rt * Math.pow(2, 1 - eBias)\r\n    }\r\n    if (value * c >= 2) {\r\n      e++\r\n      c /= 2\r\n    }\r\n\r\n    if (e + eBias >= eMax) {\r\n      m = 0\r\n      e = eMax\r\n    } else if (e + eBias >= 1) {\r\n      m = ((value * c) - 1) * Math.pow(2, mLen)\r\n      e = e + eBias\r\n    } else {\r\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\r\n      e = 0\r\n    }\r\n  }\r\n\r\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\r\n\r\n  e = (e << mLen) | m\r\n  eLen += mLen\r\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\r\n\r\n  buffer[offset + i - d] |= s * 128\r\n}\r\n","/**\r\n * Use the ImageData from a Canvas and flatten the image on a solid background\r\n */\r\nclass CanvasFlatten {\r\n  /**\r\n     * Change the image to grayscale\r\n     *\r\n     * @param  {object}   image         The imageData of a Canvas 2d context\r\n     * @param  {array}    background    Three values consisting of the r, g, b of the background\r\n     * @return {object}                 The resulting imageData\r\n     *\r\n     */\r\n  flatten(image, background) {\r\n    for (let i = 0; i < image.data.length; i += 4) {\r\n      const alpha = image.data[i + 3];\r\n      const invAlpha = 255 - alpha;\r\n\r\n      image.data[i] = (alpha * image.data[i] + invAlpha * background[0]) / 255;\r\n      image.data[i + 1] = (alpha * image.data[i + 1] + invAlpha * background[1]) / 255;\r\n      image.data[i + 2] = (alpha * image.data[i + 2] + invAlpha * background[2]) / 255;\r\n      image.data[i + 3] = 0xff;\r\n    }\r\n\r\n    return image;\r\n  }\r\n}\r\n\r\nmodule.exports = new CanvasFlatten();\r\n","/*!\r\n * The buffer module from node.js, for the browser.\r\n *\r\n * @author   Feross Aboukhadijeh <https://feross.org>\r\n * @license  MIT\r\n */\r\n/* eslint-disable no-proto */\r\n\r\n'use strict'\r\n\r\nvar base64 = require('base64-js')\r\nvar ieee754 = require('ieee754')\r\n\r\nexports.Buffer = Buffer\r\nexports.SlowBuffer = SlowBuffer\r\nexports.INSPECT_MAX_BYTES = 50\r\n\r\nvar K_MAX_LENGTH = 0x7fffffff\r\nexports.kMaxLength = K_MAX_LENGTH\r\n\r\n/**\r\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\r\n *   === true    Use Uint8Array implementation (fastest)\r\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\r\n *               implementation (most compatible, even IE6)\r\n *\r\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\r\n * Opera 11.6+, iOS 4.2+.\r\n *\r\n * We report that the browser does not support typed arrays if the are not subclassable\r\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\r\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\r\n * for __proto__ and has a buggy typed array implementation.\r\n */\r\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\r\n\r\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\r\n    typeof console.error === 'function') {\r\n  console.error(\r\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\r\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\r\n  )\r\n}\r\n\r\nfunction typedArraySupport () {\r\n  // Can typed array instances can be augmented?\r\n  try {\r\n    var arr = new Uint8Array(1)\r\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42 } }\r\n    return arr.foo() === 42\r\n  } catch (e) {\r\n    return false\r\n  }\r\n}\r\n\r\nObject.defineProperty(Buffer.prototype, 'parent', {\r\n  enumerable: true,\r\n  get: function () {\r\n    if (!Buffer.isBuffer(this)) return undefined\r\n    return this.buffer\r\n  }\r\n})\r\n\r\nObject.defineProperty(Buffer.prototype, 'offset', {\r\n  enumerable: true,\r\n  get: function () {\r\n    if (!Buffer.isBuffer(this)) return undefined\r\n    return this.byteOffset\r\n  }\r\n})\r\n\r\nfunction createBuffer (length) {\r\n  if (length > K_MAX_LENGTH) {\r\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\r\n  }\r\n  // Return an augmented `Uint8Array` instance\r\n  var buf = new Uint8Array(length)\r\n  buf.__proto__ = Buffer.prototype\r\n  return buf\r\n}\r\n\r\n/**\r\n * The Buffer constructor returns instances of `Uint8Array` that have their\r\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\r\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\r\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\r\n * returns a single octet.\r\n *\r\n * The `Uint8Array` prototype remains unmodified.\r\n */\r\n\r\nfunction Buffer (arg, encodingOrOffset, length) {\r\n  // Common case.\r\n  if (typeof arg === 'number') {\r\n    if (typeof encodingOrOffset === 'string') {\r\n      throw new TypeError(\r\n        'The \"string\" argument must be of type string. Received type number'\r\n      )\r\n    }\r\n    return allocUnsafe(arg)\r\n  }\r\n  return from(arg, encodingOrOffset, length)\r\n}\r\n\r\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\r\nif (typeof Symbol !== 'undefined' && Symbol.species != null &&\r\n    Buffer[Symbol.species] === Buffer) {\r\n  Object.defineProperty(Buffer, Symbol.species, {\r\n    value: null,\r\n    configurable: true,\r\n    enumerable: false,\r\n    writable: false\r\n  })\r\n}\r\n\r\nBuffer.poolSize = 8192 // not used by this implementation\r\n\r\nfunction from (value, encodingOrOffset, length) {\r\n  if (typeof value === 'string') {\r\n    return fromString(value, encodingOrOffset)\r\n  }\r\n\r\n  if (ArrayBuffer.isView(value)) {\r\n    return fromArrayLike(value)\r\n  }\r\n\r\n  if (value == null) {\r\n    throw TypeError(\r\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\r\n      'or Array-like Object. Received type ' + (typeof value)\r\n    )\r\n  }\r\n\r\n  if (isInstance(value, ArrayBuffer) ||\r\n      (value && isInstance(value.buffer, ArrayBuffer))) {\r\n    return fromArrayBuffer(value, encodingOrOffset, length)\r\n  }\r\n\r\n  if (typeof value === 'number') {\r\n    throw new TypeError(\r\n      'The \"value\" argument must not be of type number. Received type number'\r\n    )\r\n  }\r\n\r\n  var valueOf = value.valueOf && value.valueOf()\r\n  if (valueOf != null && valueOf !== value) {\r\n    return Buffer.from(valueOf, encodingOrOffset, length)\r\n  }\r\n\r\n  var b = fromObject(value)\r\n  if (b) return b\r\n\r\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\r\n      typeof value[Symbol.toPrimitive] === 'function') {\r\n    return Buffer.from(\r\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\r\n    )\r\n  }\r\n\r\n  throw new TypeError(\r\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\r\n    'or Array-like Object. Received type ' + (typeof value)\r\n  )\r\n}\r\n\r\n/**\r\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\r\n * if value is a number.\r\n * Buffer.from(str[, encoding])\r\n * Buffer.from(array)\r\n * Buffer.from(buffer)\r\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\r\n **/\r\nBuffer.from = function (value, encodingOrOffset, length) {\r\n  return from(value, encodingOrOffset, length)\r\n}\r\n\r\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\r\n// https://github.com/feross/buffer/pull/148\r\nBuffer.prototype.__proto__ = Uint8Array.prototype\r\nBuffer.__proto__ = Uint8Array\r\n\r\nfunction assertSize (size) {\r\n  if (typeof size !== 'number') {\r\n    throw new TypeError('\"size\" argument must be of type number')\r\n  } else if (size < 0) {\r\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\r\n  }\r\n}\r\n\r\nfunction alloc (size, fill, encoding) {\r\n  assertSize(size)\r\n  if (size <= 0) {\r\n    return createBuffer(size)\r\n  }\r\n  if (fill !== undefined) {\r\n    // Only pay attention to encoding if it's a string. This\r\n    // prevents accidentally sending in a number that would\r\n    // be interpretted as a start offset.\r\n    return typeof encoding === 'string'\r\n      ? createBuffer(size).fill(fill, encoding)\r\n      : createBuffer(size).fill(fill)\r\n  }\r\n  return createBuffer(size)\r\n}\r\n\r\n/**\r\n * Creates a new filled Buffer instance.\r\n * alloc(size[, fill[, encoding]])\r\n **/\r\nBuffer.alloc = function (size, fill, encoding) {\r\n  return alloc(size, fill, encoding)\r\n}\r\n\r\nfunction allocUnsafe (size) {\r\n  assertSize(size)\r\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\r\n}\r\n\r\n/**\r\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\r\n * */\r\nBuffer.allocUnsafe = function (size) {\r\n  return allocUnsafe(size)\r\n}\r\n/**\r\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\r\n */\r\nBuffer.allocUnsafeSlow = function (size) {\r\n  return allocUnsafe(size)\r\n}\r\n\r\nfunction fromString (string, encoding) {\r\n  if (typeof encoding !== 'string' || encoding === '') {\r\n    encoding = 'utf8'\r\n  }\r\n\r\n  if (!Buffer.isEncoding(encoding)) {\r\n    throw new TypeError('Unknown encoding: ' + encoding)\r\n  }\r\n\r\n  var length = byteLength(string, encoding) | 0\r\n  var buf = createBuffer(length)\r\n\r\n  var actual = buf.write(string, encoding)\r\n\r\n  if (actual !== length) {\r\n    // Writing a hex string, for example, that contains invalid characters will\r\n    // cause everything after the first invalid character to be ignored. (e.g.\r\n    // 'abxxcd' will be treated as 'ab')\r\n    buf = buf.slice(0, actual)\r\n  }\r\n\r\n  return buf\r\n}\r\n\r\nfunction fromArrayLike (array) {\r\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\r\n  var buf = createBuffer(length)\r\n  for (var i = 0; i < length; i += 1) {\r\n    buf[i] = array[i] & 255\r\n  }\r\n  return buf\r\n}\r\n\r\nfunction fromArrayBuffer (array, byteOffset, length) {\r\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\r\n    throw new RangeError('\"offset\" is outside of buffer bounds')\r\n  }\r\n\r\n  if (array.byteLength < byteOffset + (length || 0)) {\r\n    throw new RangeError('\"length\" is outside of buffer bounds')\r\n  }\r\n\r\n  var buf\r\n  if (byteOffset === undefined && length === undefined) {\r\n    buf = new Uint8Array(array)\r\n  } else if (length === undefined) {\r\n    buf = new Uint8Array(array, byteOffset)\r\n  } else {\r\n    buf = new Uint8Array(array, byteOffset, length)\r\n  }\r\n\r\n  // Return an augmented `Uint8Array` instance\r\n  buf.__proto__ = Buffer.prototype\r\n  return buf\r\n}\r\n\r\nfunction fromObject (obj) {\r\n  if (Buffer.isBuffer(obj)) {\r\n    var len = checked(obj.length) | 0\r\n    var buf = createBuffer(len)\r\n\r\n    if (buf.length === 0) {\r\n      return buf\r\n    }\r\n\r\n    obj.copy(buf, 0, 0, len)\r\n    return buf\r\n  }\r\n\r\n  if (obj.length !== undefined) {\r\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\r\n      return createBuffer(0)\r\n    }\r\n    return fromArrayLike(obj)\r\n  }\r\n\r\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\r\n    return fromArrayLike(obj.data)\r\n  }\r\n}\r\n\r\nfunction checked (length) {\r\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\r\n  // length is NaN (which is otherwise coerced to zero.)\r\n  if (length >= K_MAX_LENGTH) {\r\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\r\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\r\n  }\r\n  return length | 0\r\n}\r\n\r\nfunction SlowBuffer (length) {\r\n  if (+length != length) { // eslint-disable-line eqeqeq\r\n    length = 0\r\n  }\r\n  return Buffer.alloc(+length)\r\n}\r\n\r\nBuffer.isBuffer = function isBuffer (b) {\r\n  return b != null && b._isBuffer === true &&\r\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\r\n}\r\n\r\nBuffer.compare = function compare (a, b) {\r\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\r\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\r\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\r\n    throw new TypeError(\r\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\r\n    )\r\n  }\r\n\r\n  if (a === b) return 0\r\n\r\n  var x = a.length\r\n  var y = b.length\r\n\r\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\r\n    if (a[i] !== b[i]) {\r\n      x = a[i]\r\n      y = b[i]\r\n      break\r\n    }\r\n  }\r\n\r\n  if (x < y) return -1\r\n  if (y < x) return 1\r\n  return 0\r\n}\r\n\r\nBuffer.isEncoding = function isEncoding (encoding) {\r\n  switch (String(encoding).toLowerCase()) {\r\n    case 'hex':\r\n    case 'utf8':\r\n    case 'utf-8':\r\n    case 'ascii':\r\n    case 'latin1':\r\n    case 'binary':\r\n    case 'base64':\r\n    case 'ucs2':\r\n    case 'ucs-2':\r\n    case 'utf16le':\r\n    case 'utf-16le':\r\n      return true\r\n    default:\r\n      return false\r\n  }\r\n}\r\n\r\nBuffer.concat = function concat (list, length) {\r\n  if (!Array.isArray(list)) {\r\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\r\n  }\r\n\r\n  if (list.length === 0) {\r\n    return Buffer.alloc(0)\r\n  }\r\n\r\n  var i\r\n  if (length === undefined) {\r\n    length = 0\r\n    for (i = 0; i < list.length; ++i) {\r\n      length += list[i].length\r\n    }\r\n  }\r\n\r\n  var buffer = Buffer.allocUnsafe(length)\r\n  var pos = 0\r\n  for (i = 0; i < list.length; ++i) {\r\n    var buf = list[i]\r\n    if (isInstance(buf, Uint8Array)) {\r\n      buf = Buffer.from(buf)\r\n    }\r\n    if (!Buffer.isBuffer(buf)) {\r\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\r\n    }\r\n    buf.copy(buffer, pos)\r\n    pos += buf.length\r\n  }\r\n  return buffer\r\n}\r\n\r\nfunction byteLength (string, encoding) {\r\n  if (Buffer.isBuffer(string)) {\r\n    return string.length\r\n  }\r\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\r\n    return string.byteLength\r\n  }\r\n  if (typeof string !== 'string') {\r\n    throw new TypeError(\r\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\r\n      'Received type ' + typeof string\r\n    )\r\n  }\r\n\r\n  var len = string.length\r\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\r\n  if (!mustMatch && len === 0) return 0\r\n\r\n  // Use a for loop to avoid recursion\r\n  var loweredCase = false\r\n  for (;;) {\r\n    switch (encoding) {\r\n      case 'ascii':\r\n      case 'latin1':\r\n      case 'binary':\r\n        return len\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return utf8ToBytes(string).length\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return len * 2\r\n      case 'hex':\r\n        return len >>> 1\r\n      case 'base64':\r\n        return base64ToBytes(string).length\r\n      default:\r\n        if (loweredCase) {\r\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\r\n        }\r\n        encoding = ('' + encoding).toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\nBuffer.byteLength = byteLength\r\n\r\nfunction slowToString (encoding, start, end) {\r\n  var loweredCase = false\r\n\r\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\r\n  // property of a typed array.\r\n\r\n  // This behaves neither like String nor Uint8Array in that we set start/end\r\n  // to their upper/lower bounds if the value passed is out of range.\r\n  // undefined is handled specially as per ECMA-262 6th Edition,\r\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\r\n  if (start === undefined || start < 0) {\r\n    start = 0\r\n  }\r\n  // Return early if start > this.length. Done here to prevent potential uint32\r\n  // coercion fail below.\r\n  if (start > this.length) {\r\n    return ''\r\n  }\r\n\r\n  if (end === undefined || end > this.length) {\r\n    end = this.length\r\n  }\r\n\r\n  if (end <= 0) {\r\n    return ''\r\n  }\r\n\r\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\r\n  end >>>= 0\r\n  start >>>= 0\r\n\r\n  if (end <= start) {\r\n    return ''\r\n  }\r\n\r\n  if (!encoding) encoding = 'utf8'\r\n\r\n  while (true) {\r\n    switch (encoding) {\r\n      case 'hex':\r\n        return hexSlice(this, start, end)\r\n\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return utf8Slice(this, start, end)\r\n\r\n      case 'ascii':\r\n        return asciiSlice(this, start, end)\r\n\r\n      case 'latin1':\r\n      case 'binary':\r\n        return latin1Slice(this, start, end)\r\n\r\n      case 'base64':\r\n        return base64Slice(this, start, end)\r\n\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return utf16leSlice(this, start, end)\r\n\r\n      default:\r\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\r\n        encoding = (encoding + '').toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\n\r\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\r\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\r\n// reliably in a browserify context because there could be multiple different\r\n// copies of the 'buffer' package in use. This method works even for Buffer\r\n// instances that were created from another copy of the `buffer` package.\r\n// See: https://github.com/feross/buffer/issues/154\r\nBuffer.prototype._isBuffer = true\r\n\r\nfunction swap (b, n, m) {\r\n  var i = b[n]\r\n  b[n] = b[m]\r\n  b[m] = i\r\n}\r\n\r\nBuffer.prototype.swap16 = function swap16 () {\r\n  var len = this.length\r\n  if (len % 2 !== 0) {\r\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\r\n  }\r\n  for (var i = 0; i < len; i += 2) {\r\n    swap(this, i, i + 1)\r\n  }\r\n  return this\r\n}\r\n\r\nBuffer.prototype.swap32 = function swap32 () {\r\n  var len = this.length\r\n  if (len % 4 !== 0) {\r\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\r\n  }\r\n  for (var i = 0; i < len; i += 4) {\r\n    swap(this, i, i + 3)\r\n    swap(this, i + 1, i + 2)\r\n  }\r\n  return this\r\n}\r\n\r\nBuffer.prototype.swap64 = function swap64 () {\r\n  var len = this.length\r\n  if (len % 8 !== 0) {\r\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\r\n  }\r\n  for (var i = 0; i < len; i += 8) {\r\n    swap(this, i, i + 7)\r\n    swap(this, i + 1, i + 6)\r\n    swap(this, i + 2, i + 5)\r\n    swap(this, i + 3, i + 4)\r\n  }\r\n  return this\r\n}\r\n\r\nBuffer.prototype.toString = function toString () {\r\n  var length = this.length\r\n  if (length === 0) return ''\r\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\r\n  return slowToString.apply(this, arguments)\r\n}\r\n\r\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\r\n\r\nBuffer.prototype.equals = function equals (b) {\r\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\r\n  if (this === b) return true\r\n  return Buffer.compare(this, b) === 0\r\n}\r\n\r\nBuffer.prototype.inspect = function inspect () {\r\n  var str = ''\r\n  var max = exports.INSPECT_MAX_BYTES\r\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\r\n  if (this.length > max) str += ' ... '\r\n  return '<Buffer ' + str + '>'\r\n}\r\n\r\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\r\n  if (isInstance(target, Uint8Array)) {\r\n    target = Buffer.from(target, target.offset, target.byteLength)\r\n  }\r\n  if (!Buffer.isBuffer(target)) {\r\n    throw new TypeError(\r\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\r\n      'Received type ' + (typeof target)\r\n    )\r\n  }\r\n\r\n  if (start === undefined) {\r\n    start = 0\r\n  }\r\n  if (end === undefined) {\r\n    end = target ? target.length : 0\r\n  }\r\n  if (thisStart === undefined) {\r\n    thisStart = 0\r\n  }\r\n  if (thisEnd === undefined) {\r\n    thisEnd = this.length\r\n  }\r\n\r\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\r\n    throw new RangeError('out of range index')\r\n  }\r\n\r\n  if (thisStart >= thisEnd && start >= end) {\r\n    return 0\r\n  }\r\n  if (thisStart >= thisEnd) {\r\n    return -1\r\n  }\r\n  if (start >= end) {\r\n    return 1\r\n  }\r\n\r\n  start >>>= 0\r\n  end >>>= 0\r\n  thisStart >>>= 0\r\n  thisEnd >>>= 0\r\n\r\n  if (this === target) return 0\r\n\r\n  var x = thisEnd - thisStart\r\n  var y = end - start\r\n  var len = Math.min(x, y)\r\n\r\n  var thisCopy = this.slice(thisStart, thisEnd)\r\n  var targetCopy = target.slice(start, end)\r\n\r\n  for (var i = 0; i < len; ++i) {\r\n    if (thisCopy[i] !== targetCopy[i]) {\r\n      x = thisCopy[i]\r\n      y = targetCopy[i]\r\n      break\r\n    }\r\n  }\r\n\r\n  if (x < y) return -1\r\n  if (y < x) return 1\r\n  return 0\r\n}\r\n\r\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\r\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\r\n//\r\n// Arguments:\r\n// - buffer - a Buffer to search\r\n// - val - a string, Buffer, or number\r\n// - byteOffset - an index into `buffer`; will be clamped to an int32\r\n// - encoding - an optional encoding, relevant is val is a string\r\n// - dir - true for indexOf, false for lastIndexOf\r\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\r\n  // Empty buffer means no match\r\n  if (buffer.length === 0) return -1\r\n\r\n  // Normalize byteOffset\r\n  if (typeof byteOffset === 'string') {\r\n    encoding = byteOffset\r\n    byteOffset = 0\r\n  } else if (byteOffset > 0x7fffffff) {\r\n    byteOffset = 0x7fffffff\r\n  } else if (byteOffset < -0x80000000) {\r\n    byteOffset = -0x80000000\r\n  }\r\n  byteOffset = +byteOffset // Coerce to Number.\r\n  if (numberIsNaN(byteOffset)) {\r\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\r\n    byteOffset = dir ? 0 : (buffer.length - 1)\r\n  }\r\n\r\n  // Normalize byteOffset: negative offsets start from the end of the buffer\r\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\r\n  if (byteOffset >= buffer.length) {\r\n    if (dir) return -1\r\n    else byteOffset = buffer.length - 1\r\n  } else if (byteOffset < 0) {\r\n    if (dir) byteOffset = 0\r\n    else return -1\r\n  }\r\n\r\n  // Normalize val\r\n  if (typeof val === 'string') {\r\n    val = Buffer.from(val, encoding)\r\n  }\r\n\r\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\r\n  if (Buffer.isBuffer(val)) {\r\n    // Special case: looking for empty string/buffer always fails\r\n    if (val.length === 0) {\r\n      return -1\r\n    }\r\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\r\n  } else if (typeof val === 'number') {\r\n    val = val & 0xFF // Search for a byte value [0-255]\r\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\r\n      if (dir) {\r\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\r\n      } else {\r\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\r\n      }\r\n    }\r\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\r\n  }\r\n\r\n  throw new TypeError('val must be string, number or Buffer')\r\n}\r\n\r\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\r\n  var indexSize = 1\r\n  var arrLength = arr.length\r\n  var valLength = val.length\r\n\r\n  if (encoding !== undefined) {\r\n    encoding = String(encoding).toLowerCase()\r\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\r\n        encoding === 'utf16le' || encoding === 'utf-16le') {\r\n      if (arr.length < 2 || val.length < 2) {\r\n        return -1\r\n      }\r\n      indexSize = 2\r\n      arrLength /= 2\r\n      valLength /= 2\r\n      byteOffset /= 2\r\n    }\r\n  }\r\n\r\n  function read (buf, i) {\r\n    if (indexSize === 1) {\r\n      return buf[i]\r\n    } else {\r\n      return buf.readUInt16BE(i * indexSize)\r\n    }\r\n  }\r\n\r\n  var i\r\n  if (dir) {\r\n    var foundIndex = -1\r\n    for (i = byteOffset; i < arrLength; i++) {\r\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\r\n        if (foundIndex === -1) foundIndex = i\r\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\r\n      } else {\r\n        if (foundIndex !== -1) i -= i - foundIndex\r\n        foundIndex = -1\r\n      }\r\n    }\r\n  } else {\r\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\r\n    for (i = byteOffset; i >= 0; i--) {\r\n      var found = true\r\n      for (var j = 0; j < valLength; j++) {\r\n        if (read(arr, i + j) !== read(val, j)) {\r\n          found = false\r\n          break\r\n        }\r\n      }\r\n      if (found) return i\r\n    }\r\n  }\r\n\r\n  return -1\r\n}\r\n\r\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\r\n  return this.indexOf(val, byteOffset, encoding) !== -1\r\n}\r\n\r\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\r\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\r\n}\r\n\r\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\r\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\r\n}\r\n\r\nfunction hexWrite (buf, string, offset, length) {\r\n  offset = Number(offset) || 0\r\n  var remaining = buf.length - offset\r\n  if (!length) {\r\n    length = remaining\r\n  } else {\r\n    length = Number(length)\r\n    if (length > remaining) {\r\n      length = remaining\r\n    }\r\n  }\r\n\r\n  var strLen = string.length\r\n\r\n  if (length > strLen / 2) {\r\n    length = strLen / 2\r\n  }\r\n  for (var i = 0; i < length; ++i) {\r\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\r\n    if (numberIsNaN(parsed)) return i\r\n    buf[offset + i] = parsed\r\n  }\r\n  return i\r\n}\r\n\r\nfunction utf8Write (buf, string, offset, length) {\r\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\r\n}\r\n\r\nfunction asciiWrite (buf, string, offset, length) {\r\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\r\n}\r\n\r\nfunction latin1Write (buf, string, offset, length) {\r\n  return asciiWrite(buf, string, offset, length)\r\n}\r\n\r\nfunction base64Write (buf, string, offset, length) {\r\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\r\n}\r\n\r\nfunction ucs2Write (buf, string, offset, length) {\r\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\r\n}\r\n\r\nBuffer.prototype.write = function write (string, offset, length, encoding) {\r\n  // Buffer#write(string)\r\n  if (offset === undefined) {\r\n    encoding = 'utf8'\r\n    length = this.length\r\n    offset = 0\r\n  // Buffer#write(string, encoding)\r\n  } else if (length === undefined && typeof offset === 'string') {\r\n    encoding = offset\r\n    length = this.length\r\n    offset = 0\r\n  // Buffer#write(string, offset[, length][, encoding])\r\n  } else if (isFinite(offset)) {\r\n    offset = offset >>> 0\r\n    if (isFinite(length)) {\r\n      length = length >>> 0\r\n      if (encoding === undefined) encoding = 'utf8'\r\n    } else {\r\n      encoding = length\r\n      length = undefined\r\n    }\r\n  } else {\r\n    throw new Error(\r\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\r\n    )\r\n  }\r\n\r\n  var remaining = this.length - offset\r\n  if (length === undefined || length > remaining) length = remaining\r\n\r\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\r\n    throw new RangeError('Attempt to write outside buffer bounds')\r\n  }\r\n\r\n  if (!encoding) encoding = 'utf8'\r\n\r\n  var loweredCase = false\r\n  for (;;) {\r\n    switch (encoding) {\r\n      case 'hex':\r\n        return hexWrite(this, string, offset, length)\r\n\r\n      case 'utf8':\r\n      case 'utf-8':\r\n        return utf8Write(this, string, offset, length)\r\n\r\n      case 'ascii':\r\n        return asciiWrite(this, string, offset, length)\r\n\r\n      case 'latin1':\r\n      case 'binary':\r\n        return latin1Write(this, string, offset, length)\r\n\r\n      case 'base64':\r\n        // Warning: maxLength not taken into account in base64Write\r\n        return base64Write(this, string, offset, length)\r\n\r\n      case 'ucs2':\r\n      case 'ucs-2':\r\n      case 'utf16le':\r\n      case 'utf-16le':\r\n        return ucs2Write(this, string, offset, length)\r\n\r\n      default:\r\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\r\n        encoding = ('' + encoding).toLowerCase()\r\n        loweredCase = true\r\n    }\r\n  }\r\n}\r\n\r\nBuffer.prototype.toJSON = function toJSON () {\r\n  return {\r\n    type: 'Buffer',\r\n    data: Array.prototype.slice.call(this._arr || this, 0)\r\n  }\r\n}\r\n\r\nfunction base64Slice (buf, start, end) {\r\n  if (start === 0 && end === buf.length) {\r\n    return base64.fromByteArray(buf)\r\n  } else {\r\n    return base64.fromByteArray(buf.slice(start, end))\r\n  }\r\n}\r\n\r\nfunction utf8Slice (buf, start, end) {\r\n  end = Math.min(buf.length, end)\r\n  var res = []\r\n\r\n  var i = start\r\n  while (i < end) {\r\n    var firstByte = buf[i]\r\n    var codePoint = null\r\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\r\n      : (firstByte > 0xDF) ? 3\r\n        : (firstByte > 0xBF) ? 2\r\n          : 1\r\n\r\n    if (i + bytesPerSequence <= end) {\r\n      var secondByte, thirdByte, fourthByte, tempCodePoint\r\n\r\n      switch (bytesPerSequence) {\r\n        case 1:\r\n          if (firstByte < 0x80) {\r\n            codePoint = firstByte\r\n          }\r\n          break\r\n        case 2:\r\n          secondByte = buf[i + 1]\r\n          if ((secondByte & 0xC0) === 0x80) {\r\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\r\n            if (tempCodePoint > 0x7F) {\r\n              codePoint = tempCodePoint\r\n            }\r\n          }\r\n          break\r\n        case 3:\r\n          secondByte = buf[i + 1]\r\n          thirdByte = buf[i + 2]\r\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\r\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\r\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\r\n              codePoint = tempCodePoint\r\n            }\r\n          }\r\n          break\r\n        case 4:\r\n          secondByte = buf[i + 1]\r\n          thirdByte = buf[i + 2]\r\n          fourthByte = buf[i + 3]\r\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\r\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\r\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\r\n              codePoint = tempCodePoint\r\n            }\r\n          }\r\n      }\r\n    }\r\n\r\n    if (codePoint === null) {\r\n      // we did not generate a valid codePoint so insert a\r\n      // replacement char (U+FFFD) and advance only 1 byte\r\n      codePoint = 0xFFFD\r\n      bytesPerSequence = 1\r\n    } else if (codePoint > 0xFFFF) {\r\n      // encode to utf16 (surrogate pair dance)\r\n      codePoint -= 0x10000\r\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\r\n      codePoint = 0xDC00 | codePoint & 0x3FF\r\n    }\r\n\r\n    res.push(codePoint)\r\n    i += bytesPerSequence\r\n  }\r\n\r\n  return decodeCodePointsArray(res)\r\n}\r\n\r\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\r\n// the lowest limit is Chrome, with 0x10000 args.\r\n// We go 1 magnitude less, for safety\r\nvar MAX_ARGUMENTS_LENGTH = 0x1000\r\n\r\nfunction decodeCodePointsArray (codePoints) {\r\n  var len = codePoints.length\r\n  if (len <= MAX_ARGUMENTS_LENGTH) {\r\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\r\n  }\r\n\r\n  // Decode in chunks to avoid \"call stack size exceeded\".\r\n  var res = ''\r\n  var i = 0\r\n  while (i < len) {\r\n    res += String.fromCharCode.apply(\r\n      String,\r\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\r\n    )\r\n  }\r\n  return res\r\n}\r\n\r\nfunction asciiSlice (buf, start, end) {\r\n  var ret = ''\r\n  end = Math.min(buf.length, end)\r\n\r\n  for (var i = start; i < end; ++i) {\r\n    ret += String.fromCharCode(buf[i] & 0x7F)\r\n  }\r\n  return ret\r\n}\r\n\r\nfunction latin1Slice (buf, start, end) {\r\n  var ret = ''\r\n  end = Math.min(buf.length, end)\r\n\r\n  for (var i = start; i < end; ++i) {\r\n    ret += String.fromCharCode(buf[i])\r\n  }\r\n  return ret\r\n}\r\n\r\nfunction hexSlice (buf, start, end) {\r\n  var len = buf.length\r\n\r\n  if (!start || start < 0) start = 0\r\n  if (!end || end < 0 || end > len) end = len\r\n\r\n  var out = ''\r\n  for (var i = start; i < end; ++i) {\r\n    out += toHex(buf[i])\r\n  }\r\n  return out\r\n}\r\n\r\nfunction utf16leSlice (buf, start, end) {\r\n  var bytes = buf.slice(start, end)\r\n  var res = ''\r\n  for (var i = 0; i < bytes.length; i += 2) {\r\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\r\n  }\r\n  return res\r\n}\r\n\r\nBuffer.prototype.slice = function slice (start, end) {\r\n  var len = this.length\r\n  start = ~~start\r\n  end = end === undefined ? len : ~~end\r\n\r\n  if (start < 0) {\r\n    start += len\r\n    if (start < 0) start = 0\r\n  } else if (start > len) {\r\n    start = len\r\n  }\r\n\r\n  if (end < 0) {\r\n    end += len\r\n    if (end < 0) end = 0\r\n  } else if (end > len) {\r\n    end = len\r\n  }\r\n\r\n  if (end < start) end = start\r\n\r\n  var newBuf = this.subarray(start, end)\r\n  // Return an augmented `Uint8Array` instance\r\n  newBuf.__proto__ = Buffer.prototype\r\n  return newBuf\r\n}\r\n\r\n/*\r\n * Need to make sure that buffer isn't trying to write out of bounds.\r\n */\r\nfunction checkOffset (offset, ext, length) {\r\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\r\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\r\n}\r\n\r\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var val = this[offset]\r\n  var mul = 1\r\n  var i = 0\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    val += this[offset + i] * mul\r\n  }\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) {\r\n    checkOffset(offset, byteLength, this.length)\r\n  }\r\n\r\n  var val = this[offset + --byteLength]\r\n  var mul = 1\r\n  while (byteLength > 0 && (mul *= 0x100)) {\r\n    val += this[offset + --byteLength] * mul\r\n  }\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 1, this.length)\r\n  return this[offset]\r\n}\r\n\r\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  return this[offset] | (this[offset + 1] << 8)\r\n}\r\n\r\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  return (this[offset] << 8) | this[offset + 1]\r\n}\r\n\r\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return ((this[offset]) |\r\n      (this[offset + 1] << 8) |\r\n      (this[offset + 2] << 16)) +\r\n      (this[offset + 3] * 0x1000000)\r\n}\r\n\r\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset] * 0x1000000) +\r\n    ((this[offset + 1] << 16) |\r\n    (this[offset + 2] << 8) |\r\n    this[offset + 3])\r\n}\r\n\r\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var val = this[offset]\r\n  var mul = 1\r\n  var i = 0\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    val += this[offset + i] * mul\r\n  }\r\n  mul *= 0x80\r\n\r\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\r\n\r\n  var i = byteLength\r\n  var mul = 1\r\n  var val = this[offset + --i]\r\n  while (i > 0 && (mul *= 0x100)) {\r\n    val += this[offset + --i] * mul\r\n  }\r\n  mul *= 0x80\r\n\r\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\r\n\r\n  return val\r\n}\r\n\r\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 1, this.length)\r\n  if (!(this[offset] & 0x80)) return (this[offset])\r\n  return ((0xff - this[offset] + 1) * -1)\r\n}\r\n\r\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  var val = this[offset] | (this[offset + 1] << 8)\r\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\r\n}\r\n\r\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 2, this.length)\r\n  var val = this[offset + 1] | (this[offset] << 8)\r\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\r\n}\r\n\r\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset]) |\r\n    (this[offset + 1] << 8) |\r\n    (this[offset + 2] << 16) |\r\n    (this[offset + 3] << 24)\r\n}\r\n\r\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n\r\n  return (this[offset] << 24) |\r\n    (this[offset + 1] << 16) |\r\n    (this[offset + 2] << 8) |\r\n    (this[offset + 3])\r\n}\r\n\r\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n  return ieee754.read(this, offset, true, 23, 4)\r\n}\r\n\r\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 4, this.length)\r\n  return ieee754.read(this, offset, false, 23, 4)\r\n}\r\n\r\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 8, this.length)\r\n  return ieee754.read(this, offset, true, 52, 8)\r\n}\r\n\r\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkOffset(offset, 8, this.length)\r\n  return ieee754.read(this, offset, false, 52, 8)\r\n}\r\n\r\nfunction checkInt (buf, value, offset, ext, max, min) {\r\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\r\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\r\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\r\n}\r\n\r\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) {\r\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\r\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\r\n  }\r\n\r\n  var mul = 1\r\n  var i = 0\r\n  this[offset] = value & 0xFF\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    this[offset + i] = (value / mul) & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  byteLength = byteLength >>> 0\r\n  if (!noAssert) {\r\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\r\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\r\n  }\r\n\r\n  var i = byteLength - 1\r\n  var mul = 1\r\n  this[offset + i] = value & 0xFF\r\n  while (--i >= 0 && (mul *= 0x100)) {\r\n    this[offset + i] = (value / mul) & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\r\n  this[offset] = (value & 0xff)\r\n  return offset + 1\r\n}\r\n\r\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\r\n  this[offset] = (value & 0xff)\r\n  this[offset + 1] = (value >>> 8)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\r\n  this[offset] = (value >>> 8)\r\n  this[offset + 1] = (value & 0xff)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\r\n  this[offset + 3] = (value >>> 24)\r\n  this[offset + 2] = (value >>> 16)\r\n  this[offset + 1] = (value >>> 8)\r\n  this[offset] = (value & 0xff)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\r\n  this[offset] = (value >>> 24)\r\n  this[offset + 1] = (value >>> 16)\r\n  this[offset + 2] = (value >>> 8)\r\n  this[offset + 3] = (value & 0xff)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    var limit = Math.pow(2, (8 * byteLength) - 1)\r\n\r\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\r\n  }\r\n\r\n  var i = 0\r\n  var mul = 1\r\n  var sub = 0\r\n  this[offset] = value & 0xFF\r\n  while (++i < byteLength && (mul *= 0x100)) {\r\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\r\n      sub = 1\r\n    }\r\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    var limit = Math.pow(2, (8 * byteLength) - 1)\r\n\r\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\r\n  }\r\n\r\n  var i = byteLength - 1\r\n  var mul = 1\r\n  var sub = 0\r\n  this[offset + i] = value & 0xFF\r\n  while (--i >= 0 && (mul *= 0x100)) {\r\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\r\n      sub = 1\r\n    }\r\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\r\n  }\r\n\r\n  return offset + byteLength\r\n}\r\n\r\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\r\n  if (value < 0) value = 0xff + value + 1\r\n  this[offset] = (value & 0xff)\r\n  return offset + 1\r\n}\r\n\r\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\r\n  this[offset] = (value & 0xff)\r\n  this[offset + 1] = (value >>> 8)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\r\n  this[offset] = (value >>> 8)\r\n  this[offset + 1] = (value & 0xff)\r\n  return offset + 2\r\n}\r\n\r\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\r\n  this[offset] = (value & 0xff)\r\n  this[offset + 1] = (value >>> 8)\r\n  this[offset + 2] = (value >>> 16)\r\n  this[offset + 3] = (value >>> 24)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\r\n  if (value < 0) value = 0xffffffff + value + 1\r\n  this[offset] = (value >>> 24)\r\n  this[offset + 1] = (value >>> 16)\r\n  this[offset + 2] = (value >>> 8)\r\n  this[offset + 3] = (value & 0xff)\r\n  return offset + 4\r\n}\r\n\r\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\r\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\r\n  if (offset < 0) throw new RangeError('Index out of range')\r\n}\r\n\r\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\r\n  }\r\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\r\n  return offset + 4\r\n}\r\n\r\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\r\n  return writeFloat(this, value, offset, true, noAssert)\r\n}\r\n\r\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\r\n  return writeFloat(this, value, offset, false, noAssert)\r\n}\r\n\r\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\r\n  value = +value\r\n  offset = offset >>> 0\r\n  if (!noAssert) {\r\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\r\n  }\r\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\r\n  return offset + 8\r\n}\r\n\r\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\r\n  return writeDouble(this, value, offset, true, noAssert)\r\n}\r\n\r\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\r\n  return writeDouble(this, value, offset, false, noAssert)\r\n}\r\n\r\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\r\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\r\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\r\n  if (!start) start = 0\r\n  if (!end && end !== 0) end = this.length\r\n  if (targetStart >= target.length) targetStart = target.length\r\n  if (!targetStart) targetStart = 0\r\n  if (end > 0 && end < start) end = start\r\n\r\n  // Copy 0 bytes; we're done\r\n  if (end === start) return 0\r\n  if (target.length === 0 || this.length === 0) return 0\r\n\r\n  // Fatal error conditions\r\n  if (targetStart < 0) {\r\n    throw new RangeError('targetStart out of bounds')\r\n  }\r\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\r\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\r\n\r\n  // Are we oob?\r\n  if (end > this.length) end = this.length\r\n  if (target.length - targetStart < end - start) {\r\n    end = target.length - targetStart + start\r\n  }\r\n\r\n  var len = end - start\r\n\r\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\r\n    // Use built-in when available, missing from IE11\r\n    this.copyWithin(targetStart, start, end)\r\n  } else if (this === target && start < targetStart && targetStart < end) {\r\n    // descending copy from end\r\n    for (var i = len - 1; i >= 0; --i) {\r\n      target[i + targetStart] = this[i + start]\r\n    }\r\n  } else {\r\n    Uint8Array.prototype.set.call(\r\n      target,\r\n      this.subarray(start, end),\r\n      targetStart\r\n    )\r\n  }\r\n\r\n  return len\r\n}\r\n\r\n// Usage:\r\n//    buffer.fill(number[, offset[, end]])\r\n//    buffer.fill(buffer[, offset[, end]])\r\n//    buffer.fill(string[, offset[, end]][, encoding])\r\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\r\n  // Handle string cases:\r\n  if (typeof val === 'string') {\r\n    if (typeof start === 'string') {\r\n      encoding = start\r\n      start = 0\r\n      end = this.length\r\n    } else if (typeof end === 'string') {\r\n      encoding = end\r\n      end = this.length\r\n    }\r\n    if (encoding !== undefined && typeof encoding !== 'string') {\r\n      throw new TypeError('encoding must be a string')\r\n    }\r\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\r\n      throw new TypeError('Unknown encoding: ' + encoding)\r\n    }\r\n    if (val.length === 1) {\r\n      var code = val.charCodeAt(0)\r\n      if ((encoding === 'utf8' && code < 128) ||\r\n          encoding === 'latin1') {\r\n        // Fast path: If `val` fits into a single byte, use that numeric value.\r\n        val = code\r\n      }\r\n    }\r\n  } else if (typeof val === 'number') {\r\n    val = val & 255\r\n  }\r\n\r\n  // Invalid ranges are not set to a default, so can range check early.\r\n  if (start < 0 || this.length < start || this.length < end) {\r\n    throw new RangeError('Out of range index')\r\n  }\r\n\r\n  if (end <= start) {\r\n    return this\r\n  }\r\n\r\n  start = start >>> 0\r\n  end = end === undefined ? this.length : end >>> 0\r\n\r\n  if (!val) val = 0\r\n\r\n  var i\r\n  if (typeof val === 'number') {\r\n    for (i = start; i < end; ++i) {\r\n      this[i] = val\r\n    }\r\n  } else {\r\n    var bytes = Buffer.isBuffer(val)\r\n      ? val\r\n      : Buffer.from(val, encoding)\r\n    var len = bytes.length\r\n    if (len === 0) {\r\n      throw new TypeError('The value \"' + val +\r\n        '\" is invalid for argument \"value\"')\r\n    }\r\n    for (i = 0; i < end - start; ++i) {\r\n      this[i + start] = bytes[i % len]\r\n    }\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// HELPER FUNCTIONS\r\n// ================\r\n\r\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\r\n\r\nfunction base64clean (str) {\r\n  // Node takes equal signs as end of the Base64 encoding\r\n  str = str.split('=')[0]\r\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\r\n  str = str.trim().replace(INVALID_BASE64_RE, '')\r\n  // Node converts strings with length < 2 to ''\r\n  if (str.length < 2) return ''\r\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\r\n  while (str.length % 4 !== 0) {\r\n    str = str + '='\r\n  }\r\n  return str\r\n}\r\n\r\nfunction toHex (n) {\r\n  if (n < 16) return '0' + n.toString(16)\r\n  return n.toString(16)\r\n}\r\n\r\nfunction utf8ToBytes (string, units) {\r\n  units = units || Infinity\r\n  var codePoint\r\n  var length = string.length\r\n  var leadSurrogate = null\r\n  var bytes = []\r\n\r\n  for (var i = 0; i < length; ++i) {\r\n    codePoint = string.charCodeAt(i)\r\n\r\n    // is surrogate component\r\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\r\n      // last char was a lead\r\n      if (!leadSurrogate) {\r\n        // no lead yet\r\n        if (codePoint > 0xDBFF) {\r\n          // unexpected trail\r\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n          continue\r\n        } else if (i + 1 === length) {\r\n          // unpaired lead\r\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n          continue\r\n        }\r\n\r\n        // valid lead\r\n        leadSurrogate = codePoint\r\n\r\n        continue\r\n      }\r\n\r\n      // 2 leads in a row\r\n      if (codePoint < 0xDC00) {\r\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n        leadSurrogate = codePoint\r\n        continue\r\n      }\r\n\r\n      // valid surrogate pair\r\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\r\n    } else if (leadSurrogate) {\r\n      // valid bmp char, but last char was a lead\r\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\r\n    }\r\n\r\n    leadSurrogate = null\r\n\r\n    // encode utf8\r\n    if (codePoint < 0x80) {\r\n      if ((units -= 1) < 0) break\r\n      bytes.push(codePoint)\r\n    } else if (codePoint < 0x800) {\r\n      if ((units -= 2) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0x6 | 0xC0,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else if (codePoint < 0x10000) {\r\n      if ((units -= 3) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0xC | 0xE0,\r\n        codePoint >> 0x6 & 0x3F | 0x80,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else if (codePoint < 0x110000) {\r\n      if ((units -= 4) < 0) break\r\n      bytes.push(\r\n        codePoint >> 0x12 | 0xF0,\r\n        codePoint >> 0xC & 0x3F | 0x80,\r\n        codePoint >> 0x6 & 0x3F | 0x80,\r\n        codePoint & 0x3F | 0x80\r\n      )\r\n    } else {\r\n      throw new Error('Invalid code point')\r\n    }\r\n  }\r\n\r\n  return bytes\r\n}\r\n\r\nfunction asciiToBytes (str) {\r\n  var byteArray = []\r\n  for (var i = 0; i < str.length; ++i) {\r\n    // Node's code seems to be doing this and not & 0x7F..\r\n    byteArray.push(str.charCodeAt(i) & 0xFF)\r\n  }\r\n  return byteArray\r\n}\r\n\r\nfunction utf16leToBytes (str, units) {\r\n  var c, hi, lo\r\n  var byteArray = []\r\n  for (var i = 0; i < str.length; ++i) {\r\n    if ((units -= 2) < 0) break\r\n\r\n    c = str.charCodeAt(i)\r\n    hi = c >> 8\r\n    lo = c % 256\r\n    byteArray.push(lo)\r\n    byteArray.push(hi)\r\n  }\r\n\r\n  return byteArray\r\n}\r\n\r\nfunction base64ToBytes (str) {\r\n  return base64.toByteArray(base64clean(str))\r\n}\r\n\r\nfunction blitBuffer (src, dst, offset, length) {\r\n  for (var i = 0; i < length; ++i) {\r\n    if ((i + offset >= dst.length) || (i >= src.length)) break\r\n    dst[i + offset] = src[i]\r\n  }\r\n  return i\r\n}\r\n\r\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\r\n// the `instanceof` check but they should be treated as of that type.\r\n// See: https://github.com/feross/buffer/issues/166\r\nfunction isInstance (obj, type) {\r\n  return obj instanceof type ||\r\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\r\n      obj.constructor.name === type.name)\r\n}\r\nfunction numberIsNaN (obj) {\r\n  // For IE11 support\r\n  return obj !== obj // eslint-disable-line no-self-compare\r\n}\r\n","\"use strict\";\r\n\r\nvar BOMChar = '\\uFEFF';\r\n\r\nexports.PrependBOM = PrependBOMWrapper\r\nfunction PrependBOMWrapper(encoder, options) {\r\n    this.encoder = encoder;\r\n    this.addBOM = true;\r\n}\r\n\r\nPrependBOMWrapper.prototype.write = function(str) {\r\n    if (this.addBOM) {\r\n        str = BOMChar + str;\r\n        this.addBOM = false;\r\n    }\r\n\r\n    return this.encoder.write(str);\r\n}\r\n\r\nPrependBOMWrapper.prototype.end = function() {\r\n    return this.encoder.end();\r\n}\r\n\r\n\r\n//------------------------------------------------------------------------------\r\n\r\nexports.StripBOM = StripBOMWrapper;\r\nfunction StripBOMWrapper(decoder, options) {\r\n    this.decoder = decoder;\r\n    this.pass = false;\r\n    this.options = options || {};\r\n}\r\n\r\nStripBOMWrapper.prototype.write = function(buf) {\r\n    var res = this.decoder.write(buf);\r\n    if (this.pass || !res)\r\n        return res;\r\n\r\n    if (res[0] === BOMChar) {\r\n        res = res.slice(1);\r\n        if (typeof this.options.stripBOM === 'function')\r\n            this.options.stripBOM();\r\n    }\r\n\r\n    this.pass = true;\r\n    return res;\r\n}\r\n\r\nStripBOMWrapper.prototype.end = function() {\r\n    return this.decoder.end();\r\n}\r\n\r\n","\"use strict\";\r\n\r\n// Description of supported double byte encodings and aliases.\r\n// Tables are not require()-d until they are needed to speed up library load.\r\n// require()-s are direct to support Browserify.\r\n\r\nmodule.exports = {\r\n    \r\n    // == Japanese/ShiftJIS ====================================================\r\n    // All japanese encodings are based on JIS X set of standards:\r\n    // JIS X 0201 - Single-byte encoding of ASCII +  + Kana chars at 0xA1-0xDF.\r\n    // JIS X 0208 - Main set of 6879 characters, placed in 94x94 plane, to be encoded by 2 bytes. \r\n    //              Has several variations in 1978, 1983, 1990 and 1997.\r\n    // JIS X 0212 - Supplementary plane of 6067 chars in 94x94 plane. 1990. Effectively dead.\r\n    // JIS X 0213 - Extension and modern replacement of 0208 and 0212. Total chars: 11233.\r\n    //              2 planes, first is superset of 0208, second - revised 0212.\r\n    //              Introduced in 2000, revised 2004. Some characters are in Unicode Plane 2 (0x2xxxx)\r\n\r\n    // Byte encodings are:\r\n    //  * Shift_JIS: Compatible with 0201, uses not defined chars in top half as lead bytes for double-byte\r\n    //               encoding of 0208. Lead byte ranges: 0x81-0x9F, 0xE0-0xEF; Trail byte ranges: 0x40-0x7E, 0x80-0x9E, 0x9F-0xFC.\r\n    //               Windows CP932 is a superset of Shift_JIS. Some companies added more chars, notably KDDI.\r\n    //  * EUC-JP:    Up to 3 bytes per character. Used mostly on *nixes.\r\n    //               0x00-0x7F       - lower part of 0201\r\n    //               0x8E, 0xA1-0xDF - upper part of 0201\r\n    //               (0xA1-0xFE)x2   - 0208 plane (94x94).\r\n    //               0x8F, (0xA1-0xFE)x2 - 0212 plane (94x94).\r\n    //  * JIS X 208: 7-bit, direct encoding of 0208. Byte ranges: 0x21-0x7E (94 values). Uncommon.\r\n    //               Used as-is in ISO2022 family.\r\n    //  * ISO2022-JP: Stateful encoding, with escape sequences to switch between ASCII, \r\n    //                0201-1976 Roman, 0208-1978, 0208-1983.\r\n    //  * ISO2022-JP-1: Adds esc seq for 0212-1990.\r\n    //  * ISO2022-JP-2: Adds esc seq for GB2313-1980, KSX1001-1992, ISO8859-1, ISO8859-7.\r\n    //  * ISO2022-JP-3: Adds esc seq for 0201-1976 Kana set, 0213-2000 Planes 1, 2.\r\n    //  * ISO2022-JP-2004: Adds 0213-2004 Plane 1.\r\n    //\r\n    // After JIS X 0213 appeared, Shift_JIS-2004, EUC-JISX0213 and ISO2022-JP-2004 followed, with just changing the planes.\r\n    //\r\n    // Overall, it seems that it's a mess :( http://www8.plala.or.jp/tkubota1/unicode-symbols-map2.html\r\n\r\n    'shiftjis': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/shiftjis.json') },\r\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\r\n        encodeSkipVals: [{from: 0xED40, to: 0xF940}],\r\n    },\r\n    'csshiftjis': 'shiftjis',\r\n    'mskanji': 'shiftjis',\r\n    'sjis': 'shiftjis',\r\n    'windows31j': 'shiftjis',\r\n    'ms31j': 'shiftjis',\r\n    'xsjis': 'shiftjis',\r\n    'windows932': 'shiftjis',\r\n    'ms932': 'shiftjis',\r\n    '932': 'shiftjis',\r\n    'cp932': 'shiftjis',\r\n\r\n    'eucjp': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/eucjp.json') },\r\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\r\n    },\r\n\r\n    // TODO: KDDI extension to Shift_JIS\r\n    // TODO: IBM CCSID 942 = CP932, but F0-F9 custom chars and other char changes.\r\n    // TODO: IBM CCSID 943 = Shift_JIS = CP932 with original Shift_JIS lower 128 chars.\r\n\r\n\r\n    // == Chinese/GBK ==========================================================\r\n    // http://en.wikipedia.org/wiki/GBK\r\n    // We mostly implement W3C recommendation: https://www.w3.org/TR/encoding/#gbk-encoder\r\n\r\n    // Oldest GB2312 (1981, ~7600 chars) is a subset of CP936\r\n    'gb2312': 'cp936',\r\n    'gb231280': 'cp936',\r\n    'gb23121980': 'cp936',\r\n    'csgb2312': 'cp936',\r\n    'csiso58gb231280': 'cp936',\r\n    'euccn': 'cp936',\r\n\r\n    // Microsoft's CP936 is a subset and approximation of GBK.\r\n    'windows936': 'cp936',\r\n    'ms936': 'cp936',\r\n    '936': 'cp936',\r\n    'cp936': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/cp936.json') },\r\n    },\r\n\r\n    // GBK (~22000 chars) is an extension of CP936 that added user-mapped chars and some other.\r\n    'gbk': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\r\n    },\r\n    'xgbk': 'gbk',\r\n    'isoir58': 'gbk',\r\n\r\n    // GB18030 is an algorithmic extension of GBK.\r\n    // Main source: https://www.w3.org/TR/encoding/#gbk-encoder\r\n    // http://icu-project.org/docs/papers/gb18030.html\r\n    // http://source.icu-project.org/repos/icu/data/trunk/charset/data/xml/gb-18030-2000.xml\r\n    // http://www.khngai.com/chinese/charmap/tblgbk.php?page=0\r\n    'gb18030': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\r\n        gb18030: function() { return require('./tables/gb18030-ranges.json') },\r\n        encodeSkipVals: [0x80],\r\n        encodeAdd: {'': 0xA2E3},\r\n    },\r\n\r\n    'chinese': 'gb18030',\r\n\r\n\r\n    // == Korean ===============================================================\r\n    // EUC-KR, KS_C_5601 and KS X 1001 are exactly the same.\r\n    'windows949': 'cp949',\r\n    'ms949': 'cp949',\r\n    '949': 'cp949',\r\n    'cp949': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/cp949.json') },\r\n    },\r\n\r\n    'cseuckr': 'cp949',\r\n    'csksc56011987': 'cp949',\r\n    'euckr': 'cp949',\r\n    'isoir149': 'cp949',\r\n    'korean': 'cp949',\r\n    'ksc56011987': 'cp949',\r\n    'ksc56011989': 'cp949',\r\n    'ksc5601': 'cp949',\r\n\r\n\r\n    // == Big5/Taiwan/Hong Kong ================================================\r\n    // There are lots of tables for Big5 and cp950. Please see the following links for history:\r\n    // http://moztw.org/docs/big5/  http://www.haible.de/bruno/charsets/conversion-tables/Big5.html\r\n    // Variations, in roughly number of defined chars:\r\n    //  * Windows CP 950: Microsoft variant of Big5. Canonical: http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP950.TXT\r\n    //  * Windows CP 951: Microsoft variant of Big5-HKSCS-2001. Seems to be never public. http://me.abelcheung.org/articles/research/what-is-cp951/\r\n    //  * Big5-2003 (Taiwan standard) almost superset of cp950.\r\n    //  * Unicode-at-on (UAO) / Mozilla 1.8. Falling out of use on the Web. Not supported by other browsers.\r\n    //  * Big5-HKSCS (-2001, -2004, -2008). Hong Kong standard. \r\n    //    many unicode code points moved from PUA to Supplementary plane (U+2XXXX) over the years.\r\n    //    Plus, it has 4 combining sequences.\r\n    //    Seems that Mozilla refused to support it for 10 yrs. https://bugzilla.mozilla.org/show_bug.cgi?id=162431 https://bugzilla.mozilla.org/show_bug.cgi?id=310299\r\n    //    because big5-hkscs is the only encoding to include astral characters in non-algorithmic way.\r\n    //    Implementations are not consistent within browsers; sometimes labeled as just big5.\r\n    //    MS Internet Explorer switches from big5 to big5-hkscs when a patch applied.\r\n    //    Great discussion & recap of what's going on https://bugzilla.mozilla.org/show_bug.cgi?id=912470#c31\r\n    //    In the encoder, it might make sense to support encoding old PUA mappings to Big5 bytes seq-s.\r\n    //    Official spec: http://www.ogcio.gov.hk/en/business/tech_promotion/ccli/terms/doc/2003cmp_2008.txt\r\n    //                   http://www.ogcio.gov.hk/tc/business/tech_promotion/ccli/terms/doc/hkscs-2008-big5-iso.txt\r\n    // \r\n    // Current understanding of how to deal with Big5(-HKSCS) is in the Encoding Standard, http://encoding.spec.whatwg.org/#big5-encoder\r\n    // Unicode mapping (http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/OTHER/BIG5.TXT) is said to be wrong.\r\n\r\n    'windows950': 'cp950',\r\n    'ms950': 'cp950',\r\n    '950': 'cp950',\r\n    'cp950': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/cp950.json') },\r\n    },\r\n\r\n    // Big5 has many variations and is an extension of cp950. We use Encoding Standard's as a consensus.\r\n    'big5': 'big5hkscs',\r\n    'big5hkscs': {\r\n        type: '_dbcs',\r\n        table: function() { return require('./tables/cp950.json').concat(require('./tables/big5-added.json')) },\r\n        encodeSkipVals: [0xa2cc],\r\n    },\r\n\r\n    'cnbig5': 'big5hkscs',\r\n    'csbig5': 'big5hkscs',\r\n    'xxbig5': 'big5hkscs',\r\n};\r\n","/* eslint-disable node/no-deprecated-api */\r\n\r\n'use strict'\r\n\r\nvar buffer = require('buffer')\r\nvar Buffer = buffer.Buffer\r\n\r\nvar safer = {}\r\n\r\nvar key\r\n\r\nfor (key in buffer) {\r\n  if (!buffer.hasOwnProperty(key)) continue\r\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\r\n  safer[key] = buffer[key]\r\n}\r\n\r\nvar Safer = safer.Buffer = {}\r\nfor (key in Buffer) {\r\n  if (!Buffer.hasOwnProperty(key)) continue\r\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\r\n  Safer[key] = Buffer[key]\r\n}\r\n\r\nsafer.Buffer.prototype = Buffer.prototype\r\n\r\nif (!Safer.from || Safer.from === Uint8Array.from) {\r\n  Safer.from = function (value, encodingOrOffset, length) {\r\n    if (typeof value === 'number') {\r\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\r\n    }\r\n    if (value && typeof value.length === 'undefined') {\r\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\r\n    }\r\n    return Buffer(value, encodingOrOffset, length)\r\n  }\r\n}\r\n\r\nif (!Safer.alloc) {\r\n  Safer.alloc = function (size, fill, encoding) {\r\n    if (typeof size !== 'number') {\r\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\r\n    }\r\n    if (size < 0 || size >= 2 * (1 << 30)) {\r\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\r\n    }\r\n    var buf = Buffer(size)\r\n    if (!fill || fill.length === 0) {\r\n      buf.fill(0)\r\n    } else if (typeof encoding === 'string') {\r\n      buf.fill(fill, encoding)\r\n    } else {\r\n      buf.fill(fill)\r\n    }\r\n    return buf\r\n  }\r\n}\r\n\r\nif (!safer.kStringMaxLength) {\r\n  try {\r\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\r\n  } catch (e) {\r\n    // we can't determine kStringMaxLength in environments where process.binding\r\n    // is unsupported, so let's not set it\r\n  }\r\n}\r\n\r\nif (!safer.constants) {\r\n  safer.constants = {\r\n    MAX_LENGTH: safer.kMaxLength\r\n  }\r\n  if (safer.kStringMaxLength) {\r\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\r\n  }\r\n}\r\n\r\nmodule.exports = safer\r\n"]}